<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=readthedocs>readthedocs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/readthedocs/8.1.1/api/readthedocs'>8.1.1</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/readthedocs/8.1.1/api/readthedocs">8.1.1</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/readthedocs/8.1.1/api/readthedocs'>docs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/readthedocs/8.1.1/api/readthedocs">API</a>
                        <a href="/p/readthedocs/8.1.1/gallery">Gallery</a>
                        <a href="/p/readthedocs/8.1.1/examples">Examples</a>
                        <a href="/p/readthedocs/8.1.1/docs">Narrative</a>
                     </div>
                </div>

</nav>
    </header>
    <div class='container'>

    <div class="sidenav">
        <i class="fab fa-python"></i>
        <a href="#">Project Logo ^</a>
    <a href="#">readthedocs</a>
    <a href="#">8.1.1</a>
        <a class='external' href="https://github.com/readthedocs/readthedocs.org">GitHub</a>
    <hr/>
    <hr/>
    </div><!--end sidenav-->







<h1>Build Notifications and Webhooks</h1>
                           <div class='admonition'>
    <div>note</div>
        <p>Currently we don&#39;t send notifications or trigger webhooks on <code class='not-implemented'>:None:doc:`builds from pull requests &lt;/pull-requests&gt;`</code>.</p>

</div>



<h2>Email notifications</h2>
               <p>Read the Docs allows you to configure emails that can be sent on failing builds. This makes sure you know when your builds have failed.</p>

               <p>Take these steps to enable build notifications using email:</p>

                          <ul>               <li>               <p>Go to <code class='not-implemented'>:None:guilabel:`Admin`</code> &gt; <code class='not-implemented'>:None:guilabel:`Notifications`</code> in your project.</p>

</li>
               <li>               <p>Fill in the <strong>Email</strong> field under the <strong>New Email Notifications</strong> heading</p>

</li>
               <li>               <p>Submit the form</p>

</li>
            </ul>

               <p>You should now get notified by email when your builds fail!</p>


<h2>Build Status Webhooks</h2>
               <p>Read the Docs can also send webhooks when builds are triggered, successful or failed.</p>

               <p>Take these steps to enable build notifications using a webhook:</p>

                          <ul>               <li>               <p>Go to <code class='not-implemented'>:None:guilabel:`Admin`</code> &gt; <code class='not-implemented'>:None:guilabel:`Webhooks`</code> in your project.</p>

</li>
               <li>               <p>Fill in the <strong>URL</strong> field and select what events will trigger the webhook</p>

</li>
               <li>               <p>Modify the payload or leave the default (see below)</p>

</li>
               <li>               <p>Click on <code class='not-implemented'>:None:guilabel:`Save`</code></p>

</li>
            </ul>

               <pre class='not-implemented'>
.. figure:: /_static/images/webhooks-events.png
    (&#39;align&#39;, &#39;center&#39;)
    (&#39;alt&#39;, &#39;URL and events for a webhook&#39;)
    URL and events for a webhook</pre>


               <p>Every time one of the checked events triggers, Read the Docs will send a POST request to your webhook URL. The default payload will look like this:</p>

               <pre class='not-implemented'>
.. code-block:: json
    {
        &#34;event&#34;: &#34;build:triggered&#34;,
        &#34;name&#34;: &#34;docs&#34;,
        &#34;slug&#34;: &#34;docs&#34;,
        &#34;version&#34;: &#34;latest&#34;,
        &#34;commit&#34;: &#34;2552bb609ca46865dc36401dee0b1865a0aee52d&#34;,
        &#34;build&#34;: &#34;15173336&#34;,
        &#34;start_date&#34;: &#34;2021-11-03T16:23:14&#34;,
        &#34;build_url&#34;: &#34;https://readthedocs.org/projects/docs/builds/15173336/&#34;,
        &#34;docs_url&#34;: &#34;https://docs.readthedocs.io/en/latest/&#34;
    }</pre>


               <p>When a webhook is sent, a new entry will be added to the &#34;Recent Activity&#34; table. By clicking on each individual entry, you will see the server response, the webhook request, and the payload.</p>

               <pre class='not-implemented'>
.. figure:: /_static/images/webhooks-activity.png
    (&#39;align&#39;, &#39;center&#39;)
    (&#39;alt&#39;, &#39;Activity of a webhook&#39;)
    Activity of a webhook</pre>



<h3>Custom payload examples</h3>
               <p>You can customize the payload of the webhook to suit your needs, as long as it is valid JSON. Below you have a couple of examples, and in the following section you will find all the available variables.</p>

               <pre class='not-implemented'>
.. figure:: /_static/images/webhooks-payload.png
    (&#39;width&#39;, &#39;80%&#39;)
    (&#39;align&#39;, &#39;center&#39;)
    (&#39;alt&#39;, &#39;Custom payload&#39;)
    Custom payload</pre>



<h4>Slack</h4>
               <pre class='not-implemented'>
.. code-block:: json
    {
      &#34;attachments&#34;: [
        {
          &#34;color&#34;: &#34;#db3238&#34;,
          &#34;blocks&#34;: [
            {
              &#34;type&#34;: &#34;section&#34;,
              &#34;text&#34;: {
                &#34;type&#34;: &#34;mrkdwn&#34;,
                &#34;text&#34;: &#34;*Read the Docs build failed*&#34;
              }
            },
            {
              &#34;type&#34;: &#34;section&#34;,
              &#34;fields&#34;: [
                {
                  &#34;type&#34;: &#34;mrkdwn&#34;,
                  &#34;text&#34;: &#34;*Project*: &lt;{{ project.url }}|{{ project.name }}&gt;&#34;
                },
                {
                  &#34;type&#34;: &#34;mrkdwn&#34;,
                  &#34;text&#34;: &#34;*Version*: {{ version.name }} ({{ build.commit }})&#34;
                },
                {
                  &#34;type&#34;: &#34;mrkdwn&#34;,
                  &#34;text&#34;: &#34;*Build*: &lt;{{ build.url }}|{{ build.id }}&gt;&#34;
                }
              ]
            }
          ]
        }
      ]
    }</pre>


               <p>More information on <a link href="https://api.slack.com/messaging/webhooks" class='external'>the Slack Incoming Webhooks documentation</a>.</p>


<h4>Discord</h4>
               <pre class='not-implemented'>
.. code-block:: json
    {
      &#34;username&#34;: &#34;Read the Docs&#34;,
      &#34;content&#34;: &#34;Read the Docs build failed&#34;,
      &#34;embeds&#34;: [
        {
          &#34;title&#34;: &#34;Build logs&#34;,
          &#34;url&#34;: &#34;{{ build.url }}&#34;,
          &#34;color&#34;: 15258703,
          &#34;fields&#34;: [
            {
              &#34;name&#34;: &#34;*Project*&#34;,
              &#34;value&#34;: &#34;{{ project.url }}&#34;,
              &#34;inline&#34;: true
            },
            {
              &#34;name&#34;: &#34;*Version*&#34;,
              &#34;value&#34;: &#34;{{ version.name }} ({{ build.commit }})&#34;,
              &#34;inline&#34;: true
            },
            {
              &#34;name&#34;: &#34;*Build*&#34;,
              &#34;value&#34;: &#34;{{ build.url }}&#34;
            }
          ]
        }
      ]
    }</pre>


               <p>More information on <a link href="https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks" class='external'>the Discord webhooks documentation</a>.</p>


<h3>Variable substitutions reference</h3>
               <!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>{{ event }}</code>
</p>
</dt>
               <dd><p>Event that triggered the webhook, one of         <code class='verbatim'>build:triggered</code>
,         <code class='verbatim'>build:failed</code>
, or         <code class='verbatim'>build:passed</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ build.id }}</code>
</p>
</dt>
               <dd><p>Build ID.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ build.commit }}</code>
</p>
</dt>
               <dd><p>Commit corresponding to the build, if present (otherwise         <code class='verbatim'>&#34;&#34;</code>
).</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ build.url }}</code>
</p>
</dt>
               <dd><p>URL of the build, for example         <code class='verbatim'>https://readthedocs.org/projects/docs/builds/15173336/</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ build.docs_url }}</code>
</p>
</dt>
               <dd><p>URL of the documentation corresponding to the build,   for example         <code class='verbatim'>https://docs.readthedocs.io/en/latest/</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ build.start_date }}</code>
</p>
</dt>
               <dd><p>Start date of the build (UTC, ISO format), for example         <code class='verbatim'>2021-11-03T16:23:14</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ organization.name }}</code>
</p>
</dt>
               <dd><p>Organization name (Commercial only).</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ organization.slug }}</code>
</p>
</dt>
               <dd><p>Organization slug (Commercial only).</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ project.slug }}</code>
</p>
</dt>
               <dd><p>Project slug.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ project.name }}</code>
</p>
</dt>
               <dd><p>Project name.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ project.url }}</code>
</p>
</dt>
               <dd><p>URL of the project         <code class='verbatim'>dashboard</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ version.slug }}</code>
</p>
</dt>
               <dd><p>Version slug.</p>
</dd>
               <dt><p>        <code class='verbatim'>{{ version.name }}</code>
</p>
</dt>
               <dd><p>Version name.</p>
</dd>
           </dl>


<h3>Validating the payload</h3>
               <p>After you add a new webhook, Read the Docs will generate a secret key for it and uses it to generate a hash signature (HMAC-SHA256) for each payload that is included in the         <code class='verbatim'>X-Hub-Signature</code>
 header of the request.</p>

               <pre class='not-implemented'>
.. figure:: /_static/images/webhooks-secret.png
    (&#39;width&#39;, &#39;80%&#39;)
    (&#39;align&#39;, &#39;center&#39;)
    (&#39;alt&#39;, &#39;Webhook secret&#39;)
    Webhook secret</pre>


               <p>We highly recommend using this signature to verify that the webhook is coming from Read the Docs. To do so, you can add some custom code on your server, like this:</p>

               <pre class='not-implemented'>
.. code-block:: python
    import hashlib
    import hmac
    import os


    def verify_signature(payload, request_headers):
        &#34;&#34;&#34;
        Verify that the signature of payload is the same as the one coming from request_headers.
        &#34;&#34;&#34;
        digest = hmac.new(
            key=os.environ[&#34;WEBHOOK_SECRET&#34;].encode(),
            msg=payload.encode(),
            digestmod=hashlib.sha256,
        )
        expected_signature = digest.hexdigest()

        return hmac.compare_digest(
            request_headers[&#34;X-Hub-Signature&#34;].encode(),
            expected_signature.encode(),
        )</pre>



<h3>Legacy webhooks</h3>
               <p>Webhooks created before the custom payloads functionality was added to Read the Docs send a payload with the following structure:</p>

               <pre class='not-implemented'>
.. code-block:: json
    {
        &#34;name&#34;: &#34;Read the Docs&#34;,
        &#34;slug&#34;: &#34;rtd&#34;,
        &#34;build&#34;: {
            &#34;id&#34;: 6321373,
            &#34;commit&#34;: &#34;e8dd17a3f1627dd206d721e4be08ae6766fda40&#34;,
            &#34;state&#34;: &#34;finished&#34;,
            &#34;success&#34;: false,
            &#34;date&#34;: &#34;2017-02-15 20:35:54&#34;
        }
    }</pre>


               <p>To migrate to the new webhooks and keep a similar structure, you can use this payload:</p>

               <pre class='not-implemented'>
.. code-block:: json
    {
        &#34;name&#34;: &#34;{{ project.name }}&#34;,
        &#34;slug&#34;: &#34;{{ project.slug }}&#34;,
        &#34;build&#34;: {
            &#34;id&#34;: &#34;{{ build.id }}&#34;,
            &#34;commit&#34;: &#34;{{ build.commit }}&#34;,
            &#34;state&#34;: &#34;{{ event }}&#34;,
            &#34;date&#34;: &#34;{{ build.start_date }}&#34;
        }
    }</pre>



<h3 id="section-Examples">Examples</h3>
         See :
    


<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    GitHub : <a class='external' href='https://github.com/readthedocs/readthedocs.org/blob//None#LNone'>None#None</a>
<br/>

type: None <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>