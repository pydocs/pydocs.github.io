<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=readthedocs>readthedocs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/readthedocs/8.1.1/api/readthedocs'>8.1.1</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/readthedocs/8.1.1/api/readthedocs">8.1.1</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/readthedocs/8.1.1/api/readthedocs'>docs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/readthedocs/8.1.1/api/readthedocs">API</a>
                        <a href="/p/readthedocs/8.1.1/gallery">Gallery</a>
                        <a href="/p/readthedocs/8.1.1/examples">Examples</a>
                        <a href="/p/readthedocs/8.1.1/docs">Narrative</a>
                     </div>
                </div>

</nav>
    </header>
    <div class='container'>

    <div class="sidenav">
        <i class="fab fa-python"></i>
        <a href="#">Project Logo ^</a>
    <a href="#">readthedocs</a>
    <a href="#">8.1.1</a>
        <a class='external' href="https://github.com/readthedocs/readthedocs.org">GitHub</a>
    <hr/>
    <hr/>
    </div><!--end sidenav-->







<h1>Organizations</h1>
               <p>Currently we don&#39;t support organizations in the community site (a way to group different projects), we only support individual accounts.</p>

               <p>Several integrations that we support like GitHub and Bitbucket have organizations, where users group their repositories and manage them in groups rather than individually.</p>


<h2>Why move organizations in the community site?</h2>
               <p>We support organizations in the commercial site, having no organizations in the community site makes the code maintenance difficult for Read the Docs developers. Having organizations in the community site will make the differences between both more easy to manage.</p>

               <p>Users from the community site can have organizations in external sites from where we import their projects (like GitHub, Gitlab). Currently users have all projects from different organizations in their account. Having not a clear way to group/separate those.</p>

               <p>We are going to first move the code, and after that enable the feature on the community site.</p>


<h2>How are we going to support organizations?</h2>
               <p>Currently only users can own projects in the community site. With organizations this is going to change to:  Users and organizations can own projects.</p>

               <p>With this, the migration process would be straightforward for the community site.</p>

               <p>For the commercial site we are only to allow organizations to own projects for now (since the we have only subscriptions per organizations).</p>


<h2>What features of organizations are we going to support?</h2>
               <p>We have the following features in the commercial site that we don&#39;t have on the community site:</p>

                          <ul>               <li>               <p>Owners</p>

</li>
               <li>               <p>Teams</p>

</li>
               <li>               <p>Permissions</p>

</li>
               <li>               <p>Subscriptions</p>

</li>
            </ul>

               <p>Owners should be included to represent owners of the current organization.</p>

               <p>Teams, this is also handy to manage access to different projects under the same organization.</p>

               <p>Permissions, currently we have two type of permissions for teams: admin and read only. Read only permissions doesn&#39;t make sense in the community site since we only support public projects/versions (we do support private versions now, but we are planning to remove those). So, we should only support admin permissions for teams.</p>

               <p>Subscriptions, this is only valid for the corporate site, since we don&#39;t charge for use in the community site.</p>


<h2>How to migrate current projects</h2>
               <p>Since we are not replacing the current implementation, we don&#39;t need to migrate current projects from the community site nor from the corporate site.</p>


<h2>How to migrate the organizations app</h2>
               <p>The migration can be split in:</p>

                          <ol>               <li>               <p>Remove/simplify code from the organizations app on the corporate site.</p>

</li>
               <li>               <p>Isolate/separate models and code that isn&#39;t going to be moved.</p>

</li>
               <li>               <p>Start by moving the models, managers, and figure out how to handle migrations.</p>

</li>
               <li>               <p>Move the rest of the code as needed.</p>

</li>
               <li>               <p>Activate organizations app on the community site.</p>

</li>
               <li>               <p>Integrate the code from the community site to the new code.</p>

</li>
               <li>               <p>UI changes</p>

</li>
            </ol>

               <p>We should start by removing unused features and dead code from the organizations in the corporate site, and simplify existing code if possible (some of this was already done).</p>

               <p>Isolate/separate the models to be moved from the ones that aren&#39;t going to be moved. We should move the models that aren&#39;t going to me moved to another app.</p>

                          <ul>               <li>               <p>Plan</p>

</li>
               <li>               <p>PlanFeature</p>

</li>
               <li>               <p>Subscription</p>

</li>
            </ul>

               <p>This app can be named <em>subscriptions</em>. We can get around the table names and migrations by setting the explicitly the table name to         <code class='verbatim'>organizations_&lt;model&gt;</code>
, and doing a fake migration. Following suggestions in https://stackoverflow.com/questions/48860227/moving-multiple-models-from-one-django-app-to-another, that way we avoid having any downtime during the migration and any inconvenient caused from renaming the tables manually.</p>

               <p>Code related to subscriptions should be moved out from the organizations app.</p>

               <p>After that, it should be easier to move the organizations <em>app</em> (or part of it) to the community site (and no changes to table names would be required).</p>

               <p>We start by moving the models.</p>

                          <ul>               <li>               <p>Organization</p>

</li>
               <li>               <p>OrganizationOwner</p>

</li>
               <li>               <p>Team</p>

</li>
               <li>               <p>TeamInvite</p>

</li>
               <li>               <p>TeamMember</p>

</li>
            </ul>

               <p>Migrations aren&#39;t moved, since all current migrations depend on other models that aren&#39;t going to be moved. In the community site we run an initial migration, for the corporate site we run a fake migration. The migrations left from the commercial site can be removed after that.</p>

               <p>For managers and querysets that depend on subscriptions, we can use our pattern to make overridable classes (inheriting from         <code class='verbatim'>SettingsOverrideObject</code>
).</p>

               <p>Templates, urls, views, forms, notifications, signals, tasks can be moved later (we just need to make use of the models from the         <code class='verbatim'>readthedocs.organizations</code>
 module).</p>

               <p>If we decide to integrate organizations in the community site, we can add/move the UI elements and enable the app.</p>

               <p>After the app is moved, we can move more code that depends on organizations to the community site.</p>


<h2>Namespace</h2>
               <p>Currently we use the project&#39;s slug as namespace, in the commercial site we use the combination of         <code class='verbatim'>organization.slug</code>
 +         <code class='verbatim'>project.slug</code>
 as namespace, since in the corporate site we don&#39;t care so much about a unique namespace between all users, but a unique namespace per organization.</p>

               <p>For the community site probably this approach isn&#39;t the best, since we always serve docs publicly from         <code class='verbatim'>slug.readthedocs.io</code>
. And most of the users don&#39;t have a custom domain.</p>

               <p>The corporate site will use         <code class='verbatim'>organization.slug</code>
 +         <code class='verbatim'>project.slug</code>
 as slug, And the community site will always use         <code class='verbatim'>project.slug</code>
 as slug, even if the project belongs to an organization.</p>

               <p>We need to refactor the way we get the namespace to be more easy to manage in both sites.</p>


<h2>Future Changes</h2>
               <p>Changes that aren&#39;t needed immediately after the migration, but that should be done:</p>

                          <ul>               <li>               <p>UI for organizations in the community site.</p>

</li>
               <li>               <p>Add new endpoints to the API (v3 only).</p>

</li>
               <li>               <p>Make the relationship between the models         <code class='verbatim'>Organization</code>
 and         <code class='verbatim'>Project</code>
 one to many   (currently many to many).</p>

</li>
            </ul>


<h3 id="section-Examples">Examples</h3>
         See :
    


<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    GitHub : <a class='external' href='https://github.com/readthedocs/readthedocs.org/blob//None#LNone'>None#None</a>
<br/>

type: None <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>