<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=distributed>distributed</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/IPython/8.4.0/api/IPython.html">IPython</a>
<a href="/p/astropy/5.0/api/astropy.html">astropy</a>
<a href="/p/dask/2021.10.0/api/dask.html">dask</a>
<a href="/p/distributed/2021.10.0/api/distributed.html">distributed</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a>
<a href="/p/networkx/2.8.2/api/networkx.html">networkx</a>
<a href="/p/numpy/1.22.4/api/numpy.html">numpy</a>
<a href="/p/pandas/1.4.2/api/pandas.html">pandas</a>
<a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
<a href="/p/readthedocs/8.1.1/api/readthedocs.html">readthedocs</a>
<a href="/p/scipy/1.8.0/api/scipy.html">scipy</a>
<a href="/p/skimage/0.17.2/api/skimage.html">skimage</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/distributed/2021.10.0/api/distributed.html'>2021.10.0</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/distributed/2021.10.0/api/distributed.html">2021.10.0</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/distributed/2021.10.0/api/distributed.html'>API</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/distributed/2021.10.0/api/distributed.html">API</a>
                        <a href="/p/distributed/2021.10.0/gallery">Gallery</a>
                        <a href="/p/distributed/2021.10.0/examples">Examples</a>
                        <a href="/p/distributed/2021.10.0/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='distributed.html'>distributed</a>.                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='distributed.pubsub.html'>pubsub</a>.                            <div class="dropdown-content">
<a href="/p/distributed/2021.10.0/api/distributed._concurrent_futures_thread.html">_concurrent_futures_thread</a>
<a href="/p/distributed/2021.10.0/api/distributed._version.html">_version</a>
<a href="/p/distributed/2021.10.0/api/distributed.active_memory_manager.html">active_memory_manager</a>
<a href="/p/distributed/2021.10.0/api/distributed.actor.html">actor</a>
<a href="/p/distributed/2021.10.0/api/distributed.batched.html">batched</a>
<a href="/p/distributed/2021.10.0/api/distributed.cfexecutor.html">cfexecutor</a>
<a href="/p/distributed/2021.10.0/api/distributed.client.html">client</a>
<a href="/p/distributed/2021.10.0/api/distributed.comm.html">comm</a>
<a href="/p/distributed/2021.10.0/api/distributed.compatibility.html">compatibility</a>
<a href="/p/distributed/2021.10.0/api/distributed.core.html">core</a>
<a href="/p/distributed/2021.10.0/api/distributed.deploy.html">deploy</a>
<a href="/p/distributed/2021.10.0/api/distributed.diagnostics.html">diagnostics</a>
<a href="/p/distributed/2021.10.0/api/distributed.diskutils.html">diskutils</a>
<a href="/p/distributed/2021.10.0/api/distributed.event.html">event</a>
<a href="/p/distributed/2021.10.0/api/distributed.http.html">http</a>
<a href="/p/distributed/2021.10.0/api/distributed.lock.html">lock</a>
<a href="/p/distributed/2021.10.0/api/distributed.locket.html">locket</a>
<a href="/p/distributed/2021.10.0/api/distributed.metrics.html">metrics</a>
<a href="/p/distributed/2021.10.0/api/distributed.multi_lock.html">multi_lock</a>
<a href="/p/distributed/2021.10.0/api/distributed.nanny.html">nanny</a>
<a href="/p/distributed/2021.10.0/api/distributed.node.html">node</a>
<a href="/p/distributed/2021.10.0/api/distributed.objects.html">objects</a>
<a href="/p/distributed/2021.10.0/api/distributed.preloading.html">preloading</a>
<a href="/p/distributed/2021.10.0/api/distributed.process.html">process</a>
<a href="/p/distributed/2021.10.0/api/distributed.proctitle.html">proctitle</a>
<a href="/p/distributed/2021.10.0/api/distributed.profile.html">profile</a>
<a href="/p/distributed/2021.10.0/api/distributed.protocol.html">protocol</a>
<a href="/p/distributed/2021.10.0/api/distributed.publish.html">publish</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.html">pubsub</a>
<a href="/p/distributed/2021.10.0/api/distributed.queues.html">queues</a>
<a href="/p/distributed/2021.10.0/api/distributed.recreate_tasks.html">recreate_tasks</a>
<a href="/p/distributed/2021.10.0/api/distributed.scheduler.html">scheduler</a>
<a href="/p/distributed/2021.10.0/api/distributed.security.html">security</a>
<a href="/p/distributed/2021.10.0/api/distributed.semaphore.html">semaphore</a>
<a href="/p/distributed/2021.10.0/api/distributed.sizeof.html">sizeof</a>
<a href="/p/distributed/2021.10.0/api/distributed.stealing.html">stealing</a>
<a href="/p/distributed/2021.10.0/api/distributed.system.html">system</a>
<a href="/p/distributed/2021.10.0/api/distributed.system_monitor.html">system_monitor</a>
<a href="/p/distributed/2021.10.0/api/distributed.threadpoolexecutor.html">threadpoolexecutor</a>
<a href="/p/distributed/2021.10.0/api/distributed.utils.html">utils</a>
<a href="/p/distributed/2021.10.0/api/distributed.utils_comm.html">utils_comm</a>
<a href="/p/distributed/2021.10.0/api/distributed.utils_perf.html">utils_perf</a>
<a href="/p/distributed/2021.10.0/api/distributed.variable.html">variable</a>
<a href="/p/distributed/2021.10.0/api/distributed.versions.html">versions</a>
<a href="/p/distributed/2021.10.0/api/distributed.widgets.html">widgets</a>
<a href="/p/distributed/2021.10.0/api/distributed.worker.html">worker</a>
<a href="/p/?/?/?/distributed.worker_client.html.html">worker_client</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='distributed.pubsub.Pub.html'>Pub</a>.                            <div class="dropdown-content">
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html">Pub</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.PubSubClientExtension.html">PubSubClientExtension</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.PubSubSchedulerExtension.html">PubSubSchedulerExtension</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.PubSubWorkerExtension.html">PubSubWorkerExtension</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Sub.html">Sub</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" >+</a>                            <div class="dropdown-content">
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.__init__.html">__init__</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.__repr__.html">__repr__</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub._put.html">_put</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub._start.html">_start</a>
<a href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.put.html">put</a>
                            </div>
                    </div><!--end dropdown-->
</nav>
    </header>
    <div class='container'>

    <div class="sidenav">
        <img src="/p/distributed/2021.10.0/img/dask-logo.png"/>
    <a href="#">distributed</a>
    <a href="#">2021.10.0</a>
    <hr/>
    <hr/>
<a href="#section-Parameters">Parameters</a><a href="#section-backrefs">BackRef</a>
    </div><!--end sidenav-->







<!-- rendering Extended Summary -->
                       <p>This allows clients and workers to directly communicate data between each other with a typical Publish-Subscribe pattern.  This involves two components,</p>

               <p>Pub objects, into which we put data:</p>

                           <blockquote><pre>&gt;&gt;&gt; pub = Pub(&#39;my-topic&#39;)
&gt;&gt;&gt; pub.put(123)</pre></blockquote>

               <p>And Sub objects, from which we collect data:</p>

                           <blockquote><pre>&gt;&gt;&gt; sub = Sub(&#39;my-topic&#39;)
&gt;&gt;&gt; sub.get()
123</pre></blockquote>

               <p>Many Pub and Sub objects can exist for the same topic.  All data sent from any Pub will be sent to all Sub objects on that topic that are currently connected.  Pub&#39;s and Sub&#39;s find each other using the scheduler, but they communicate directly with each other without coordination from the scheduler.</p>

               <p>Pubs and Subs use the central scheduler to find each other, but not to mediate the communication.  This means that there is very little additional latency or overhead, and they are appropriate for very frequent data transfers.  For context, most data transfer first checks with the scheduler to find which workers should participate, and then does direct worker-to-worker transfers.  This checking in with the scheduler provides some stability guarantees, but also adds in a few extra network hops.  PubSub doesn&#39;t do this, and so is faster, but also can easily drop messages if Pubs or Subs disappear without notice.</p>

               <p>When using a Pub or Sub from a Client all communications will be routed through the scheduler.  This can cause some performance degradation.  Pubs and Subs only operate at top-speed when they are both on workers.</p>

<!-- rendering Notes -->
        <h3 id="section-Parameters">Parameters</h3>
<dl>
<dt><a id="name: object (msgpack serializable)">name: object (msgpack serializable)</a> : </dt>
<dd>
<p>The name of the group of Pubs and Subs on which to participate.</p>

</dd>
<dt><a id="worker: Worker (optional)">worker: Worker (optional)</a> : </dt>
<dd>
<p>The worker to be used for publishing data. Defaults to the value of         <code class='verbatim'>`get_worker()`</code>
. If given,         <code class='verbatim'>client</code>
 must be         <code class='verbatim'>None</code>
.</p>

</dd>
<dt><a id="client: Client (optional)">client: Client (optional)</a> : </dt>
<dd>
<p>Client used for communication with the scheduler. Defaults to the value of         <code class='verbatim'>get_client()</code>
. If given,         <code class='verbatim'>worker</code>
 must be         <code class='verbatim'>None</code>
.</p>

</dd>
</dl>

<!-- rendering Summary -->
                       <p>Publish data with Publish-Subscribe pattern</p>

<h3> See Also</h3>
<dl>
            <dt><code><a href="/p/distributed/2021.10.0/api/distributed.pubsub.Sub.html" class='exists'>Sub</a></code>
</dt>
            <!-- This See also will be incorrect as the SeeAlsoItems are improperly deserialised. -->
            <dd></dd>
        </dl>
<h3 id="section-Examples">Examples</h3>
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html">pub</a><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html">Pub</a><span class="">(</span><span class="s1">&#39;</span><span class="s1">my-topic</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">sub</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Sub</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">my-topic</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html">pub</a><span class="o">.</span><a class="foo " href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.put.html">put</a><span class="">(</span><span class="">[</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">3</span><span class="">]</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">sub</span><span class="o">.</span><span class="">get</span><span class="">(</span><span class="">)</span>
[1, 2, 3]</pre>
            
                <p>You can also use sub within a for loop:</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">for</span><span class=""> </span><span class="">msg</span><span class=""> </span><span class="ow">in</span><span class=""> </span><span class="">sub</span><span class="">:</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><a class="foo nb" href="/p/builtins/*/api/builtins.print.html">print</a><span class="">(</span><span class="">msg</span><span class="">)</span>
</pre>
            
                <p>or an async for loop</p>

            
<span class='warning'>This example does not not appear to be valid Python Syntax</span><pre class='highlight syntax_error'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">async</span><span class=""> </span><span class="k">for</span><span class=""> </span><span class="">msg</span><span class=""> </span><span class="ow">in</span><span class=""> </span><span class="">sub</span><span class="">:</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><a class="foo nb" href="/p/builtins/*/api/builtins.print.html">print</a><span class="">(</span><span class="">msg</span><span class="">)</span>
</pre>
            
                <p>Similarly the         <code class='verbatim'>.get</code>
 method will return an awaitable if used by an async client or within the IOLoop thread of a worker</p>

            
<span class='warning'>This example does not not appear to be valid Python Syntax</span><pre class='highlight syntax_error'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">await</span><span class=""> </span><span class="">sub</span><span class="o">.</span><span class="">get</span><span class="">(</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
</pre>
            
                <p>You can see the set of connected worker subscribers by looking at the         <code class='verbatim'>.subscribers</code>
 attribute:</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html">pub</a><span class="o">.</span><a class="foo " href="/p/builtins/*/api/builtins.dict.html">subscribers</a>
{&#39;tcp://...&#39;: {},
 &#39;tcp://...&#39;: {}}</pre>
            
         See :
    

    <h3 id='section-backrefs'>Back References</h3>
    <p>The following pages refer to to this document either explicitly or contain code examples using this.</p>

        <code><a link href="/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html" class='exists'>distributed.pubsub.Pub</a></code>
        <code><a link href="/p/distributed/2021.10.0/api/distributed.pubsub.Sub.html" class='exists'>distributed.pubsub.Sub</a></code>

<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    File: /distributed/pubsub.py#202
<br/>

type: &lt;class &#39;type&#39;&gt; <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {"nodes": [{"id": 1, "val": 20.96148139681572, "label": "builtins.print", "mod": "builtins", "url": "/p/builtins/*/api/builtins.print"}, {"id": 3, "val": 22.212670403551897, "label": "builtins.dict", "mod": "builtins", "url": "/p/builtins/*/api/builtins.dict"}, {"id": 4, "val": 9.0, "label": "distributed.pubsub.Sub", "mod": "distributed", "url": "/p/distributed/2021.10.0/api/distributed.pubsub.Sub"}, {"id": 5, "val": 9.0, "label": "distributed.pubsub.Pub.put", "mod": "distributed", "url": "/p/distributed/2021.10.0/api/distributed.pubsub.Pub.put"}], "links": []};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>