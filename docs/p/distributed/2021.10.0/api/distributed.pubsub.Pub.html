<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Document</title><link href=https://fonts.xz.style/serve/inter.css rel=stylesheet><link crossorigin=anonymous href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css rel=stylesheet><script type=text/x-mathjax-config>
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script><script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js></script><link href=/papyri.css rel=stylesheet><style>header > brand, header>:first-child {
        border-right: 1px solid #ccc;
        border-left: 1px solid #ccc;
        padding: 16px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        display: inline-block; 
        width: 167px;
    }
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */</style></head><body class=tex2jax_ignore><header><brand><i class="fab fa-python"></i><a href=/>Home</a></brand><nav>/ <a href=/>p</a>  /  <div class=dropdown><a href=distributed>distributed</a> /  <div class=dropdown-content><a href=/p/IPython/8.2.0.dev/api/IPython.html>IPython</a><a href=/p/astropy/5.0/api/astropy.html>astropy</a><a href=/p/dask/2021.10.0/api/dask.html>dask</a><a href=/p/distributed/2021.10.0/api/distributed.html>distributed</a><a href=/p/matplotlib/3.5.1/api/matplotlib.html>matplotlib</a><a href=/p/networkx/2.7.2rc1.dev0/api/networkx.html>networkx</a><a href=/p/numpy/1.22.3/api/numpy.html>numpy</a><a href=/p/pandas/1.4.1/api/pandas.html>pandas</a><a href=/p/papyri/0.0.8/api/papyri.html>papyri</a><a href=/p/scipy/1.8.0/api/scipy.html>scipy</a><a href=/p/skimage/0.17.2/api/skimage.html>skimage</a></div></div><div class=dropdown><a href=/p/distributed/2021.10.0/api/distributed.html>2021.10.0</a> /  <div class=dropdown-content><a href=/p/distributed/2021.10.0/api/distributed.html>2021.10.0</a></div></div><div class=dropdown><a href=/p/distributed/2021.10.0/api/distributed.html>api</a> /  <div class=dropdown-content><a href=/p/distributed/2021.10.0/api/distributed.html>API</a><a href=/p/distributed/2021.10.0/gallery>Gallery</a><a href=/p/distributed/2021.10.0/examples>Examples</a></div></div><div class=dropdown><a class=dropbtn href=distributed.html>distributed</a>.</div><div class=dropdown><a class=dropbtn href=distributed.pubsub.html>pubsub</a>. <div class=dropdown-content><a href=/p/distributed/2021.10.0/api/distributed._concurrent_futures_thread.html>_concurrent_futures_thread</a><a href=/p/distributed/2021.10.0/api/distributed._version.html>_version</a><a href=/p/distributed/2021.10.0/api/distributed.active_memory_manager.html>active_memory_manager</a><a href=/p/distributed/2021.10.0/api/distributed.actor.html>actor</a><a href=/p/distributed/2021.10.0/api/distributed.batched.html>batched</a><a href=/p/distributed/2021.10.0/api/distributed.cfexecutor.html>cfexecutor</a><a href=/p/distributed/2021.10.0/api/distributed.client.html>client</a><a href=/p/distributed/2021.10.0/api/distributed.comm.html>comm</a><a href=/p/distributed/2021.10.0/api/distributed.compatibility.html>compatibility</a><a href=/p/distributed/2021.10.0/api/distributed.core.html>core</a><a href=/p/distributed/2021.10.0/api/distributed.deploy.html>deploy</a><a href=/p/distributed/2021.10.0/api/distributed.diagnostics.html>diagnostics</a><a href=/p/distributed/2021.10.0/api/distributed.diskutils.html>diskutils</a><a href=/p/distributed/2021.10.0/api/distributed.event.html>event</a><a href=/p/distributed/2021.10.0/api/distributed.http.html>http</a><a href=/p/distributed/2021.10.0/api/distributed.lock.html>lock</a><a href=/p/distributed/2021.10.0/api/distributed.locket.html>locket</a><a href=/p/distributed/2021.10.0/api/distributed.metrics.html>metrics</a><a href=/p/distributed/2021.10.0/api/distributed.multi_lock.html>multi_lock</a><a href=/p/distributed/2021.10.0/api/distributed.nanny.html>nanny</a><a href=/p/distributed/2021.10.0/api/distributed.node.html>node</a><a href=/p/distributed/2021.10.0/api/distributed.objects.html>objects</a><a href=/p/distributed/2021.10.0/api/distributed.preloading.html>preloading</a><a href=/p/distributed/2021.10.0/api/distributed.process.html>process</a><a href=/p/distributed/2021.10.0/api/distributed.proctitle.html>proctitle</a><a href=/p/distributed/2021.10.0/api/distributed.profile.html>profile</a><a href=/p/distributed/2021.10.0/api/distributed.protocol.html>protocol</a><a href=/p/distributed/2021.10.0/api/distributed.publish.html>publish</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.html>pubsub</a><a href=/p/distributed/2021.10.0/api/distributed.queues.html>queues</a><a href=/p/distributed/2021.10.0/api/distributed.recreate_tasks.html>recreate_tasks</a><a href=/p/distributed/2021.10.0/api/distributed.scheduler.html>scheduler</a><a href=/p/distributed/2021.10.0/api/distributed.security.html>security</a><a href=/p/distributed/2021.10.0/api/distributed.semaphore.html>semaphore</a><a href=/p/distributed/2021.10.0/api/distributed.sizeof.html>sizeof</a><a href=/p/distributed/2021.10.0/api/distributed.stealing.html>stealing</a><a href=/p/distributed/2021.10.0/api/distributed.system.html>system</a><a href=/p/distributed/2021.10.0/api/distributed.system_monitor.html>system_monitor</a><a href=/p/distributed/2021.10.0/api/distributed.threadpoolexecutor.html>threadpoolexecutor</a><a href=/p/distributed/2021.10.0/api/distributed.utils.html>utils</a><a href=/p/distributed/2021.10.0/api/distributed.utils_comm.html>utils_comm</a><a href=/p/distributed/2021.10.0/api/distributed.utils_perf.html>utils_perf</a><a href=/p/distributed/2021.10.0/api/distributed.variable.html>variable</a><a href=/p/distributed/2021.10.0/api/distributed.versions.html>versions</a><a href=/p/distributed/2021.10.0/api/distributed.widgets.html>widgets</a><a href=/p/distributed/2021.10.0/api/distributed.worker.html>worker</a><a href=/p/?/?/api/distributed.worker_client.html>worker_client</a></div></div><div class=dropdown><a class=dropbtn href=distributed.pubsub.Pub.html>Pub</a>. <div class=dropdown-content><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html>Pub</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.PubSubClientExtension.html>PubSubClientExtension</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.PubSubSchedulerExtension.html>PubSubSchedulerExtension</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.PubSubWorkerExtension.html>PubSubWorkerExtension</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Sub.html>Sub</a></div></div><div class=dropdown><a class=dropbtn>+</a><div class=dropdown-content><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.__init__.html>__init__</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.__repr__.html>__repr__</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub._put.html>_put</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub._start.html>_start</a><a href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.put.html>put</a></div></div></nav></header><div class=container><div class=sidenav><img src=/p/distributed/2021.10.0/img/logo.png><a href=#>distributed</a><a href=#>2021.10.0</a><hr><hr><a href=#section-Parameters>Parameters</a><a href=#section-backrefs>BackRef</a></div><p>This allows clients and workers to directly communicate data between each other with a typical Publish-Subscribe pattern. This involves two components,</p><p>Pub objects, into which we put data:</p><pre>>>> pub = Pub('my-topic')
>>> pub.put(123)
</pre><p>And Sub objects, from which we collect data:</p><pre>>>> sub = Sub('my-topic')
>>> sub.get()
123
</pre><p>Many Pub and Sub objects can exist for the same topic. All data sent from any Pub will be sent to all Sub objects on that topic that are currently connected. Pub's and Sub's find each other using the scheduler, but they communicate directly with each other without coordination from the scheduler.</p><p>Pubs and Subs use the central scheduler to find each other, but not to mediate the communication. This means that there is very little additional latency or overhead, and they are appropriate for very frequent data transfers. For context, most data transfer first checks with the scheduler to find which workers should participate, and then does direct worker-to-worker transfers. This checking in with the scheduler provides some stability guarantees, but also adds in a few extra network hops. PubSub doesn't do this, and so is faster, but also can easily drop messages if Pubs or Subs disappear without notice.</p><p>When using a Pub or Sub from a Client all communications will be routed through the scheduler. This can cause some performance degradation. Pubs and Subs only operate at top-speed when they are both on workers.</p><h3 id=section-Parameters>Parameters</h3><dl><dt><a id="name: object (msgpack serializable)">name: object (msgpack serializable)</a> :</dt><dd><p>The name of the group of Pubs and Subs on which to participate.</p></dd><dt><a id="worker: Worker (optional)">worker: Worker (optional)</a> :</dt><dd><p>The worker to be used for publishing data. Defaults to the value of <code class=verbatim>`get_worker()`</code> . If given, <code class=verbatim>client</code> must be <code class=verbatim>None</code> .</p></dd><dt><a id="client: Client (optional)">client: Client (optional)</a> :</dt><dd><p>Client used for communication with the scheduler. Defaults to the value of <code class=verbatim>get_client()</code> . If given, <code class=verbatim>worker</code> must be <code class=verbatim>None</code> .</p></dd></dl><p>Publish data with Publish-Subscribe pattern</p><h3 id=section-Examples>Examples</h3><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pub</span><span> </span><span class=o>=</span><span> </span><a class=foo href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html>Pub</a><span>(</span><span class=s1>'</span><span class=s1>my-topic</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span>sub</span><span> </span><span class=o>=</span><span> </span><a class=foo href=/p/distributed/2021.10.0/api/distributed.pubsub.Sub.html>Sub</a><span>(</span><span class=s1>'</span><span class=s1>my-topic</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span>pub</span><span class=o>.</span><span>put</span><span>(</span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>]</span><span>)</span><br><span class=nsl>... </span><span>sub</span><span class=o>.</span><span>get</span><span>(</span><span>)</span>
[1, 2, 3]</pre><p>You can also use sub within a for loop:</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span class=k>for</span><span> </span><span>msg</span><span> </span><span class=ow>in</span><span> </span><span>sub</span><span>:</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>    </span><a class="foo nb"href=/p/distributed/2021.10.0/api/distributed.worker.print.html>print</a><span>(</span><span>msg</span><span>)</span>
</pre><p>or an async for loop</p><span class=warning>This example does not not appear to be valid Python Syntax</span><pre class="highlight syntax_error"><span class=nsl>>>> </span><span class=k>async</span><span> </span><span class=k>for</span><span> </span><span>msg</span><span> </span><span class=ow>in</span><span> </span><span>sub</span><span>:</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>    </span><a class="foo nb"href=/p/distributed/2021.10.0/api/distributed.worker.print.html>print</a><span>(</span><span>msg</span><span>)</span>
</pre><p>Similarly the <code class=verbatim>.get</code> method will return an awaitable if used by an async client or within the IOLoop thread of a worker</p><span class=warning>This example does not not appear to be valid Python Syntax</span><pre class="highlight syntax_error"><span class=nsl>>>> </span><span class=k>await</span><span> </span><span>sub</span><span class=o>.</span><span>get</span><span>(</span><span>)</span><span>  </span><span class=c1># doctest: +SKIP</span>
</pre><p>You can see the set of connected worker subscribers by looking at the <code class=verbatim>.subscribers</code> attribute:</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pub</span><span class=o>.</span><span>subscribers</span>
{'tcp://...': {},
 'tcp://...': {}}</pre> See : <h3 id=section-backrefs>Back References</h3><p>The following pages refer to to this document either explicitly or contain code examples using this.</p><code><a class=exists href=/p/distributed/2021.10.0/api/distributed.pubsub.Pub.html link>distributed.pubsub.Pub</a></code><h3>Local connectivity graph</h3><p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p><p>Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows or text (beyond on hover)</p><canvas class=graph height=500 width=800></canvas><p>SVG is more flexible but power hungry; and does not scale well to 50 + nodes.</p><svg class=graph height=500 width=600></svg><p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted (or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library they belong to, and scaled with the number of references pointing them</p><hr> File: /distributed/pubsub.py#202 <br> type: &LTclass 'type'> <br> Commit: <br><script src=https://d3js.org/d3.v4.min.js></script><script src=https://d3js.org/d3-selection-multi.v1.js></script><style>.node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };</style><script>window._data_graph={nodes:[{id:1,val:9,label:"distributed.pubsub.Sub",mod:"distributed",url:"/p/distributed/2021.10.0/api/distributed.pubsub.Sub"},{id:3,val:10.23606797749979,label:"distributed.worker.print",mod:"distributed",url:"/p/distributed/2021.10.0/api/distributed.worker.print"}],links:[]};</script><script src=/graph_canvas.js></script><script src=/graph_svg.js></script></div></body></html>