<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Document</title><link href=https://fonts.xz.style/serve/inter.css rel=stylesheet><link crossorigin=anonymous href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css rel=stylesheet><script type=text/x-mathjax-config>
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script><script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js></script><link href=/papyri.css rel=stylesheet><style>header > brand, header>:first-child {
        border-right: 1px solid #ccc;
        border-left: 1px solid #ccc;
        padding: 16px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        display: inline-block; 
        width: 167px;
    }
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */</style></head><body class=tex2jax_ignore><header><brand><i class="fab fa-python"></i><a href=/>Home</a></brand><nav>/ <a href=/>p</a>  /  <div class=dropdown><a href=pandas>pandas</a> /  <div class=dropdown-content><a href=/p/IPython/8.2.0.dev/api/IPython.html>IPython</a><a href=/p/astropy/5.0/api/astropy.html>astropy</a><a href=/p/dask/2021.10.0/api/dask.html>dask</a><a href=/p/distributed/2021.10.0/api/distributed.html>distributed</a><a href=/p/matplotlib/3.5.1/api/matplotlib.html>matplotlib</a><a href=/p/networkx/2.7.2rc1.dev0/api/networkx.html>networkx</a><a href=/p/numpy/1.22.3/api/numpy.html>numpy</a><a href=/p/pandas/1.4.1/api/pandas.html>pandas</a><a href=/p/papyri/0.0.8/api/papyri.html>papyri</a><a href=/p/scipy/1.8.0/api/scipy.html>scipy</a><a href=/p/skimage/0.17.2/api/skimage.html>skimage</a></div></div><div class=dropdown><a href=/p/pandas/1.4.1/api/pandas.html>1.4.1</a> /  <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.html>1.4.1</a></div></div><div class=dropdown><a href=/p/pandas/1.4.1/api/pandas.html>api</a> /  <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.html>API</a><a href=/p/pandas/1.4.1/gallery>Gallery</a><a href=/p/pandas/1.4.1/examples>Examples</a></div></div><div class=dropdown><a class=dropbtn href=pandas.html>pandas</a>.</div><div class=dropdown><a class=dropbtn href=pandas.core.html>core</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.__dir__.html>__dir__</a><a href=/p/pandas/1.4.1/api/pandas.__getattr__.html>__getattr__</a><a href=/p/pandas/1.4.1/api/pandas._config.html>_config</a><a href=/p/pandas/1.4.1/api/pandas._libs.html>_libs</a><a href=/p/pandas/1.4.1/api/pandas._testing.html>_testing</a><a href=/p/pandas/1.4.1/api/pandas._typing.html>_typing</a><a href=/p/pandas/1.4.1/api/pandas._version.html>_version</a><a href=/p/pandas/1.4.1/api/pandas.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.arrays.html>arrays</a><a href=/p/pandas/1.4.1/api/pandas.compat.html>compat</a><a href=/p/pandas/1.4.1/api/pandas.core.html>core</a><a href=/p/pandas/1.4.1/api/pandas.errors.html>errors</a><a href=/p/pandas/1.4.1/api/pandas.io.html>io</a><a href=/p/pandas/1.4.1/api/pandas.plotting.html>plotting</a><a href=/p/pandas/1.4.1/api/pandas.testing.html>testing</a><a href=/p/pandas/1.4.1/api/pandas.tseries.html>tseries</a><a href=/p/pandas/1.4.1/api/pandas.util.html>util</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.html>reshape</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core._numba.html>_numba</a><a href=/p/pandas/1.4.1/api/pandas.core.accessor.html>accessor</a><a href=/p/pandas/1.4.1/api/pandas.core.algorithms.html>algorithms</a><a href=/p/pandas/1.4.1/api/pandas.core.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.core.apply.html>apply</a><a href=/p/pandas/1.4.1/api/pandas.core.array_algos.html>array_algos</a><a href=/p/pandas/1.4.1/api/pandas.core.arraylike.html>arraylike</a><a href=/p/pandas/1.4.1/api/pandas.core.arrays.html>arrays</a><a href=/p/pandas/1.4.1/api/pandas.core.base.html>base</a><a href=/p/pandas/1.4.1/api/pandas.core.common.html>common</a><a href=/p/pandas/1.4.1/api/pandas.core.computation.html>computation</a><a href=/p/pandas/1.4.1/api/pandas.core.config_init.html>config_init</a><a href=/p/pandas/1.4.1/api/pandas.core.construction.html>construction</a><a href=/p/pandas/1.4.1/api/pandas.core.describe.html>describe</a><a href=/p/pandas/1.4.1/api/pandas.core.dtypes.html>dtypes</a><a href=/p/pandas/1.4.1/api/pandas.core.flags.html>flags</a><a href=/p/pandas/1.4.1/api/pandas.core.frame.html>frame</a><a href=/p/pandas/1.4.1/api/pandas.core.generic.html>generic</a><a href=/p/pandas/1.4.1/api/pandas.core.groupby.html>groupby</a><a href=/p/pandas/1.4.1/api/pandas.core.indexers.html>indexers</a><a href=/p/pandas/1.4.1/api/pandas.core.indexes.html>indexes</a><a href=/p/pandas/1.4.1/api/pandas.core.indexing.html>indexing</a><a href=/p/pandas/1.4.1/api/pandas.core.internals.html>internals</a><a href=/p/pandas/1.4.1/api/pandas.core.missing.html>missing</a><a href=/p/pandas/1.4.1/api/pandas.core.nanops.html>nanops</a><a href=/p/pandas/1.4.1/api/pandas.core.ops.html>ops</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.html>reshape</a><a href=/p/pandas/1.4.1/api/pandas.core.roperator.html>roperator</a><a href=/p/pandas/1.4.1/api/pandas.core.sample.html>sample</a><a href=/p/pandas/1.4.1/api/pandas.core.series.html>series</a><a href=/p/pandas/1.4.1/api/pandas.core.shared_docs.html>shared_docs</a><a href=/p/pandas/1.4.1/api/pandas.core.sorting.html>sorting</a><a href=/p/pandas/1.4.1/api/pandas.core.strings.html>strings</a><a href=/p/pandas/1.4.1/api/pandas.core.tools.html>tools</a><a href=/p/pandas/1.4.1/api/pandas.core.util.html>util</a><a href=/p/pandas/1.4.1/api/pandas.core.window.html>window</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.melt.html>melt</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core.reshape.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.concat.html>concat</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.html>melt</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.html>merge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.pivot.html>pivot</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.reshape.html>reshape</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.tile.html>tile</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.util.html>util</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a><div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.melt.html>melt</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a></div></div></nav></header><div class=container><div class=sidenav><img src=/p/pandas/1.4.1/img/logo.png><a href=#>pandas</a><a href=#>1.4.1</a><hr><hr><a href=#section-Notes>Notes</a><a href=#section-Parameters>Parameters</a><a href=#section-Returns>Returns</a><a href=#section-backrefs>BackRef</a></div><code class=signature>wide_to_long(df: 'DataFrame', stubnames, i, j, sep: 'str' = '', suffix: 'str' = '\\d+') -> 'DataFrame'</code><p>Less flexible but more user-friendly than melt.</p><p>With stubnames ['A', 'B'], this function expects to find one or more group of columns with format A-suffix1, A-suffix2,..., B-suffix1, B-suffix2,... You specify what you want to call this suffix in the resulting long format with <code><a class=local href=#j link>j</a></code> (for example <code>:None:None:`j='year'`</code>)</p><p>Each row of these wide variables are assumed to be uniquely identified by <code><a class=local href=#i link>i</a></code> (can be a single column name or a list of column names)</p><p>All remaining variables in the data frame are left intact.</p><h3 id=section-Notes>Notes</h3><p>All extra variables are left untouched. This simply uses <code><a class=exists href=/p/pandas/*/api/pandas.core.reshape.melt.melt.html link>pandas.melt</a></code> under the hood, but is hard-coded to "do the right thing" in a typical case.</p><h3 id=section-Parameters>Parameters</h3><dl><dt><a id=df>df</a> : DataFrame</dt><dd><p>The wide-format DataFrame.</p></dd><dt><a id=stubnames>stubnames</a> : str or list-like</dt><dd><p>The stub name(s). The wide format variables are assumed to start with the stub names.</p></dd><dt><a id=i>i</a> : str or list-like</dt><dd><p>Column(s) to use as id variable(s).</p></dd><dt><a id=j>j</a> : str</dt><dd><p>The name of the sub-observation variable. What you wish to name your suffix in the long format.</p></dd><dt><a id=sep>sep</a> : str, default ""</dt><dd><p>A character indicating the separation of the variable names in the wide format, to be stripped from the names in the long format. For example, if your column names are A-suffix1, A-suffix2, you can strip the hyphen by specifying <code>:None:None:`sep='-'`</code>.</p></dd><dt><a id=suffix>suffix</a> : str, default '\\d+'</dt><dd><p>A regular expression capturing the wanted suffixes. '\\d+' captures numeric suffixes. Suffixes with no numbers could be specified with the negated character class '\\D+'. You can also further disambiguate suffixes, for example, if your wide variables are of the form A-one, B-two,.., and you have an unrelated column A-rating, you can ignore the last one by specifying <code>:None:None:`suffix='(!?one|two)'`</code>. When all suffixes are numeric, they are cast to int64/float64.</p></dd></dl><h3 id=section-Returns>Returns</h3><dl><dt>DataFrame</dt><dd><p>A DataFrame that contains each stub name as a variable, with new index (i, j).</p></dd></dl><p>Unpivot a DataFrame from wide to long format.</p><h3 id=section-Examples>Examples</h3><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>seed</span><span>(</span><span class=mi>123</span><span>)</span><br><span class=nsl>... </span><span>df</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s2>"</span><span class=s2>A1970</span><span class=s2>"</span><span> </span><span>:</span><span> </span><span>{</span><span class=mi>0</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span class=mi>1</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>b</span><span class=s2>"</span><span>,</span><span> </span><span class=mi>2</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>c</span><span class=s2>"</span><span>}</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s2>"</span><span class=s2>A1980</span><span class=s2>"</span><span> </span><span>:</span><span> </span><span>{</span><span class=mi>0</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>d</span><span class=s2>"</span><span>,</span><span> </span><span class=mi>1</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>e</span><span class=s2>"</span><span>,</span><span> </span><span class=mi>2</span><span> </span><span>:</span><span> </span><span class=s2>"</span><span class=s2>f</span><span class=s2>"</span><span>}</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s2>"</span><span class=s2>B1970</span><span class=s2>"</span><span> </span><span>:</span><span> </span><span>{</span><span class=mi>0</span><span> </span><span>:</span><span> </span><span class=mf>2.5</span><span>,</span><span> </span><span class=mi>1</span><span> </span><span>:</span><span> </span><span class=mf>1.2</span><span>,</span><span> </span><span class=mi>2</span><span> </span><span>:</span><span> </span><span class=mf>.7</span><span>}</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s2>"</span><span class=s2>B1980</span><span class=s2>"</span><span> </span><span>:</span><span> </span><span>{</span><span class=mi>0</span><span> </span><span>:</span><span> </span><span class=mf>3.2</span><span>,</span><span> </span><span class=mi>1</span><span> </span><span>:</span><span> </span><span class=mf>1.3</span><span>,</span><span> </span><span class=mi>2</span><span> </span><span>:</span><span> </span><span class=mf>.1</span><span>}</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s2>"</span><span class=s2>X</span><span class=s2>"</span><span>     </span><span>:</span><span> </span><span class=nb>dict</span><span>(</span><span class=nb>zip</span><span>(</span><a class="foo nb"href=/p/pandas/1.4.1/api/pandas.core.indexes.range.html>range</a><span>(</span><span class=mi>3</span><span>)</span><span>,</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>randn</span><span>(</span><span class=mi>3</span><span>)</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>                  </span><span>}</span><span>)</span><br><span class=nsl>... </span><span>df</span><span>[</span><span class=s2>"</span><span class=s2>id</span><span class=s2>"</span><span>]</span><span> </span><span class=o>=</span><span> </span><span>df</span><span class=o>.</span><span>index</span><br><span class=nsl>... </span><span>df</span>
  A1970 A1980  B1970  B1980         X  id
0     a     d    2.5    3.2 -1.085631   0
1     b     e    1.2    1.3  0.997345   1
2     c     f    0.7    0.1  0.282978   2</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a><span>(</span><span>df</span><span>,</span><span> </span><span>[</span><span class=s2>"</span><span class=s2>A</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>B</span><span class=s2>"</span><span>]</span><span>,</span><span> </span><span>i</span><span class=o>=</span><span class=s2>"</span><span class=s2>id</span><span class=s2>"</span><span>,</span><span> </span><span>j</span><span class=o>=</span><span class=s2>"</span><span class=s2>year</span><span class=s2>"</span><span>)</span><br><span class=nsl>... </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
                X  A    B
id year
0  1970 -1.085631  a  2.5
1  1970  0.997345  b  1.2
2  1970  0.282978  c  0.7
0  1980 -1.085631  d  3.2
1  1980  0.997345  e  1.3
2  1980  0.282978  f  0.1</pre><p>With multiple id columns</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>df</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>famid</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>birth</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>ht1</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mf>2.8</span><span>,</span><span> </span><span class=mf>2.9</span><span>,</span><span> </span><span class=mf>2.2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mf>1.8</span><span>,</span><span> </span><span class=mf>1.9</span><span>,</span><span> </span><span class=mf>2.2</span><span>,</span><span> </span><span class=mf>2.3</span><span>,</span><span> </span><span class=mf>2.1</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>ht2</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mf>3.4</span><span>,</span><span> </span><span class=mf>3.8</span><span>,</span><span> </span><span class=mf>2.9</span><span>,</span><span> </span><span class=mf>3.2</span><span>,</span><span> </span><span class=mf>2.8</span><span>,</span><span> </span><span class=mf>2.4</span><span>,</span><span> </span><span class=mf>3.3</span><span>,</span><span> </span><span class=mf>3.4</span><span>,</span><span> </span><span class=mf>2.9</span><span>]</span><br><span class=nsl>... </span><span>}</span><span>)</span><br><span class=nsl>... </span><span>df</span>
   famid  birth  ht1  ht2
0      1      1  2.8  3.4
1      1      2  2.9  3.8
2      1      3  2.2  2.9
3      2      1  2.0  3.2
4      2      2  1.8  2.8
5      2      3  1.9  2.4
6      3      1  2.2  3.3
7      3      2  2.3  3.4
8      3      3  2.1  2.9</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>l</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a><span>(</span><span>df</span><span>,</span><span> </span><span>stubnames</span><span class=o>=</span><span class=s1>'</span><span class=s1>ht</span><span class=s1>'</span><span>,</span><span> </span><span>i</span><span class=o>=</span><span>[</span><span class=s1>'</span><span class=s1>famid</span><span class=s1>'</span><span>,</span><span> </span><span class=s1>'</span><span class=s1>birth</span><span class=s1>'</span><span>]</span><span>,</span><span> </span><span>j</span><span class=o>=</span><span class=s1>'</span><span class=s1>age</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span>l</span><br><span class=nsl>... </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
                  ht
famid birth age
1     1     1    2.8
            2    3.4
      2     1    2.9
            2    3.8
      3     1    2.2
            2    2.9
2     1     1    2.0
            2    3.2
      2     1    1.8
            2    2.8
      3     1    1.9
            2    2.4
3     1     1    2.2
            2    3.3
      2     1    2.3
            2    3.4
      3     1    2.1
            2    2.9</pre><p>Going from long back to wide just takes some creative use of <code>:None:None:`unstack`</code></p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>w</span><span> </span><span class=o>=</span><span> </span><span>l</span><span class=o>.</span><span>unstack</span><span>(</span><span>)</span><br><span class=nsl>... </span><span>w</span><span class=o>.</span><span>columns</span><span> </span><span class=o>=</span><span> </span><span>w</span><span class=o>.</span><span>columns</span><span class=o>.</span><span>map</span><span>(</span><span class=s1>'</span><span class=si>{0[0]}</span><span class=si>{0[1]}</span><span class=s1>'</span><span class=o>.</span><span>format</span><span>)</span><br><span class=nsl>... </span><span>w</span><span class=o>.</span><span>reset_index</span><span>(</span><span>)</span>
   famid  birth  ht1  ht2
0      1      1  2.8  3.4
1      1      2  2.9  3.8
2      1      3  2.2  2.9
3      2      1  2.0  3.2
4      2      2  1.8  2.8
5      2      3  1.9  2.4
6      3      1  2.2  3.3
7      3      2  2.3  3.4
8      3      3  2.1  2.9</pre><p>Less wieldy column names are also handled</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>seed</span><span>(</span><span class=mi>0</span><span>)</span><br><span class=nsl>... </span><span>df</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s1>'</span><span class=s1>A(weekly)-2010</span><span class=s1>'</span><span>:</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>rand</span><span>(</span><span class=mi>3</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s1>'</span><span class=s1>A(weekly)-2011</span><span class=s1>'</span><span>:</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>rand</span><span>(</span><span class=mi>3</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s1>'</span><span class=s1>B(weekly)-2010</span><span class=s1>'</span><span>:</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>rand</span><span>(</span><span class=mi>3</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s1>'</span><span class=s1>B(weekly)-2011</span><span class=s1>'</span><span>:</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>rand</span><span>(</span><span class=mi>3</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>                   </span><span class=s1>'</span><span class=s1>X</span><span class=s1>'</span><span> </span><span>:</span><span> </span><a class=foo href=/p/numpy/1.22.3/api/numpy.html>np</a><span class=o>.</span><a class=foo href=/p/numpy/1.22.3/api/numpy.random.html>random</a><span class=o>.</span><span>randint</span><span>(</span><span class=mi>3</span><span>,</span><span> </span><span>size</span><span class=o>=</span><span class=mi>3</span><span>)</span><span>}</span><span>)</span><br><span class=nsl>... </span><span>df</span><span>[</span><span class=s1>'</span><span class=s1>id</span><span class=s1>'</span><span>]</span><span> </span><span class=o>=</span><span> </span><span>df</span><span class=o>.</span><span>index</span><br><span class=nsl>... </span><span>df</span><span> </span><span class=c1># doctest: +NORMALIZE_WHITESPACE, +ELLIPSIS</span>
   A(weekly)-2010  A(weekly)-2011  B(weekly)-2010  B(weekly)-2011  X  id
0        0.548814        0.544883        0.437587        0.383442  0   0
1        0.715189        0.423655        0.891773        0.791725  1   1
2        0.602763        0.645894        0.963663        0.528895  1   2</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a><span>(</span><span>df</span><span>,</span><span> </span><span>[</span><span class=s1>'</span><span class=s1>A(weekly)</span><span class=s1>'</span><span>,</span><span> </span><span class=s1>'</span><span class=s1>B(weekly)</span><span class=s1>'</span><span>]</span><span>,</span><span> </span><span>i</span><span class=o>=</span><span class=s1>'</span><span class=s1>id</span><span class=s1>'</span><span>,</span><br><span class=nsl>... </span><span>                </span><span>j</span><span class=o>=</span><span class=s1>'</span><span class=s1>year</span><span class=s1>'</span><span>,</span><span> </span><a class=foo href=/p/pandas/1.4.1/api/pandas.io.formats.info.TableBuilderVerboseMixin.add_separator_line.html>sep</a><span class=o>=</span><span class=s1>'</span><span class=s1>-</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
         X  A(weekly)  B(weekly)
id year
0  2010  0   0.548814   0.437587
1  2010  1   0.715189   0.891773
2  2010  1   0.602763   0.963663
0  2011  0   0.544883   0.383442
1  2011  1   0.423655   0.791725
2  2011  1   0.645894   0.528895</pre><p>If we have many columns, we could also use a regex to find our stubnames and pass that list on to wide_to_long</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>stubnames</span><span> </span><span class=o>=</span><span> </span><span class=nb>sorted</span><span>(</span><br><span class=nsl>... </span><span>    </span><span class=nb>set</span><span>(</span><span>[</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.match.html>match</a><span>[</span><span class=mi>0</span><span>]</span><span> </span><span class=k>for</span><span> </span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.match.html>match</a><span> </span><span class=ow>in</span><span> </span><span>df</span><span class=o>.</span><span>columns</span><span class=o>.</span><span>str</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.findall.html>findall</a><span>(</span><br><span class=nsl>... </span><span>        </span><span class=sa>r</span><span class=s1>'</span><span class=s1>[A-B]</span><span class=s1>\</span><span class=s1>(.*</span><span class=s1>\</span><span class=s1>)</span><span class=s1>'</span><span>)</span><span class=o>.</span><span>values</span><span> </span><span class=k>if</span><span> </span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.match.html>match</a><span> </span><span class=o>!=</span><span> </span><span>[</span><span>]</span><span>]</span><span>)</span><br><span class=nsl>... </span><span>)</span><br><span class=nsl>... </span><span class=nb>list</span><span>(</span><span>stubnames</span><span>)</span>
['A(weekly)', 'B(weekly)']</pre><p>All of the above examples have integers as suffixes. It is possible to have non-integers as suffixes.</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>df</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>famid</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>birth</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>ht_one</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mf>2.8</span><span>,</span><span> </span><span class=mf>2.9</span><span>,</span><span> </span><span class=mf>2.2</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mf>1.8</span><span>,</span><span> </span><span class=mf>1.9</span><span>,</span><span> </span><span class=mf>2.2</span><span>,</span><span> </span><span class=mf>2.3</span><span>,</span><span> </span><span class=mf>2.1</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>    </span><span class=s1>'</span><span class=s1>ht_two</span><span class=s1>'</span><span>:</span><span> </span><span>[</span><span class=mf>3.4</span><span>,</span><span> </span><span class=mf>3.8</span><span>,</span><span> </span><span class=mf>2.9</span><span>,</span><span> </span><span class=mf>3.2</span><span>,</span><span> </span><span class=mf>2.8</span><span>,</span><span> </span><span class=mf>2.4</span><span>,</span><span> </span><span class=mf>3.3</span><span>,</span><span> </span><span class=mf>3.4</span><span>,</span><span> </span><span class=mf>2.9</span><span>]</span><br><span class=nsl>... </span><span>}</span><span>)</span><br><span class=nsl>... </span><span>df</span>
   famid  birth  ht_one  ht_two
0      1      1     2.8     3.4
1      1      2     2.9     3.8
2      1      3     2.2     2.9
3      2      1     2.0     3.2
4      2      2     1.8     2.8
5      2      3     1.9     2.4
6      3      1     2.2     3.3
7      3      2     2.3     3.4
8      3      3     2.1     2.9</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>l</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html>wide_to_long</a><span>(</span><span>df</span><span>,</span><span> </span><span>stubnames</span><span class=o>=</span><span class=s1>'</span><span class=s1>ht</span><span class=s1>'</span><span>,</span><span> </span><span>i</span><span class=o>=</span><span>[</span><span class=s1>'</span><span class=s1>famid</span><span class=s1>'</span><span>,</span><span> </span><span class=s1>'</span><span class=s1>birth</span><span class=s1>'</span><span>]</span><span>,</span><span> </span><span>j</span><span class=o>=</span><span class=s1>'</span><span class=s1>age</span><span class=s1>'</span><span>,</span><br><span class=nsl>... </span><span>                    </span><a class=foo href=/p/pandas/1.4.1/api/pandas.io.formats.info.TableBuilderVerboseMixin.add_separator_line.html>sep</a><span class=o>=</span><span class=s1>'</span><span class=s1>_</span><span class=s1>'</span><span>,</span><span> </span><span>suffix</span><span class=o>=</span><span class=sa>r</span><span class=s1>'</span><span class=s1>\</span><span class=s1>w+</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span>l</span><br><span class=nsl>... </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
                  ht
famid birth age
1     1     one  2.8
            two  3.4
      2     one  2.9
            two  3.8
      3     one  2.2
            two  2.9
2     1     one  2.0
            two  3.2
      2     one  1.8
            two  2.8
      3     one  1.9
            two  2.4
3     1     one  2.2
            two  3.3
      2     one  2.3
            two  3.4
      3     one  2.1
            two  2.9</pre> See : <h3 id=section-backrefs>Back References</h3><p>The following pages refer to to this document either explicitly or contain code examples using this.</p><code><a class=exists href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.wide_to_long.html link>pandas.core.reshape.melt.wide_to_long</a></code><h3>Local connectivity graph</h3><p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p><p>Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows or text (beyond on hover)</p><canvas class=graph height=500 width=800></canvas><p>SVG is more flexible but power hungry; and does not scale well to 50 + nodes.</p><svg class=graph height=500 width=600></svg><p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted (or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library they belong to, and scaled with the number of references pointing them</p><hr> File: /pandas/core/reshape/melt.py#258 <br> type: &LTclass 'function'> <br> Commit: <br><script src=https://d3js.org/d3.v4.min.js></script><script src=https://d3js.org/d3-selection-multi.v1.js></script><style>.node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };</style><script>window._data_graph={nodes:[{id:1,val:9.414213562373096,label:"pandas.core.strings.accessor.StringMethods.findall",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.findall"},{id:3,val:13.099019513592784,label:"pandas.core.indexes.range",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.indexes.range"},{id:4,val:10.64575131106459,label:"pandas.io.formats.info.TableBuilderVerboseMixin.add_separator_line",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.io.formats.info.TableBuilderVerboseMixin.add_separator_line"},{id:5,val:23.13274595042156,label:"pandas.core.frame.DataFrame",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.frame.DataFrame"},{id:6,val:9.414213562373096,label:"pandas.core.strings.accessor.StringMethods.match",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.strings.accessor.StringMethods.match"},{id:7,val:9,label:"pandas.core.reshape.melt.melt",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.reshape.melt.melt"},{id:8,val:44,label:"numpy",mod:"numpy",url:"/p/numpy/1.22.3/api/numpy"},{id:9,val:19.269427669584644,label:"numpy.random",mod:"numpy",url:"/p/numpy/1.22.3/api/numpy.random"}],links:[{source:8,target:5,id:1064},{source:5,target:7,id:1454}]};</script><script src=/graph_canvas.js></script><script src=/graph_svg.js></script></div></body></html>