<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Document</title><link href=https://fonts.xz.style/serve/inter.css rel=stylesheet><link crossorigin=anonymous href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css rel=stylesheet><script type=text/x-mathjax-config>
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script><script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js></script><link href=/papyri.css rel=stylesheet><style>header > brand, header>:first-child {
        border-right: 1px solid #ccc;
        border-left: 1px solid #ccc;
        padding: 16px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        display: inline-block; 
        width: 167px;
    }
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */</style></head><body class=tex2jax_ignore><header><brand><i class="fab fa-python"></i><a href=/>Home</a></brand><nav>/ <a href=/>p</a>  /  <div class=dropdown><a href=pandas>pandas</a> /  <div class=dropdown-content><a href=/p/IPython/8.2.0.dev/api/IPython.html>IPython</a><a href=/p/astropy/5.0/api/astropy.html>astropy</a><a href=/p/dask/2021.10.0/api/dask.html>dask</a><a href=/p/distributed/2021.10.0/api/distributed.html>distributed</a><a href=/p/matplotlib/3.5.1/api/matplotlib.html>matplotlib</a><a href=/p/networkx/2.7.2rc1.dev0/api/networkx.html>networkx</a><a href=/p/numpy/1.22.3/api/numpy.html>numpy</a><a href=/p/pandas/1.4.1/api/pandas.html>pandas</a><a href=/p/papyri/0.0.8/api/papyri.html>papyri</a><a href=/p/scipy/1.8.0/api/scipy.html>scipy</a><a href=/p/skimage/0.17.2/api/skimage.html>skimage</a></div></div><div class=dropdown><a href=/p/pandas/1.4.1/api/pandas.html>1.4.1</a> /  <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.html>1.4.1</a></div></div><div class=dropdown><a href=/p/pandas/1.4.1/api/pandas.html>api</a> /  <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.html>API</a><a href=/p/pandas/1.4.1/gallery>Gallery</a><a href=/p/pandas/1.4.1/examples>Examples</a></div></div><div class=dropdown><a class=dropbtn href=pandas.html>pandas</a>.</div><div class=dropdown><a class=dropbtn href=pandas.core.html>core</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.__dir__.html>__dir__</a><a href=/p/pandas/1.4.1/api/pandas.__getattr__.html>__getattr__</a><a href=/p/pandas/1.4.1/api/pandas._config.html>_config</a><a href=/p/pandas/1.4.1/api/pandas._libs.html>_libs</a><a href=/p/pandas/1.4.1/api/pandas._testing.html>_testing</a><a href=/p/pandas/1.4.1/api/pandas._typing.html>_typing</a><a href=/p/pandas/1.4.1/api/pandas._version.html>_version</a><a href=/p/pandas/1.4.1/api/pandas.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.arrays.html>arrays</a><a href=/p/pandas/1.4.1/api/pandas.compat.html>compat</a><a href=/p/pandas/1.4.1/api/pandas.core.html>core</a><a href=/p/pandas/1.4.1/api/pandas.errors.html>errors</a><a href=/p/pandas/1.4.1/api/pandas.io.html>io</a><a href=/p/pandas/1.4.1/api/pandas.plotting.html>plotting</a><a href=/p/pandas/1.4.1/api/pandas.testing.html>testing</a><a href=/p/pandas/1.4.1/api/pandas.tseries.html>tseries</a><a href=/p/pandas/1.4.1/api/pandas.util.html>util</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.html>reshape</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core._numba.html>_numba</a><a href=/p/pandas/1.4.1/api/pandas.core.accessor.html>accessor</a><a href=/p/pandas/1.4.1/api/pandas.core.algorithms.html>algorithms</a><a href=/p/pandas/1.4.1/api/pandas.core.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.core.apply.html>apply</a><a href=/p/pandas/1.4.1/api/pandas.core.array_algos.html>array_algos</a><a href=/p/pandas/1.4.1/api/pandas.core.arraylike.html>arraylike</a><a href=/p/pandas/1.4.1/api/pandas.core.arrays.html>arrays</a><a href=/p/pandas/1.4.1/api/pandas.core.base.html>base</a><a href=/p/pandas/1.4.1/api/pandas.core.common.html>common</a><a href=/p/pandas/1.4.1/api/pandas.core.computation.html>computation</a><a href=/p/pandas/1.4.1/api/pandas.core.config_init.html>config_init</a><a href=/p/pandas/1.4.1/api/pandas.core.construction.html>construction</a><a href=/p/pandas/1.4.1/api/pandas.core.describe.html>describe</a><a href=/p/pandas/1.4.1/api/pandas.core.dtypes.html>dtypes</a><a href=/p/pandas/1.4.1/api/pandas.core.flags.html>flags</a><a href=/p/pandas/1.4.1/api/pandas.core.frame.html>frame</a><a href=/p/pandas/1.4.1/api/pandas.core.generic.html>generic</a><a href=/p/pandas/1.4.1/api/pandas.core.groupby.html>groupby</a><a href=/p/pandas/1.4.1/api/pandas.core.indexers.html>indexers</a><a href=/p/pandas/1.4.1/api/pandas.core.indexes.html>indexes</a><a href=/p/pandas/1.4.1/api/pandas.core.indexing.html>indexing</a><a href=/p/pandas/1.4.1/api/pandas.core.internals.html>internals</a><a href=/p/pandas/1.4.1/api/pandas.core.missing.html>missing</a><a href=/p/pandas/1.4.1/api/pandas.core.nanops.html>nanops</a><a href=/p/pandas/1.4.1/api/pandas.core.ops.html>ops</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.html>reshape</a><a href=/p/pandas/1.4.1/api/pandas.core.roperator.html>roperator</a><a href=/p/pandas/1.4.1/api/pandas.core.sample.html>sample</a><a href=/p/pandas/1.4.1/api/pandas.core.series.html>series</a><a href=/p/pandas/1.4.1/api/pandas.core.shared_docs.html>shared_docs</a><a href=/p/pandas/1.4.1/api/pandas.core.sorting.html>sorting</a><a href=/p/pandas/1.4.1/api/pandas.core.strings.html>strings</a><a href=/p/pandas/1.4.1/api/pandas.core.tools.html>tools</a><a href=/p/pandas/1.4.1/api/pandas.core.util.html>util</a><a href=/p/pandas/1.4.1/api/pandas.core.window.html>window</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.merge.html>merge</a>. <div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core.reshape.api.html>api</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.concat.html>concat</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.melt.html>melt</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.html>merge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.pivot.html>pivot</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.reshape.html>reshape</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.tile.html>tile</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.util.html>util</a></div></div><div class=dropdown><a class=dropbtn href=pandas.core.reshape.merge.merge_asof.html>merge_asof</a><div class=dropdown-content><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._AsOfMerge.html>_AsOfMerge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._MergeOperation.html>_MergeOperation</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._OrderedMerge.html>_OrderedMerge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._any.html>_any</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._asof_by_function.html>_asof_by_function</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._asof_function.html>_asof_function</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._factorize_keys.html>_factorize_keys</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._get_cython_type_upcast.html>_get_cython_type_upcast</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._get_join_keys.html>_get_join_keys</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._get_multiindex_indexer.html>_get_multiindex_indexer</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._get_single_indexer.html>_get_single_indexer</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._groupby_and_merge.html>_groupby_and_merge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._items_overlap_with_suffix.html>_items_overlap_with_suffix</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._left_join_on_index.html>_left_join_on_index</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._should_fill.html>_should_fill</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._sort_labels.html>_sort_labels</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge._validate_operand.html>_validate_operand</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.get_join_indexers.html>get_join_indexers</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge.html>merge</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_ordered.html>merge_ordered</a><a href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.restore_dropped_levels_multijoin.html>restore_dropped_levels_multijoin</a></div></div></nav></header><div class=container><div class=sidenav><img src=/p/pandas/1.4.1/img/logo.png><a href=#>pandas</a><a href=#>1.4.1</a><hr><hr><a href=#section-Parameters>Parameters</a><a href=#section-Returns>Returns</a><a href=#section-backrefs>BackRef</a></div><code class=signature>merge_asof(left: 'DataFrame | Series', right: 'DataFrame | Series', on: 'IndexLabel | None' = None, left_on: 'IndexLabel | None' = None, right_on: 'IndexLabel | None' = None, left_index: 'bool' = False, right_index: 'bool' = False, by=None, left_by=None, right_by=None, suffixes: 'Suffixes' = ('_x', '_y'), tolerance=None, allow_exact_matches: 'bool' = True, direction: 'str' = 'backward') -> 'DataFrame'</code><p>This is similar to a left-join except that we match on nearest key rather than equal keys. Both DataFrames must be sorted by the key.</p><p>For each row in the left DataFrame:</p><pre>- A "backward" search selects the last row in the right DataFrame whose
  'on' key is less than or equal to the left's key.

- A "forward" search selects the first row in the right DataFrame whose
  'on' key is greater than or equal to the left's key.

- A "nearest" search selects the row in the right DataFrame whose 'on'
  key is closest in absolute distance to the left's key.
</pre><p>The default is "backward" and is compatible in versions below 0.20.0. The direction parameter was added in version 0.20.0 and introduces "forward" and "nearest".</p><p>Optionally match on equivalent keys with 'by' before searching with 'on'.</p><h3 id=section-Parameters>Parameters</h3><dl><dt><a id=left>left</a> : DataFrame or named Series</dt><dd></dd><dt><a id=right>right</a> : DataFrame or named Series</dt><dd></dd><dt><a id=on>on</a> : label</dt><dd><p>Field name to join on. Must be found in both DataFrames. The data MUST be ordered. Furthermore this must be a numeric column, such as datetimelike, integer, or float. On or left_on/right_on must be given.</p></dd><dt><a id=left_on>left_on</a> : label</dt><dd><p>Field name to join on in left DataFrame.</p></dd><dt><a id=right_on>right_on</a> : label</dt><dd><p>Field name to join on in right DataFrame.</p></dd><dt><a id=left_index>left_index</a> : bool</dt><dd><p>Use the index of the left DataFrame as the join key.</p></dd><dt><a id=right_index>right_index</a> : bool</dt><dd><p>Use the index of the right DataFrame as the join key.</p></dd><dt><a id=by>by</a> : column name or list of column names</dt><dd><p>Match on these columns before performing merge operation.</p></dd><dt><a id=left_by>left_by</a> : column name</dt><dd><p>Field names to match on in the left DataFrame.</p></dd><dt><a id=right_by>right_by</a> : column name</dt><dd><p>Field names to match on in the right DataFrame.</p></dd><dt><a id=suffixes>suffixes</a> : 2-length sequence (tuple, list, ...)</dt><dd><p>Suffix to apply to overlapping column names in the left and right side, respectively.</p></dd><dt><a id=tolerance>tolerance</a> : int or Timedelta, optional, default None</dt><dd><p>Select asof tolerance within this range; must be compatible with the merge index.</p></dd><dt><a id=allow_exact_matches>allow_exact_matches</a> : bool, default True</dt><dd><ul><li><p>If True, allow matching with the same 'on' value (i.e. less-than-or-equal-to / greater-than-or-equal-to)</p></li><li><p>If False, don't match the same 'on' value (i.e., strictly less-than / strictly greater-than).</p></li></ul></dd><dt><a id=direction>direction</a> : 'backward' (default), 'forward', or 'nearest'</dt><dd><p>Whether to search for prior, subsequent, or closest matches.</p></dd></dl><h3 id=section-Returns>Returns</h3><dl><dt><a id=merged>merged</a> : DataFrame</dt><dd></dd></dl><p>Perform a merge by key distance.</p><h3 id=section-Examples>Examples</h3><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>left</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>5</span><span>,</span><span> </span><span class=mi>10</span><span>]</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>left_val</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>b</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>c</span><span class=s2>"</span><span>]</span><span>}</span><span>)</span><br><span class=nsl>... </span><span>left</span>
    a left_val
0   1        a
1   5        b
2  10        c</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>right</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>6</span><span>,</span><span> </span><span class=mi>7</span><span>]</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>right_val</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>6</span><span>,</span><span> </span><span class=mi>7</span><span>]</span><span>}</span><span>)</span><br><span class=nsl>... </span><span>right</span>
   a  right_val
0  1          1
1  2          2
2  3          3
3  6          6
4  7          7</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>left</span><span>,</span><span> </span><span>right</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>)</span>
    a left_val  right_val
0   1        a          1
1   5        b          3
2  10        c          7</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>left</span><span>,</span><span> </span><span>right</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span>allow_exact_matches</span><span class=o>=</span><span class=kc>False</span><span>)</span>
    a left_val  right_val
0   1        a        NaN
1   5        b        3.0
2  10        c        7.0</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>left</span><span>,</span><span> </span><span>right</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span>direction</span><span class=o>=</span><span class=s2>"</span><span class=s2>forward</span><span class=s2>"</span><span>)</span>
    a left_val  right_val
0   1        a        1.0
1   5        b        6.0
2  10        c        NaN</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>left</span><span>,</span><span> </span><span>right</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span>direction</span><span class=o>=</span><span class=s2>"</span><span class=s2>nearest</span><span class=s2>"</span><span>)</span>
    a left_val  right_val
0   1        a          1
1   5        b          6
2  10        c          7</pre><p>We can use indexed DataFrames as well.</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>left</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s2>"</span><span class=s2>left_val</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=s2>"</span><span class=s2>a</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>b</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>c</span><span class=s2>"</span><span>]</span><span>}</span><span>,</span><span> </span><span>index</span><span class=o>=</span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>5</span><span>,</span><span> </span><span class=mi>10</span><span>]</span><span>)</span><br><span class=nsl>... </span><span>left</span>
   left_val
1         a
5         b
10        c</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>right</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><span>{</span><span class=s2>"</span><span class=s2>right_val</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>6</span><span>,</span><span> </span><span class=mi>7</span><span>]</span><span>}</span><span>,</span><span> </span><span>index</span><span class=o>=</span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>6</span><span>,</span><span> </span><span class=mi>7</span><span>]</span><span>)</span><br><span class=nsl>... </span><span>right</span>
   right_val
1          1
2          2
3          3
6          6
7          7</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>left</span><span>,</span><span> </span><span>right</span><span>,</span><span> </span><span>left_index</span><span class=o>=</span><span class=kc>True</span><span>,</span><span> </span><span>right_index</span><span class=o>=</span><span class=kc>True</span><span>)</span>
   left_val  right_val
1         a          1
5         b          3
10        c          7</pre><p>Here is a real-world times-series example</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>quotes</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><br><span class=nsl>... </span><span>    </span><span>{</span><br><span class=nsl>... </span><span>        </span><span class=s2>"</span><span class=s2>time</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.023</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.023</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.030</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.041</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.048</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.049</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.072</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>            </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.075</span><span class=s2>"</span><span>)</span><br><span class=nsl>... </span><span>        </span><span>]</span><span>,</span><br><span class=nsl>... </span><span>        </span><span class=s2>"</span><span class=s2>ticker</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>GOOG</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>GOOG</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>AAPL</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>GOOG</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>               </span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><br><span class=nsl>... </span><span>           </span><span>]</span><span>,</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><a class="foo s2"href=/p/pandas/1.4.1/api/pandas.core.strings.accessor.forbid_nonstring_types.html>bid</a><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mf>720.50</span><span>,</span><span> </span><span class=mf>51.95</span><span>,</span><span> </span><span class=mf>51.97</span><span>,</span><span> </span><span class=mf>51.99</span><span>,</span><span> </span><span class=mf>720.50</span><span>,</span><span> </span><span class=mf>97.99</span><span>,</span><span> </span><span class=mf>720.50</span><span>,</span><span> </span><span class=mf>52.01</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><span class=s2>ask</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mf>720.93</span><span>,</span><span> </span><span class=mf>51.96</span><span>,</span><span> </span><span class=mf>51.98</span><span>,</span><span> </span><span class=mf>52.00</span><span>,</span><span> </span><span class=mf>720.93</span><span>,</span><span> </span><span class=mf>98.01</span><span>,</span><span> </span><span class=mf>720.88</span><span>,</span><span> </span><span class=mf>52.03</span><span>]</span><br><span class=nsl>... </span><span>    </span><span>}</span><br><span class=nsl>... </span><span>)</span><br><span class=nsl>... </span><span>quotes</span>
                     time ticker     bid     ask
0 2016-05-25 13:30:00.023   GOOG  720.50  720.93
1 2016-05-25 13:30:00.023   MSFT   51.95   51.96
2 2016-05-25 13:30:00.030   MSFT   51.97   51.98
3 2016-05-25 13:30:00.041   MSFT   51.99   52.00
4 2016-05-25 13:30:00.048   GOOG  720.50  720.93
5 2016-05-25 13:30:00.049   AAPL   97.99   98.01
6 2016-05-25 13:30:00.072   GOOG  720.50  720.88
7 2016-05-25 13:30:00.075   MSFT   52.01   52.03</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>trades</span><span> </span><span class=o>=</span><span> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.frame.DataFrame.html>DataFrame</a><span>(</span><br><span class=nsl>... </span><span>       </span><span>{</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><span class=s2>time</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><br><span class=nsl>... </span><span>               </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.023</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>               </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.038</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>               </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.048</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>               </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.048</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>               </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp.html>Timestamp</a><span>(</span><span class=s2>"</span><span class=s2>2016-05-25 13:30:00.048</span><span class=s2>"</span><span>)</span><br><span class=nsl>... </span><span>           </span><span>]</span><span>,</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><span class=s2>ticker</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>MSFT</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>GOOG</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>GOOG</span><span class=s2>"</span><span>,</span><span> </span><span class=s2>"</span><span class=s2>AAPL</span><span class=s2>"</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><span class=s2>price</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mf>51.95</span><span>,</span><span> </span><span class=mf>51.95</span><span>,</span><span> </span><span class=mf>720.77</span><span>,</span><span> </span><span class=mf>720.92</span><span>,</span><span> </span><span class=mf>98.0</span><span>]</span><span>,</span><br><span class=nsl>... </span><span>           </span><span class=s2>"</span><span class=s2>quantity</span><span class=s2>"</span><span>:</span><span> </span><span>[</span><span class=mi>75</span><span>,</span><span> </span><span class=mi>155</span><span>,</span><span> </span><span class=mi>100</span><span>,</span><span> </span><span class=mi>100</span><span>,</span><span> </span><span class=mi>100</span><span>]</span><br><span class=nsl>... </span><span>       </span><span>}</span><br><span class=nsl>... </span><span>   </span><span>)</span><br><span class=nsl>... </span><span>trades</span>
                     time ticker   price  quantity
0 2016-05-25 13:30:00.023   MSFT   51.95        75
1 2016-05-25 13:30:00.038   MSFT   51.95       155
2 2016-05-25 13:30:00.048   GOOG  720.77       100
3 2016-05-25 13:30:00.048   GOOG  720.92       100
4 2016-05-25 13:30:00.048   AAPL   98.00       100</pre><p>By default we are taking the asof of the quotes</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><span>trades</span><span>,</span><span> </span><span>quotes</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>time</span><span class=s2>"</span><span>,</span><span> </span><span>by</span><span class=o>=</span><span class=s2>"</span><span class=s2>ticker</span><span class=s2>"</span><span>)</span>
                     time ticker   price  quantity     bid     ask
0 2016-05-25 13:30:00.023   MSFT   51.95        75   51.95   51.96
1 2016-05-25 13:30:00.038   MSFT   51.95       155   51.97   51.98
2 2016-05-25 13:30:00.048   GOOG  720.77       100  720.50  720.93
3 2016-05-25 13:30:00.048   GOOG  720.92       100  720.50  720.93
4 2016-05-25 13:30:00.048   AAPL   98.00       100     NaN     NaN</pre><p>We only asof within 2ms between the quote time and the trade time</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><br><span class=nsl>... </span><span>    </span><span>trades</span><span>,</span><span> </span><span>quotes</span><span>,</span><span> </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>time</span><span class=s2>"</span><span>,</span><span> </span><span>by</span><span class=o>=</span><span class=s2>"</span><span class=s2>ticker</span><span class=s2>"</span><span>,</span><span> </span><span>tolerance</span><span class=o>=</span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timedeltas.Timedelta.html>Timedelta</a><span>(</span><span class=s2>"</span><span class=s2>2ms</span><span class=s2>"</span><span>)</span><br><span class=nsl>... </span><span>)</span>
                     time ticker   price  quantity     bid     ask
0 2016-05-25 13:30:00.023   MSFT   51.95        75   51.95   51.96
1 2016-05-25 13:30:00.038   MSFT   51.95       155     NaN     NaN
2 2016-05-25 13:30:00.048   GOOG  720.77       100  720.50  720.93
3 2016-05-25 13:30:00.048   GOOG  720.92       100  720.50  720.93
4 2016-05-25 13:30:00.048   AAPL   98.00       100     NaN     NaN</pre><p>We only asof within 10ms between the quote time and the trade time and we exclude exact matches on time. However <em>prior</em> data will propagate forward</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html>merge_asof</a><span>(</span><br><span class=nsl>... </span><span>    </span><span>trades</span><span>,</span><br><span class=nsl>... </span><span>    </span><span>quotes</span><span>,</span><br><span class=nsl>... </span><span>    </span><span>on</span><span class=o>=</span><span class=s2>"</span><span class=s2>time</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>    </span><span>by</span><span class=o>=</span><span class=s2>"</span><span class=s2>ticker</span><span class=s2>"</span><span>,</span><br><span class=nsl>... </span><span>    </span><span>tolerance</span><span class=o>=</span><span>pd</span><span class=o>.</span><a class=foo href=/p/pandas/1.4.1/api/pandas._libs.tslibs.timedeltas.Timedelta.html>Timedelta</a><span>(</span><span class=s2>"</span><span class=s2>10ms</span><span class=s2>"</span><span>)</span><span>,</span><br><span class=nsl>... </span><span>    </span><span>allow_exact_matches</span><span class=o>=</span><span class=kc>False</span><br><span class=nsl>... </span><span>)</span>
                     time ticker   price  quantity     bid     ask
0 2016-05-25 13:30:00.023   MSFT   51.95        75     NaN     NaN
1 2016-05-25 13:30:00.038   MSFT   51.95       155   51.97   51.98
2 2016-05-25 13:30:00.048   GOOG  720.77       100     NaN     NaN
3 2016-05-25 13:30:00.048   GOOG  720.92       100     NaN     NaN
4 2016-05-25 13:30:00.048   AAPL   98.00       100     NaN     NaN</pre> See : <h3 id=section-backrefs>Back References</h3><p>The following pages refer to to this document either explicitly or contain code examples using this.</p><code><a class=exists href=/p/pandas/1.4.1/api/pandas.core.reshape.merge.merge_asof.html link>pandas.core.reshape.merge.merge_asof</a></code><h3>Local connectivity graph</h3><p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p><p>Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows or text (beyond on hover)</p><canvas class=graph height=500 width=800></canvas><p>SVG is more flexible but power hungry; and does not scale well to 50 + nodes.</p><svg class=graph height=500 width=600></svg><p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted (or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library they belong to, and scaled with the number of references pointing them</p><hr> File: /pandas/core/reshape/merge.py#326 <br> type: &LTclass 'function'> <br> Commit: <br><script src=https://d3js.org/d3.v4.min.js></script><script src=https://d3js.org/d3-selection-multi.v1.js></script><style>.node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };</style><script>window._data_graph={nodes:[{id:2,val:23.13274595042156,label:"pandas.core.frame.DataFrame",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.frame.DataFrame"},{id:3,val:14.6332495807108,label:"pandas._libs.tslibs.timestamps.Timestamp",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas._libs.tslibs.timestamps.Timestamp"},{id:4,val:9,label:"pandas.core.strings.accessor.forbid_nonstring_types",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas.core.strings.accessor.forbid_nonstring_types"},{id:5,val:11,label:"pandas._libs.tslibs.timedeltas.Timedelta",mod:"pandas",url:"/p/pandas/1.4.1/api/pandas._libs.tslibs.timedeltas.Timedelta"}],links:[]};</script><script src=/graph_canvas.js></script><script src=/graph_svg.js></script></div></body></html>