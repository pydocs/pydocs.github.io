<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
<style>
body{
    font-family: 'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    color: #606c76;
    font-weight: 350;
    line-height: 1.6;
    max-width: 1000px;
    margin-left:0;

}
          .graph{border: 1px gray solid;}
          .foo:hover{text-decoration:underline}
          .foo{font-weight:bold; color:#4e4e4e}
          .exists{font-weight:bold; color:#4e4e4e;text-decoration:none;}
          .local{font-weight:bold; color:#1e6f04;text-decoration:none;}
          .exists:hover{text-decoration:underline;color:black}
          .missing,.missing:hover{color:darkred;text-decoration:none;font-weight:normal}
          .signature {font-size:100%; margin-bottom: 2rem; display: block; border:none; background-color: #FFFFFF;
              font-weight:600;}
          h1, h2, h3 {color: #4e4e4e; font-weight:400;
              margin-bottom: 1rem;border-bottom: 1px solid var(--nc-bg-3);
          }
          pre{border-radius:0;
              padding:0.6rem;
          border-left: 3px solid #AAA}
          dt {font-weight: 400;}

          header{
              box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
              
              padding-top:0rem;
              padding-bottom:0rem;
              z-index: 2;
              padding-left: 0;
              position: fixed;
              top: 30px;
              left:0; 
              width: 100%;
              height: 42px;
              backdrop-filter: blur(5px);
              background-color: rgba(255, 255, 255, .15);
          }
          dd::before {
            content: '';
          }
          header > brand, header>:first-child {
              border-right: 1px solid #ccc;
              border-left: 1px solid #ccc;
              padding: 16px;
              padding-top: 0.5rem;
              padding-bottom: 0.5rem;
              display: inline-block; 
              width: 167px;
              

          }
          brand > a {color:#606c76}
          brand > i {
              padding-right: 0.5rem;

        }
          nav{display:inline-block;
              padding: 10px;
              padding-left: 1rem;

          }

          dd {
              margin-left: 1rem;
              border-left:  solid #ddd;
              padding-left: 1rem;
          }
          summary > h2 { display: inline }

          .sidenav {
                height: 100%; /* Full-height: remove this if you want "auto" height */
                width: 200px; /* Set the width of the sidebar */
                position: fixed; /* Fixed Sidebar (stay in place on scroll) */
                z-index: 1; /* Stay on top */
                top: 0; /* Stay at the top */
                left: 0;
                background-color: var(--nc-bg-1);; /* Black */
                border-right: thin solid #ccc;
                overflow-x: hidden; /* Disable horizontal scroll */
                padding-top: 3rem;
 
                box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
                
          }

          .sidenav a {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            color: #818181;
            display: block;
          }
          .sidenav img {
              width: 160px;
              padding-left:20px;
              padding-right:20px;
              border-bottom: solid thin #DDD; 
              padding-bottom: .5rem;
              max-width: 100%;
          }
          .sidenav i {
              font-size: 100;
              padding-left: 3.5rem;
              padding-right: 3.5rem;
              padding-bottom: .5rem;
              border-bottom: solid thin #DDD; 

          }
          .container {
              padding-left: 210px;
              
              padding-top: 30px;

          }

          ::selection {
	/* Set background color for selected text */
                background: #59b4fd;
                color: var(--nc-ac-tx);
          }

          img {max-width: 40%;}

          pre.highlight.execed, .admonition {
            border-left: 3px solid #0070f3;
          }
          .admonition {
            padding-left: 1em;
          }
          .admonition > div {
            background-color: rgba(0, 123, 255, 0.1);
            position: relative;
            margin: 0 -1rem;
            padding: 0.4rem 0.1rem 0.4rem 1.5rem;
            font-weight: bold;
            text-transform: capitalize;
        }
          .note {color: #7d77d2}
          .warning {color: #af7b1a}
          .error {color: #f44336}
          pre.highlight.compiled {
            border-left: 3px solid #7d77d2;
          }
          pre.highlight.syntax_error, pre.highlight.exception_in_exec {
            border-left: 3px solid #f44336;
          }

        /* Dropdown Button */
/* The container <div> - needed to position the dropdown content */
.dropdown {
  position: relative;
  display: inline-block;
  margin-left: -4px;
}

nav  a {
    color: #606c76;
    text-decoration: none;

}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #ddd;}

/* Show the dropdown menu on hover */
.dropdown:hover .dropdown-content {display: block;
    max-height: 80vh;
    overflow: scroll;}

/* Change the background color of the dropdown button when the dropdown content is shown */
.dropdown:hover .dropbtn {}


pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */

.nsl {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}


.block_directive{

    border-left: thin solid var(--nc-lk-1);
    padding-bottom: 8px;
    padding-left: 12px;
}

.block_directive.head{

    border: thin solid var(--nc-lk-1);
}


.block_directive > p{
    margin-left: 2em;
    margin-top: 1em;
}
.head {
    font-family: monospace;
    color: var(--nc-lk-1);
}
</style>
</head>
<body class="tex2jax_ignore">
    <header>
            <brand><i class="fab fa-python"></i><a href='/'>Home</a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=dask>dask</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                            <a href="/p/IPython/8.0.0.dev/api/IPython.html">IPython</a>
                            <a href="/p/dask/2021.10.0/api/dask.html">dask</a>
                            <a href="/p/distributed/2021.01.1+9.g613b3c820/api/distributed.html">distributed</a>
                            <a href="/p/matplotlib/3.5.0/api/matplotlib.html">matplotlib</a>
                            <a href="/p/numpy/1.21.3/api/numpy.html">numpy</a>
                            <a href="/p/pandas/1.3.4/api/pandas.html">pandas</a>
                            <a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
                            <a href="/p/scipy/1.7.1/api/scipy.html">scipy</a>
                            <a href="/p/skimage/0.18.3/api/skimage.html">skimage</a>
                            <a href="/p/xarray/0.17.0/api/xarray.html">xarray</a>
                            
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/dask/2021.10.0/api/dask.html'>2021.10.0</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                            <a href="/p/dask/2021.10.0/api/dask.html">2021.10.0</a>
                            
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/dask/2021.10.0/api/dask.html'>api</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/dask/2021.10.0/api/dask.html">API</a>
                        <a href="/p/dask/2021.10.0/gallery">Gallery</a>
                     </div>
                </div>

            
                
                    <div class="dropdown">
                        
                            <a class="dropbtn" href='dask.html'>dask</a>.
                        
                        
                    </div>
                
                
                    <div class="dropdown">
                        
                            <a class="dropbtn" href='dask.array.html'>array</a>.
                        
                        
                            <div class="dropdown-content">
                            <a href="/p/dask/2021.10.0/api/dask._version.html">_version</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.html">array</a>
                            <a href="/p/dask/2021.10.0/api/dask.base.html">base</a>
                            <a href="/p/dask/2021.10.0/api/dask.blockwise.html">blockwise</a>
                            <a href="/p/dask/2021.10.0/api/dask.callbacks.html">callbacks</a>
                            <a href="/p/dask/2021.10.0/api/dask.compatibility.html">compatibility</a>
                            <a href="/p/dask/2021.10.0/api/dask.config.html">config</a>
                            <a href="/p/dask/2021.10.0/api/dask.context.html">context</a>
                            <a href="/p/dask/2021.10.0/api/dask.core.html">core</a>
                            <a href="/p/dask/2021.10.0/api/dask.datasets.html">datasets</a>
                            <a href="/p/?/?/api/dask.delayed.html">delayed</a>
                            <a href="/p/dask/2021.10.0/api/dask.hashing.html">hashing</a>
                            <a href="/p/dask/2021.10.0/api/dask.highlevelgraph.html">highlevelgraph</a>
                            <a href="/p/dask/2021.10.0/api/dask.layers.html">layers</a>
                            <a href="/p/dask/2021.10.0/api/dask.local.html">local</a>
                            <a href="/p/dask/2021.10.0/api/dask.multiprocessing.html">multiprocessing</a>
                            <a href="/p/dask/2021.10.0/api/dask.optimization.html">optimization</a>
                            <a href="/p/dask/2021.10.0/api/dask.order.html">order</a>
                            <a href="/p/dask/2021.10.0/api/dask.sizeof.html">sizeof</a>
                            <a href="/p/dask/2021.10.0/api/dask.system.html">system</a>
                            <a href="/p/dask/2021.10.0/api/dask.threaded.html">threaded</a>
                            <a href="/p/dask/2021.10.0/api/dask.utils.html">utils</a>
                            <a href="/p/dask/2021.10.0/api/dask.utils_test.html">utils_test</a>
                            <a href="/p/dask/2021.10.0/api/dask.widgets.html">widgets</a>
                            
                            </div>
                        
                    </div>
                
                
                    <div class="dropdown">
                        
                            <a class="dropbtn" href='dask.array.core.html'>core</a>.
                        
                        
                            <div class="dropdown-content">
                            <a href="/p/dask/2021.10.0/api/dask.array.backends.html">backends</a>
                            <a href="/p/?/?/api/dask.array.blockwise.html">blockwise</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.chunk.html">chunk</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.chunk_types.html">chunk_types</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.html">core</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.creation.html">creation</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.dispatch.html">dispatch</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.einsumfuncs.html">einsumfuncs</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.fft.html">fft</a>
                            <a href="/p/?/?/api/dask.array.gufunc.html">gufunc</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.lib.html">lib</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.linalg.html">linalg</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.ma.html">ma</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.numpy_compat.html">numpy_compat</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.optimization.html">optimization</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.overlap.html">overlap</a>
                            <a href="/p/?/?/api/dask.array.percentile.html">percentile</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.random.html">random</a>
                            <a href="/p/?/?/api/dask.array.rechunk.html">rechunk</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.reductions.html">reductions</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.routines.html">routines</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.slicing.html">slicing</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.tiledb_io.html">tiledb_io</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.ufunc.html">ufunc</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.utils.html">utils</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.wrap.html">wrap</a>
                            
                            </div>
                        
                    </div>
                
                
                    <div class="dropdown">
                        
                            <a class="dropbtn" href='dask.array.core.map_blocks.html'>map_blocks</a>
                        
                        
                            <div class="dropdown-content">
                            <a href="/p/dask/2021.10.0/api/dask.array.core.Array.html">Array</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.PerformanceWarning.html">PerformanceWarning</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._check_regular_chunks.html">_check_regular_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._compute_multiplier.html">_compute_multiplier</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._concatenate2.html">_concatenate2</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._enforce_dtype.html">_enforce_dtype</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._get_axis.html">_get_axis</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs.html">_pass_extra_kwargs</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._should_delegate.html">_should_delegate</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._vindex.html">_vindex</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._vindex_array.html">_vindex_array</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._vindex_merge.html">_vindex_merge</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._vindex_slice.html">_vindex_slice</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core._vindex_transpose.html">_vindex_transpose</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.apply_infer_dtype.html">apply_infer_dtype</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.asanyarray.html">asanyarray</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.asarray.html">asarray</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.auto_chunks.html">auto_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.block.html">block</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.blockdims_from_blockshape.html">blockdims_from_blockshape</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.broadcast_arrays.html">broadcast_arrays</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.broadcast_chunks.html">broadcast_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.broadcast_shapes.html">broadcast_shapes</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.broadcast_to.html">broadcast_to</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.check_if_handled_given_other.html">check_if_handled_given_other</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.chunks_from_arrays.html">chunks_from_arrays</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.common_blockdim.html">common_blockdim</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.concatenate.html">concatenate</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.concatenate3.html">concatenate3</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.concatenate_axes.html">concatenate_axes</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.deepfirst.html">deepfirst</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.dotmany.html">dotmany</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.elemwise.html">elemwise</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.from_array.html">from_array</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.from_delayed.html">from_delayed</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.from_func.html">from_func</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.from_npy_stack.html">from_npy_stack</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.from_zarr.html">from_zarr</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.getem.html">getem</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.getter_inline.html">getter_inline</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.getter_nofancy.html">getter_nofancy</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.handle_out.html">handle_out</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.implements.html">implements</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.insert_to_ooc.html">insert_to_ooc</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.interleave_none.html">interleave_none</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.is_scalar_for_elemwise.html">is_scalar_for_elemwise</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.keyname.html">keyname</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.load_store_chunk.html">load_store_chunk</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.new_da_object.html">new_da_object</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.normalize_arg.html">normalize_arg</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.normalize_chunks.html">normalize_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.offset_func.html">offset_func</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.retrieve_from_ooc.html">retrieve_from_ooc</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.round_to.html">round_to</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.shapelist.html">shapelist</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.slices_from_chunks.html">slices_from_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.stack.html">stack</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.store.html">store</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.to_hdf5.html">to_hdf5</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.to_npy_stack.html">to_npy_stack</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.to_zarr.html">to_zarr</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.transposelist.html">transposelist</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.unify_chunks.html">unify_chunks</a>
                            <a href="/p/dask/2021.10.0/api/dask.array.core.unpack_singleton.html">unpack_singleton</a>
                            
                            </div>
                        
                    </div>
                </nav>
    </header>
<div class='container'>
    <div class="sidenav">
    
        <img src="/p/dask/2021.10.0/img/logo.png"/>
    
    <a href="#">Library: dask</a>
    <a href="#">Version: 2021.10.0</a>
    <a href="#">Authors:</a>
    <a href="#">PyPI:</a>
    <a href="#">Source</a>
    <a href="#">Homepage</a>
    <a href="#">Fundings</a>
    <a href="#">Stars</a>
    <a href="#">Forks</a>
    <a href="#">Related</a>
    <hr/>
    <a>Narrative Docs</a>
    <hr/>
    <a href="#section-Parameters">Parameters</a>

    <a href="#section-backrefs">BackRef</a>
    

    </div>

    













    <code class='signature'>map_blocks(func, *args, name=None, token=None, dtype=None, chunks=None, drop_axis=[], new_axis=None, meta=None, **kwargs)</code>




    
    
        <!-- rendering Summary -->
        
           
               
        <p>Map a function across all blocks of a dask array.</p>

    
           
       
    


    
    
        <!-- rendering Extended Summary -->
        
           
               
        <p>Note that 
        <code class='verbatim'>map_blocks</code>
     will attempt to automatically determine the output array type by calling 
        <code class='verbatim'>func</code>
     on 0-d versions of the inputs. Please refer to the 
        <code class='verbatim'>meta</code>
     keyword argument below if you expect that the function will not succeed when operating on 0-d arrays.</p>

    
           
       
    


    
        <h3 id="section-Parameters">Parameters</h3>
    
    
       <dl>
           
            
                <dt><a id="func">func</a> : callable</dt>
            
        </dl>

        <dd>
            
                
        <p>Function to apply to every block in the array.</p>

    
            
        </dd>
       
            
                <dt><a id="args">args</a> : dask arrays or other objects</dt>
            
        </dl>

        <dd>
            
        </dd>
       
            
                <dt><a id="dtype">dtype</a> : np.dtype, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>The 
        <code class='verbatim'>dtype</code>
     of the output array. It is recommended to provide this. If not provided, will be inferred by applying the function to a small set of fake data.</p>

    
            
        </dd>
       
            
                <dt><a id="chunks">chunks</a> : tuple, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>Chunk shape of resulting blocks if the function does not preserve shape. If not provided, the resulting array is assumed to have the same block structure as the first input array.</p>

    
            
        </dd>
       
            
                <dt><a id="drop_axis">drop_axis</a> : number or iterable, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>Dimensions lost by the function.</p>

    
            
        </dd>
       
            
                <dt><a id="new_axis">new_axis</a> : number or iterable, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>New dimensions created by the function. Note that these are applied after 
        <code class='verbatim'>drop_axis</code>
     (if present).</p>

    
            
        </dd>
       
            
                <dt><a id="token">token</a> : string, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>The key prefix to use for the output array. If not provided, will be determined from the function name.</p>

    
            
        </dd>
       
            
                <dt><a id="name">name</a> : string, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>The key name to use for the output array. Note that this fully specifies the output key name, and must be unique. If not provided, will be determined by a hash of the arguments.</p>

    
            
        </dd>
       
            
                <dt><a id="meta">meta</a> : array-like, optional</dt>
            
        </dl>

        <dd>
            
                
        <p>The 
        <code class='verbatim'>meta</code>
     of the output array, when specified is expected to be an array of the same type and dtype of that returned when calling 
        <code class='verbatim'>.compute()</code>
     on the array returned by this function. When not provided, 
        <code class='verbatim'>meta</code>
     will be inferred by applying the function to a small set of fake data, usually a 0-d array. It&#39;s important to ensure that 
        <code class='verbatim'>func</code>
     can successfully complete computation without raising exceptions when 0-d is passed to it, providing 
        <code class='verbatim'>meta</code>
     will be required otherwise. If the output type is known beforehand (e.g., 
        <code class='verbatim'>np.ndarray</code>
    , 
        <code class='verbatim'>cupy.ndarray</code>
    ), an empty array of such type dtype can be passed, for example: 
        <code class='verbatim'>meta=np.array((), dtype=np.int32)</code>
    .</p>

    
            
        </dd>
       
            
                <dt><a id="**kwargs :">**kwargs :</a> : </dt>
            
        </dl>

        <dd>
            
                
        <p>Other keyword arguments to pass to function. Values must be constants (not dask.arrays)</p>

    
            
        </dd>
       

   </pre>
   


    
    
       <dl>
           

   </pre>
   


    
    
       <dl>
           

   </pre>
   


    
    
       
   


    
    
       <dl>
           

   </pre>
   


    
    
       <dl>
           

   </pre>
   


    
    
       <dl>
           

   </pre>
   


    
    
       <dl>
           

   </pre>
   


    
    
       
   


    
    
        <!-- rendering Notes -->
        
           
       
    


    
    
       
   



    <h3 id="section-Examples">Examples</h3>
        
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">import</span><span class=""> </span><a class="foo nn", href="/p/dask/2021.10.0/api/dask.html">dask</a><span class="nn">.</span><a class="foo nn", href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">da</span><br><span class='nsl'>...&nbsp;</span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">6</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">3</span><span class="">)</span>
</pre>
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([ 0,  2,  4,  6,  8, 10])</pre>
            
            
         
                
        <p>The 
        <code class='verbatim'>da.map_blocks</code>
     function can also accept multiple arrays.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">d</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">5</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">2</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">e</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">5</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">2</span><span class="">)</span>
</pre>
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.RandomState.f.html">f</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">a</span><span class="">,</span><span class=""> </span><span class="">b</span><span class="">:</span><span class=""> </span><span class="">a</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">b</span><span class="o">*</span><span class="o">*</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="">d</span><span class="">,</span><span class=""> </span><span class="">e</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.RandomState.f.html">f</a><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([ 0,  2,  6, 12, 20])</pre>
            
            
         
                
        <p>If the function changes shape of the blocks then you must provide chunks explicitly.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">x</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="">:</span><span class="">:</span><span class="mi">2</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="">(</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="">,</span><span class="">)</span><span class="">)</span>
</pre>
            
            
         
                
        <p>You have a bit of freedom in specifying chunks.  If all of the output chunk sizes are the same, you can provide just that chunk size as a single tuple.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">a</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">18</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">6</span><span class="">,</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">b</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">a</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="">:</span><span class="mi">3</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">3</span><span class="">,</span><span class="">)</span><span class="">)</span>
</pre>
            
            
         
                
        <p>If the function changes the dimension of the blocks you must specify the created or destroyed dimensions.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">b</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">a</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="kc">None</span><span class="">,</span><span class=""> </span><span class="">:</span><span class="">,</span><span class=""> </span><span class="kc">None</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">6</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">)</span><span class="">,</span><br><span class='nsl'>...&nbsp;</span><span class="">                 </span><span class="">new_axis</span><span class="o">=</span><span class="">[</span><a class="foo mi", href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">]</span><span class="">)</span>
</pre>
            
            
         
                
        <p>If 
        <code class='verbatim'>chunks</code>
     is specified but 
        <code class='verbatim'>new_axis</code>
     is not, then it is inferred to add the necessary number of axes on the left.</p>

    
            
            
         
                
        <p>Map_blocks aligns blocks by block positions without regard to shape. In the following example we have two arrays with the same number of blocks but with different shape and chunk sizes.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">1000</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">100</span><span class="">,</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="mi">100</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><a class="foo mi", href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">10</a><span class="">,</span><span class="">)</span><span class="">)</span>
</pre>
            
            
         
                
        <p>The relevant attribute to match is numblocks.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class="o">.</span><span class="">numblocks</span>
(10,)</pre>
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y</span><span class="o">.</span><span class="">numblocks</span>
(10,)</pre>
            
            
         
                
        <p>If these match (up to broadcasting rules) then we can map arbitrary functions across blocks</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">def</span><span class=""> </span><a class="foo nf", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">(</span><span class="">a</span><span class="">,</span><span class=""> </span><span class="">b</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">[</span><span class="">a</span><span class="o">.</span><span class="">max</span><span class="">(</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">b</span><span class="o">.</span><span class="">max</span><span class="">(</span><span class="">)</span><span class="">]</span><span class="">)</span>
</pre>
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">2</span><span class="">,</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">dtype</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">i8</span><span class="s1">&#39;</span><span class="">)</span>
dask.array&lt;func, shape=(20,), dtype=int64, chunksize=(2,), chunktype=numpy.ndarray&gt;</pre>
            
            
         
                <span class='error'>This example is valid syntax, but raise an exception at execution</span><pre class='highlight exception_in_exec'><span class='nsl'>&gt;&gt;&gt; </span><span class="">_</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([ 99,   9, 199,  19, 299,  29, 399,  39, 499,  49, 599,  59, 699,
        69, 799,  79, 899,  89, 999,  99])</pre>
            
            
         
                
        <p>Your block function get information about where it is in the array by accepting a special 
        <code class='verbatim'>block_info</code>
     or 
        <code class='verbatim'>block_id</code>
     keyword argument.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">def</span><span class=""> </span><a class="foo nf", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">(</span><span class="">block_info</span><span class="o">=</span><span class="kc">None</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><a class="foo k", href="/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs.html">pass</a>
</pre>
            
            
         
                
        <p>This will receive the following information:</p>

    
            
            
         
                <span class='error'>This example is valid syntax, but raise an exception at execution</span><pre class='highlight exception_in_exec'><span class='nsl'>&gt;&gt;&gt; </span><span class="">block_info</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
{0: {&#39;shape&#39;: (1000,),
     &#39;num-chunks&#39;: (10,),
     &#39;chunk-location&#39;: (4,),
     &#39;array-location&#39;: [(400, 500)]},
 None: {&#39;shape&#39;: (1000,),
        &#39;num-chunks&#39;: (10,),
        &#39;chunk-location&#39;: (4,),
        &#39;array-location&#39;: [(400, 500)],
        &#39;chunk-shape&#39;: (100,),
        &#39;dtype&#39;: dtype(&#39;float64&#39;)}}</pre>
            
            
         
                
        <p>For each argument and keyword arguments that are dask arrays (the positions of which are the first index), you will receive the shape of the full array, the number of chunks of the full array in each dimension, the chunk location (for example the fourth chunk over in the first dimension), and the array location (for example the slice corresponding to 
        <code class='verbatim'>40:50</code>
    ). The same information is provided for the output, with the key 
        <code class='verbatim'>None</code>
    , plus the shape and dtype that should be returned.</p>

    
            
            
         
                
        <p>These features can be combined to synthesize an array from scratch, for example:</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">def</span><span class=""> </span><a class="foo nf", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">(</span><span class="">block_info</span><span class="o">=</span><span class="kc">None</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">loc</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">block_info</span><span class="">[</span><span class="kc">None</span><span class="">]</span><span class="">[</span><span class="s1">&#39;</span><span class="s1">array-location</span><span class="s1">&#39;</span><span class="">]</span><span class="">[</span><a class="foo mi", href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.creation.arange.html">arange</a><span class="">(</span><span class="">loc</span><span class="">[</span><a class="foo mi", href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">]</span><span class="">,</span><span class=""> </span><span class="">loc</span><span class="">[</span><span class="mi">1</span><span class="">]</span><span class="">)</span>
</pre>
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="">(</span><span class="mi">4</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="">,</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">dtype</span><span class="o">=</span><span class="">np</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.ufunc.float_power.html">float_</a><span class="">)</span>
dask.array&lt;func, shape=(8,), dtype=float64, chunksize=(4,), chunktype=numpy.ndarray&gt;</pre>
            
            
         
                <span class='error'>This example is valid syntax, but raise an exception at execution</span><pre class='highlight exception_in_exec'><span class='nsl'>&gt;&gt;&gt; </span><span class="">_</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([0, 1, 2, 3, 4, 5, 6, 7])</pre>
            
            
         
                
        <p>
        <code class='verbatim'>block_id</code>
     is similar to 
        <code class='verbatim'>block_info</code>
     but contains only the 
        <code class='verbatim'>chunk_location</code>
    :</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="k">def</span><span class=""> </span><a class="foo nf", href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">(</span><span class="">block_id</span><span class="o">=</span><span class="kc">None</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><a class="foo k", href="/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs.html">pass</a>
</pre>
            
            
         
                
        <p>This will receive the following information:</p>

    
            
            
         
                <span class='error'>This example is valid syntax, but raise an exception at execution</span><pre class='highlight exception_in_exec'><span class='nsl'>&gt;&gt;&gt; </span><span class="">block_id</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
(4, 3)</pre>
            
            
         
                
        <p>You may specify the key name prefix of the resulting task in the graph with the optional 
        <code class='verbatim'>token</code>
     keyword argument.</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="">name</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">increment</span><span class="s1">&#39;</span><span class="">)</span>
dask.array&lt;increment, shape=(1000,), dtype=int64, chunksize=(100,), chunktype=numpy.ndarray&gt;</pre>
            
            
         
                
        <p>For functions that may not handle 0-d arrays, it&#39;s also possible to specify 
        <code class='verbatim'>meta</code>
     with an empty array matching the type of the expected result. In the example below, 
        <code class='verbatim'>func</code>
     will result in an 
        <code class='verbatim'>IndexError</code>
     when computing 
        <code class='verbatim'>meta</code>
    :</p>

    
            
            
         
                <pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="mi">2</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.html">random</a><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.html">random</a><span class="">(</span><span class="mi">5</span><span class="">)</span><span class="">,</span><span class=""> </span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.utils.meta_from_array.html">meta</a><span class="o">=</span><span class="">np</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">(</span><span class="">)</span><span class="">)</span><span class="">)</span>
dask.array&lt;lambda, shape=(5,), dtype=float64, chunksize=(5,), chunktype=numpy.ndarray&gt;</pre>
            
            
         
                
        <p>Similarly, it&#39;s possible to specify a non-NumPy array to 
        <code class='verbatim'>meta</code>
    , and provide a 
        <code class='verbatim'>dtype</code>
    :</p>

    
            
            
         
                <span class='error'>This example is valid syntax, but raise an exception at execution</span><pre class='highlight exception_in_exec'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">import</span><span class=""> </span><span class="nn">cupy</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">rs</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.html">random</a><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.RandomState.html">RandomState</a><span class="">(</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.RandomState.html">RandomState</a><span class="o">=</span><span class="">cupy</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.html">random</a><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.RandomState.html">RandomState</a><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">dt</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">float32</span><br><span class='nsl'>...&nbsp;</span><span class="">da</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="mi">2</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">rs</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.random.html">random</a><span class="">(</span><span class="mi">5</span><span class="">,</span><span class=""> </span><span class="">dtype</span><span class="o">=</span><span class="">dt</span><span class="">)</span><span class="">,</span><span class=""> </span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.utils.meta_from_array.html">meta</a><span class="o">=</span><span class="">cupy</span><span class="o">.</span><a class="foo ", href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">(</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">dtype</span><span class="o">=</span><span class="">dt</span><span class="">)</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
dask.array&lt;lambda, shape=(5,), dtype=float32, chunksize=(5,), chunktype=cupy.ndarray&gt;</pre>
            
            
         
         See :
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html" class='exists'>dask.array.fft.fft_wrap.&lt;locals&gt;.func</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.ufunc.float_power.html" class='exists'>dask.array.ufunc.float_power</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.utils.meta_from_array.html" class='exists'>dask.array.utils.meta_from_array</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.random.RandomState.html" class='exists'>dask.array.random.RandomState</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html" class='exists'>dask.array.ufunc.log10</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs.html" class='exists'>dask.array.core._pass_extra_kwargs</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.random.RandomState.f.html" class='exists'>dask.array.random.RandomState.f</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.html" class='exists'>dask</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.creation.arange.html" class='exists'>dask.array.creation.arange</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.random.html" class='exists'>dask.array.random</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html" class='exists'>dask.array.core.map_blocks</a></code>
        
         
             <code><a link href="/p/dask/2021.10.0/api/dask.array.html" class='exists'>dask.array</a></code>
        
         
     
    


    <h3 id='section-backrefs'>Back References</h3>
    <p>The following pages refer to to this document either explicitly or contain code examples using this.</p>

    
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.core.Array.map_overlap.html" class='exists'>dask.array.core.Array.map_overlap</a></code>
        
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs.html" class='exists'>dask.array.core._pass_extra_kwargs</a></code>
        
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html" class='exists'>dask.array.core.map_blocks</a></code>
        
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.core.unify_chunks.html" class='exists'>dask.array.core.unify_chunks</a></code>
        
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html" class='exists'>dask.array.overlap.map_overlap</a></code>
        
    
        <code><a link href="/p/dask/2021.10.0/api/dask.array.routines.apply_along_axis.html" class='exists'>dask.array.routines.apply_along_axis</a></code>
        
    
    
    



<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>


<hr>

To Be Done: </br>

File: /dask/array/core.py </br>
Line: 459 </br>
type: &lt;class &#39;function&#39;&gt; </br>
Commit: </br>
Tag: </br>
Link to the right github gitalab repository, file and line (maybe range?)</br>
</div>


    
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
        <style type="text/css">
        .node {}

        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; }
    </style>
<script>

var canvas = document.querySelector("canvas"),
    context = canvas.getContext("2d"),
    width = canvas.width,
    height = canvas.height;
var searchRadius = 40;



var color = d3.scaleOrdinal()
    .range(d3.schemeCategory10);

var canvas_simulation = d3.forceSimulation()
    .force("charge", d3.forceManyBody().strength(-100))
    .force("link", d3.forceLink().distance(30).strength(0.1).iterations(1).id(function(d) { return d.id; }))
    .force("x", d3.forceX().strength(0.1))
    .force("y", d3.forceY().strength(0.2));


var canvas_graph = {"nodes": [{"id": 1, "val": 14.855654600401044, "label": "dask.array.random", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random"}, {"id": 2, "val": 9.0, "label": "dask.array.overlap.map_overlap", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.overlap.map_overlap"}, {"id": 3, "val": 19.6619037896906, "label": "dask.array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array"}, {"id": 4, "val": 10.449489742783179, "label": "dask.array.fft.fft_wrap.<locals>.func", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func"}, {"id": 5, "val": 12.123105625617661, "label": "dask.array.ufunc.float_power", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.ufunc.float_power"}, {"id": 6, "val": 20.884098726725128, "label": "dask.array.ufunc.log10", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.ufunc.log10"}, {"id": 7, "val": 10.23606797749979, "label": "dask.array.utils.meta_from_array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.utils.meta_from_array"}, {"id": 8, "val": 9.0, "label": "dask.array.core.unify_chunks", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.unify_chunks"}, {"id": 9, "val": 16.94427190999916, "label": "dask.array.creation.arange", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.creation.arange"}, {"id": 10, "val": 9.414213562373096, "label": "dask.array.routines.apply_along_axis", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.routines.apply_along_axis"}, {"id": 11, "val": 9.0, "label": "dask.array.core.Array.map_overlap", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.Array.map_overlap"}, {"id": 12, "val": 10.0, "label": "dask.array.core._pass_extra_kwargs", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs"}, {"id": 13, "val": 11.0, "label": "dask.array.random.RandomState.f", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random.RandomState.f"}, {"id": 15, "val": 15.348469228349535, "label": "dask", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask"}, {"id": 16, "val": 9.732050807568877, "label": "dask.array.random.RandomState", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random.RandomState"}], "links": [{"source": 4, "target": 11, "id": 15}, {"source": 4, "target": 12, "id": 16}, {"source": 4, "target": 2, "id": 18}, {"source": 7, "target": 11, "id": 38}, {"source": 7, "target": 2, "id": 42}, {"source": 6, "target": 11, "id": 49}, {"source": 6, "target": 8, "id": 58}, {"source": 6, "target": 4, "id": 65}, {"source": 6, "target": 2, "id": 80}, {"source": 6, "target": 16, "id": 83}, {"source": 6, "target": 13, "id": 86}, {"source": 6, "target": 10, "id": 125}, {"source": 15, "target": 11, "id": 228}, {"source": 15, "target": 8, "id": 240}, {"source": 15, "target": 2, "id": 245}, {"source": 15, "target": 16, "id": 247}, {"source": 9, "target": 11, "id": 280}, {"source": 9, "target": 2, "id": 299}, {"source": 1, "target": 16, "id": 364}, {"source": 1, "target": 13, "id": 368}, {"source": 3, "target": 11, "id": 416}, {"source": 3, "target": 8, "id": 432}, {"source": 3, "target": 2, "id": 446}, {"source": 3, "target": 16, "id": 448}, {"source": 3, "target": 10, "id": 474}, {"source": 3, "target": 5, "id": 517}]};

(function() {

  var pages = d3.nest()
      .key(function(d) { return d.mod; })
      .entries(canvas_graph.nodes)
      .sort(function(a, b) { return b.values.length - a.values.length; });

  var c = color.domain(pages.map(function(d) { return d.key; }));

    

  canvas_simulation
      .nodes(canvas_graph.nodes)
      .on("tick", ticked);

  canvas_simulation.force("link")
      .links(canvas_graph.links);

  d3.select(canvas)
      .on("mousemove", mousemoved)
      .call(d3.drag()
          .container(canvas)
          .subject(dragsubject)
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended));

  function ticked() {
    context.clearRect(0, 0, width, height);
    context.save();
    context.translate(width / 2, height / 2);

    context.beginPath();
    canvas_graph.links.forEach(drawLink);
    context.strokeStyle = "#aaa";
    context.stroke();
    var margin = 10; 
    
    pages.forEach(function(page) {
      context.beginPath();
      page.values.forEach(drawNode);
      context.fillStyle = color(page.key);
      context.fill();
    });

    context.restore();

  }

  function dragsubject() {
    return canvas_simulation.find(d3.event.x - width / 2, d3.event.y - height / 2, searchRadius);
  }

  function mousemoved() {
    var a = this.parentNode, m = d3.mouse(this), d = canvas_simulation.find(m[0] - width / 2, m[1] - height / 2, searchRadius);
    if (!d) return a.removeAttribute("href"), a.removeAttribute("title");
    //a.setAttribute("href", "http://bl.ocks.org/" + (d.user ? d.user + "/" : "") + d.id);
    a.setAttribute("title", d.label );
  }
})();

function dragstarted() {
  if (!d3.event.active) canvas_simulation.alphaTarget(0.3).restart();
  d3.event.subject.fx = d3.event.subject.x;
  d3.event.subject.fy = d3.event.subject.y;
}

function dragged() {
  d3.event.subject.fx = d3.event.x;
  d3.event.subject.fy = d3.event.y;
}

function dragended() {
  if (!d3.event.active) canvas_simulation.alphaTarget(0);
  d3.event.subject.fx = null;
  d3.event.subject.fy = null;
}

function drawLink(d) {
  context.moveTo(d.source.x, d.source.y);
  context.lineTo(d.target.x, d.target.y);
   //context.moveTo(d.x + 3, d.y);
  //context.arc((d.target.x*9+d.source.x)/10, (d.target.y*9+d.source.y)/10, 2, 0, 2 * Math.PI);
}

function drawNode(d) {
  context.moveTo(d.x + 5, d.y);
  context.arc(d.x, d.y, d.val, 0, 2 * Math.PI);
}

</script>
<script type="text/javascript">
    var colors = d3.scaleOrdinal(d3.schemeCategory10);

    var svg = d3.select("svg");
    var width = svg.attr("width");
    var height = svg.attr("height");
    var node;
    var link;

    // syle for arrow head in the svg...
    svg.append('defs').append('marker')
        .attrs({'id':'arrowhead',
            'viewBox':'-0 -5 10 10',
            'refX':13,
            'refY':0,
            'orient':'auto',
            'markerWidth':13,
            'markerHeight':13,
            'xoverflow':'visible'})
        .append('svg:path')
        .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
        .attr('fill', '#999')
        .style('stroke','none');


    var svg_simulation = d3.forceSimulation()
        .force("charge", d3.forceManyBody().strength(-100))
        .force("link", d3.forceLink().distance(80).strength(0.01).iterations(10).id(function(d) { return d.id; }))
        .force("x", d3.forceX(width/2).strength(0.04))
        .force("y", d3.forceY(height/2).strength(0.06));





    var svg_graph = {"nodes": [{"id": 1, "val": 14.855654600401044, "label": "dask.array.random", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random"}, {"id": 2, "val": 9.0, "label": "dask.array.overlap.map_overlap", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.overlap.map_overlap"}, {"id": 3, "val": 19.6619037896906, "label": "dask.array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array"}, {"id": 4, "val": 10.449489742783179, "label": "dask.array.fft.fft_wrap.<locals>.func", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func"}, {"id": 5, "val": 12.123105625617661, "label": "dask.array.ufunc.float_power", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.ufunc.float_power"}, {"id": 6, "val": 20.884098726725128, "label": "dask.array.ufunc.log10", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.ufunc.log10"}, {"id": 7, "val": 10.23606797749979, "label": "dask.array.utils.meta_from_array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.utils.meta_from_array"}, {"id": 8, "val": 9.0, "label": "dask.array.core.unify_chunks", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.unify_chunks"}, {"id": 9, "val": 16.94427190999916, "label": "dask.array.creation.arange", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.creation.arange"}, {"id": 10, "val": 9.414213562373096, "label": "dask.array.routines.apply_along_axis", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.routines.apply_along_axis"}, {"id": 11, "val": 9.0, "label": "dask.array.core.Array.map_overlap", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.Array.map_overlap"}, {"id": 12, "val": 10.0, "label": "dask.array.core._pass_extra_kwargs", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core._pass_extra_kwargs"}, {"id": 13, "val": 11.0, "label": "dask.array.random.RandomState.f", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random.RandomState.f"}, {"id": 15, "val": 15.348469228349535, "label": "dask", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask"}, {"id": 16, "val": 9.732050807568877, "label": "dask.array.random.RandomState", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.random.RandomState"}], "links": [{"source": 4, "target": 11, "id": 15}, {"source": 4, "target": 12, "id": 16}, {"source": 4, "target": 2, "id": 18}, {"source": 7, "target": 11, "id": 38}, {"source": 7, "target": 2, "id": 42}, {"source": 6, "target": 11, "id": 49}, {"source": 6, "target": 8, "id": 58}, {"source": 6, "target": 4, "id": 65}, {"source": 6, "target": 2, "id": 80}, {"source": 6, "target": 16, "id": 83}, {"source": 6, "target": 13, "id": 86}, {"source": 6, "target": 10, "id": 125}, {"source": 15, "target": 11, "id": 228}, {"source": 15, "target": 8, "id": 240}, {"source": 15, "target": 2, "id": 245}, {"source": 15, "target": 16, "id": 247}, {"source": 9, "target": 11, "id": 280}, {"source": 9, "target": 2, "id": 299}, {"source": 1, "target": 16, "id": 364}, {"source": 1, "target": 13, "id": 368}, {"source": 3, "target": 11, "id": 416}, {"source": 3, "target": 8, "id": 432}, {"source": 3, "target": 2, "id": 446}, {"source": 3, "target": 16, "id": 448}, {"source": 3, "target": 10, "id": 474}, {"source": 3, "target": 5, "id": 517}]};
    (function (error, graph) {
            if (error) throw error;
        graph.nodes.forEach(function(d) { d.x = width*Math.random(); d.y = height*Math.random()});
        update(graph.links, graph.nodes);
        })(null, svg_graph);

    var edgelabels;

    function update(links, nodes) {
        link = svg.selectAll(".link")
            .data(links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr('marker-end','url(#arrowhead)');

        //link.append("title")
        //    .text(function (d) {return d.type;});

        edgepaths = svg.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attrs({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none");

        edgelabels = svg.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
            .style("pointer-events", "none")
            .attrs({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 10,
                'fill': '#aaa'
            });

        edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
            .text(function (d) {return d.type});

        node = svg.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended)
            );

        node.append("a")
                .attr("xlink:href", function(node){return node.url})
            .append("circle")
                .attr("r", function(node){return node.val})
                .style("fill", function (d, i) {return colors(d.mod);})
                .style("stroke", "#FFF")

        node.append("title")
            .text(function (d) {return d.label;});

        node.append("text")
                //.attr("dx", function(node){return node.val+1})
                .attr("dy", +10)
                .attr("opacity", "0.5")
            .text(function (d) {arr = d.label.split('.'); return arr[arr.length-1]});

        svg_simulation
            .nodes(nodes)
            .on("tick", ticked);

        svg_simulation.force("link")
                .links(links)

    }

    function ticked() {
        link
            .attr("x1", function (d) {return d.source.x;})
            .attr("y1", function (d) {return d.source.y;})
            .attr("x2", function (d) {return d.target.x;})
            .attr("y2", function (d) {return d.target.y;});

        node
            .attr("transform", function (d) {return "translate(" + d.x + ", " + d.y + ")";});

        edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

        edgelabels.attr('transform', function (d) {
            if (d.target.x < d.source.x) {
                var bbox = this.getBBox();

                rx = bbox.x + bbox.width / 2;
                ry = bbox.y + bbox.height / 2;
                return 'rotate(180 ' + rx + ' ' + ry + ')';
            }
            else {
                return 'rotate(0)';
            }
        });
    }

    function dragstarted(d) {
        if (!d3.event.active) svg_simulation.alphaTarget(0.3).restart()
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }

    function dragended(d) {
        if (!d3.event.active) svg_simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
    }

</script>




</div>
</body>
</html>