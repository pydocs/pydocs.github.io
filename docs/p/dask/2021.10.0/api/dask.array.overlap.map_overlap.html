<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Document</title><link href=https://fonts.xz.style/serve/inter.css rel=stylesheet><link crossorigin=anonymous href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css rel=stylesheet><script type=text/x-mathjax-config>
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script><script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js></script><link href=/papyri.css rel=stylesheet><style>header > brand, header>:first-child {
        border-right: 1px solid #ccc;
        border-left: 1px solid #ccc;
        padding: 16px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        display: inline-block; 
        width: 167px;
    }
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */</style></head><body class=tex2jax_ignore><header><brand><i class="fab fa-python"></i><a href=/>Home</a></brand><nav>/ <a href=/>p</a>  /  <div class=dropdown><a href=dask>dask</a> /  <div class=dropdown-content><a href=/p/IPython/8.2.0.dev/api/IPython.html>IPython</a><a href=/p/astropy/5.0/api/astropy.html>astropy</a><a href=/p/dask/2021.10.0/api/dask.html>dask</a><a href=/p/distributed/2021.10.0/api/distributed.html>distributed</a><a href=/p/matplotlib/3.5.1/api/matplotlib.html>matplotlib</a><a href=/p/networkx/2.7.2rc1.dev0/api/networkx.html>networkx</a><a href=/p/numpy/1.22.3/api/numpy.html>numpy</a><a href=/p/pandas/1.4.1/api/pandas.html>pandas</a><a href=/p/papyri/0.0.8/api/papyri.html>papyri</a><a href=/p/scipy/1.8.0/api/scipy.html>scipy</a><a href=/p/skimage/0.17.2/api/skimage.html>skimage</a></div></div><div class=dropdown><a href=/p/dask/2021.10.0/api/dask.html>2021.10.0</a> /  <div class=dropdown-content><a href=/p/dask/2021.10.0/api/dask.html>2021.10.0</a></div></div><div class=dropdown><a href=/p/dask/2021.10.0/api/dask.html>api</a> /  <div class=dropdown-content><a href=/p/dask/2021.10.0/api/dask.html>API</a><a href=/p/dask/2021.10.0/gallery>Gallery</a><a href=/p/dask/2021.10.0/examples>Examples</a></div></div><div class=dropdown><a class=dropbtn href=dask.html>dask</a>.</div><div class=dropdown><a class=dropbtn href=dask.array.html>array</a>. <div class=dropdown-content><a href=/p/dask/2021.10.0/api/dask._version.html>_version</a><a href=/p/dask/2021.10.0/api/dask.array.html>array</a><a href=/p/dask/2021.10.0/api/dask.base.html>base</a><a href=/p/dask/2021.10.0/api/dask.blockwise.html>blockwise</a><a href=/p/dask/2021.10.0/api/dask.callbacks.html>callbacks</a><a href=/p/dask/2021.10.0/api/dask.compatibility.html>compatibility</a><a href=/p/dask/2021.10.0/api/dask.config.html>config</a><a href=/p/dask/2021.10.0/api/dask.context.html>context</a><a href=/p/dask/2021.10.0/api/dask.core.html>core</a><a href=/p/dask/2021.10.0/api/dask.datasets.html>datasets</a><a href=/p/?/?/api/dask.delayed.html>delayed</a><a href=/p/dask/2021.10.0/api/dask.hashing.html>hashing</a><a href=/p/dask/2021.10.0/api/dask.highlevelgraph.html>highlevelgraph</a><a href=/p/dask/2021.10.0/api/dask.layers.html>layers</a><a href=/p/dask/2021.10.0/api/dask.local.html>local</a><a href=/p/dask/2021.10.0/api/dask.multiprocessing.html>multiprocessing</a><a href=/p/dask/2021.10.0/api/dask.optimization.html>optimization</a><a href=/p/dask/2021.10.0/api/dask.order.html>order</a><a href=/p/dask/2021.10.0/api/dask.sizeof.html>sizeof</a><a href=/p/dask/2021.10.0/api/dask.system.html>system</a><a href=/p/dask/2021.10.0/api/dask.threaded.html>threaded</a><a href=/p/dask/2021.10.0/api/dask.utils.html>utils</a><a href=/p/dask/2021.10.0/api/dask.utils_test.html>utils_test</a><a href=/p/dask/2021.10.0/api/dask.widgets.html>widgets</a></div></div><div class=dropdown><a class=dropbtn href=dask.array.overlap.html>overlap</a>. <div class=dropdown-content><a href=/p/dask/2021.10.0/api/dask.array.backends.html>backends</a><a href=/p/?/?/api/dask.array.blockwise.html>blockwise</a><a href=/p/dask/2021.10.0/api/dask.array.chunk.html>chunk</a><a href=/p/dask/2021.10.0/api/dask.array.chunk_types.html>chunk_types</a><a href=/p/dask/2021.10.0/api/dask.array.core.html>core</a><a href=/p/dask/2021.10.0/api/dask.array.creation.html>creation</a><a href=/p/dask/2021.10.0/api/dask.array.dispatch.html>dispatch</a><a href=/p/dask/2021.10.0/api/dask.array.einsumfuncs.html>einsumfuncs</a><a href=/p/dask/2021.10.0/api/dask.array.fft.html>fft</a><a href=/p/?/?/api/dask.array.gufunc.html>gufunc</a><a href=/p/dask/2021.10.0/api/dask.array.lib.html>lib</a><a href=/p/dask/2021.10.0/api/dask.array.linalg.html>linalg</a><a href=/p/dask/2021.10.0/api/dask.array.ma.html>ma</a><a href=/p/dask/2021.10.0/api/dask.array.numpy_compat.html>numpy_compat</a><a href=/p/dask/2021.10.0/api/dask.array.optimization.html>optimization</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.html>overlap</a><a href=/p/?/?/api/dask.array.percentile.html>percentile</a><a href=/p/dask/2021.10.0/api/dask.array.random.html>random</a><a href=/p/?/?/api/dask.array.rechunk.html>rechunk</a><a href=/p/dask/2021.10.0/api/dask.array.reductions.html>reductions</a><a href=/p/dask/2021.10.0/api/dask.array.routines.html>routines</a><a href=/p/dask/2021.10.0/api/dask.array.slicing.html>slicing</a><a href=/p/dask/2021.10.0/api/dask.array.tiledb_io.html>tiledb_io</a><a href=/p/dask/2021.10.0/api/dask.array.ufunc.html>ufunc</a><a href=/p/dask/2021.10.0/api/dask.array.utils.html>utils</a><a href=/p/dask/2021.10.0/api/dask.array.wrap.html>wrap</a></div></div><div class=dropdown><a class=dropbtn href=dask.array.overlap.map_overlap.html>map_overlap</a><div class=dropdown-content><a href=/p/dask/2021.10.0/api/dask.array.overlap._overlap_internal_chunks.html>_overlap_internal_chunks</a><a href=/p/dask/2021.10.0/api/dask.array.overlap._remove_overlap_boundaries.html>_remove_overlap_boundaries</a><a href=/p/dask/2021.10.0/api/dask.array.overlap._trim.html>_trim</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.add_dummy_padding.html>add_dummy_padding</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.boundaries.html>boundaries</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html>coerce_boundary</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_depth.html>coerce_depth</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_depth_type.html>coerce_depth_type</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.constant.html>constant</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.ensure_minimum_chunksize.html>ensure_minimum_chunksize</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.nearest.html>nearest</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.overlap.html>overlap</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.overlap_internal.html>overlap_internal</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.periodic.html>periodic</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.reflect.html>reflect</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.sliding_window_view.html>sliding_window_view</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.trim_internal.html>trim_internal</a><a href=/p/dask/2021.10.0/api/dask.array.overlap.trim_overlap.html>trim_overlap</a></div></div></nav></header><div class=container><div class=sidenav><img src=/p/dask/2021.10.0/img/logo.png><a href=#>dask</a><a href=#>2021.10.0</a><hr><hr><a href=#section-Parameters>Parameters</a><a href=#section-backrefs>BackRef</a></div><code class=signature>map_overlap(func, *args, depth=None, boundary=None, trim=True, align_arrays=True, **kwargs)</code><p>We share neighboring zones between blocks of the array, map a function, and then trim away the neighboring strips. If depth is larger than any chunk along a particular axis, then the array is rechunked.</p><p>Note that this function will attempt to automatically determine the output array type before computing it, please refer to the <code class=verbatim>meta</code> keyword argument in <code class=verbatim>map_blocks</code> if you expect that the function will not succeed when operating on 0-d arrays.</p><h3 id=section-Parameters>Parameters</h3><dl><dt><a id="func: function">func: function</a> :</dt><dd><p>The function to apply to each extended block. If multiple arrays are provided, then the function should expect to receive chunks of each array in the same order.</p></dd><dt><a id=args>args</a> : dask arrays</dt><dd></dd><dt><a id="depth: int, tuple, dict or list">depth: int, tuple, dict or list</a> :</dt><dd><p>The number of elements that each block should share with its neighbors If a tuple or dict then this can be different per axis. If a list then each element of that list must be an int, tuple or dict defining depth for the corresponding array in <code><a class=local href=#args link>args</a></code>. Asymmetric depths may be specified using a dict value of (-/+) tuples. Note that asymmetric depths are currently only supported when <code class=verbatim>boundary</code> is 'none'. The default value is 0.</p></dd><dt><a id="boundary: str, tuple, dict or list">boundary: str, tuple, dict or list</a> :</dt><dd><p>How to handle the boundaries. Values include 'reflect', 'periodic', 'nearest', 'none', or any constant value like 0 or np.nan. If a list then each element must be a str, tuple or dict defining the boundary for the corresponding array in <code><a class=local href=#args link>args</a></code>. The default value is 'reflect'.</p></dd><dt><a id="trim: bool">trim: bool</a> :</dt><dd><p>Whether or not to trim <code class=verbatim>depth</code> elements from each block after calling the map function. Set this to False if your mapping function already does this for you</p></dd><dt><a id="align_arrays: bool">align_arrays: bool</a> :</dt><dd><p>Whether or not to align chunks along equally sized dimensions when multiple arrays are provided. This allows for larger chunks in some arrays to be broken into smaller ones that match chunk sizes in other arrays such that they are compatible for block function mapping. If this is false, then an error will be thrown if arrays do not already have the same number of blocks in each dimension.</p></dd><dt><a id=**kwargs:>**kwargs:</a> :</dt><dd><p>Other keyword arguments valid in <code class=verbatim>map_blocks</code></p></dd></dl><p>Map a function over blocks of arrays with some overlap</p><h3 id=section-Examples>Examples</h3><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span class=kn>import</span><span> </span><a class="foo nn"href=/p/numpy/1.22.3/api/numpy.html>numpy</a><span> </span><span class=k>as</span><span> </span><span class=nn>np</span><br><span class=nsl>... </span><span class=kn>import</span><span> </span><a class="foo nn"href=/p/dask/2021.10.0/api/dask.html>dask</a><span class=nn>.</span><a class="foo nn"href=/p/dask/2021.10.0/api/dask.array.html>array</a><span> </span><span class=k>as</span><span> </span><span class=nn>da</span>
</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>np</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.html>array</a><span>(</span><span>[</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>3</span><span>,</span><span> </span><span class=mi>2</span><span>,</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>]</span><span>)</span><br><span class=nsl>... </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.from_array.html>from_array</a><span>(</span><span>x</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span class=mi>5</span><span>)</span><br><span class=nsl>... </span><span class=k>def</span><span> </span><span class=nf>derivative</span><span>(</span><span>x</span><span>)</span><span>:</span><br><span class=nsl>... </span><span>    </span><span class=k>return</span><span> </span><span>x</span><span> </span><span class=o>-</span><span> </span><span>np</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.routines.roll.html>roll</a><span>(</span><span>x</span><span>,</span><span> </span><span class=mi>1</span><span>)</span>
</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>y</span><span> </span><span class=o>=</span><span> </span><span>x</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><span>derivative</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>,</span><span> </span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html>boundary</a><span class=o>=</span><a class="foo mi"href=/p/dask/2021.10.0/api/dask.array.ufunc.log10.html>0</a><span>)</span><br><span class=nsl>... </span><span>y</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
array([ 1,  0,  1,  1,  0,  0, -1, -1,  0])</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>np</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>16</span><span>)</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html>reshape</a><span>(</span><span>(</span><span class=mi>4</span><span>,</span><span> </span><span class=mi>4</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>d</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.from_array.html>from_array</a><span>(</span><span>x</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span>(</span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>d</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><span class=k>lambda</span><span> </span><span>x</span><span>:</span><span> </span><span>x</span><span> </span><span class=o>+</span><span> </span><span>x</span><span class=o>.</span><span>size</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
array([[16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31]])</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span> </span><span class=o>=</span><span> </span><span class=k>lambda</span><span> </span><span>x</span><span>:</span><span> </span><span>x</span><span> </span><span class=o>+</span><span> </span><span>x</span><span class=o>.</span><span>size</span><br><span class=nsl>... </span><span>depth</span><span> </span><span class=o>=</span><span> </span><span>{</span><a class="foo mi"href=/p/dask/2021.10.0/api/dask.array.ufunc.log10.html>0</a><span>:</span><span> </span><span class=mi>1</span><span>,</span><span> </span><span class=mi>1</span><span>:</span><span> </span><span class=mi>1</span><span>}</span><br><span class=nsl>... </span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html>boundary</a><span> </span><span class=o>=</span><span> </span><span>{</span><a class="foo mi"href=/p/dask/2021.10.0/api/dask.array.ufunc.log10.html>0</a><span>:</span><span> </span><span class=s1>'</span><a class="foo s1"href=/p/dask/2021.10.0/api/dask.array.overlap.reflect.html>reflect</a><span class=s1>'</span><span>,</span><span> </span><span class=mi>1</span><span>:</span><span> </span><span class=s1>'</span><span class=s1>none</span><span class=s1>'</span><span>}</span><br><span class=nsl>... </span><span>d</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>depth</span><span>,</span><span> </span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html>boundary</a><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span><span>  </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
array([[12,  13,  14,  15],
       [16,  17,  18,  19],
       [20,  21,  22,  23],
       [24,  25,  26,  27]])</pre><p>The <code class=verbatim>da.map_overlap</code> function can also accept multiple arrays.</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span> </span><span class=o>=</span><span> </span><span class=k>lambda</span><span> </span><span>x</span><span>,</span><span> </span><span>y</span><span>:</span><span> </span><span>x</span><span> </span><span class=o>+</span><span> </span><span>y</span><br><span class=nsl>... </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>8</span><span>)</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html>reshape</a><span>(</span><span class=mi>2</span><span>,</span><span> </span><span class=mi>4</span><span>)</span><span class=o>.</span><span>rechunk</span><span>(</span><span>(</span><span class=mi>1</span><span>,</span><span> </span><span class=mi>2</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>y</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>4</span><span>)</span><span class=o>.</span><span>rechunk</span><span>(</span><span class=mi>2</span><span>)</span><br><span class=nsl>... </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span>y</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span><span> </span><span class=c1># doctest: +NORMALIZE_WHITESPACE</span>
array([[ 0,  2,  4,  6],
       [ 4,  6,  8,  10]])</pre><p>When multiple arrays are given, they do not need to have the same number of dimensions but they must broadcast together. Arrays are aligned block by block (just as in <code class=verbatim>da.map_blocks</code> ) so the blocks must have a common chunk size. This common chunking is determined automatically as long as <code class=verbatim>align_arrays</code> is True.</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>8</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span class=mi>4</span><span>)</span><br><span class=nsl>... </span><span>y</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>8</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span class=mi>2</span><span>)</span><br><span class=nsl>... </span><span>r</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span>y</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>,</span><span> </span><span>align_arrays</span><span class=o>=</span><span class=kc>True</span><span>)</span><br><span class=nsl>... </span><span class=nb>len</span><span>(</span><span>r</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.Array.to_delayed.html>to_delayed</a><span>(</span><span>)</span><span>)</span>
4</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span>y</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>,</span><span> </span><span>align_arrays</span><span class=o>=</span><span class=kc>False</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
Traceback (most recent call last):
    ...
ValueError: Shapes do not align {'.0': {2, 4}}</pre><p>Note also that this function is equivalent to <code class=verbatim>map_blocks</code> by default. A non-zero <code class=verbatim>depth</code> must be defined for any overlap to appear in the arrays provided to <code class=verbatim>func</code> .</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span> </span><span class=o>=</span><span> </span><span class=k>lambda</span><span> </span><span>x</span><span>:</span><span> </span><span>x</span><span class=o>.</span><span>sum</span><span>(</span><span>)</span><br><span class=nsl>... </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.creation.ones_like.html>ones</a><span>(</span><a class="foo mi"href=/p/dask/2021.10.0/api/dask.array.ufunc.log10.html>10</a><span>,</span><span> </span><span>dtype</span><span class=o>=</span><span class=s1>'</span><span class=s1>int</span><span class=s1>'</span><span>)</span><br><span class=nsl>... </span><span>block_args</span><span> </span><span class=o>=</span><span> </span><span class=nb>dict</span><span>(</span><span>chunks</span><span class=o>=</span><span>(</span><span>)</span><span>,</span><span> </span><span>drop_axis</span><span class=o>=</span><a class="foo mi"href=/p/dask/2021.10.0/api/dask.array.ufunc.log10.html>0</a><span>)</span><br><span class=nsl>... </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.map_blocks.html>map_blocks</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span class=o>*</span><span class=o>*</span><span>block_args</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
10</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span class=o>*</span><span class=o>*</span><span>block_args</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
10</pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><a href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func.html"class=foo>func</a><span>,</span><span> </span><span>x</span><span>,</span><span> </span><span class=o>*</span><span class=o>*</span><span>block_args</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>)</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
12</pre><p>For functions that may not handle 0-d arrays, it's also possible to specify <code class=verbatim>meta</code> with an empty array matching the type of the expected result. In the example below, <code class=verbatim>func</code> will result in an <code class=verbatim>IndexError</code> when computing <code class=verbatim>meta</code> :</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>np</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>16</span><span>)</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html>reshape</a><span>(</span><span>(</span><span class=mi>4</span><span>,</span><span> </span><span class=mi>4</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>d</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.from_array.html>from_array</a><span>(</span><span>x</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span>(</span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>y</span><span> </span><span class=o>=</span><span> </span><span>d</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><span class=k>lambda</span><span> </span><span>x</span><span>:</span><span> </span><span>x</span><span> </span><span class=o>+</span><span> </span><span>x</span><span>[</span><span class=mi>2</span><span>]</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>,</span><span> </span><span>meta</span><span class=o>=</span><span>np</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.html>array</a><span>(</span><span>(</span><span>)</span><span>)</span><span>)</span><br><span class=nsl>... </span><span>y</span>
dask.array<_trim, shape=(4, 4), dtype=float64, chunksize=(2, 2), chunktype=numpy.ndarray></pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>y</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span>
array([[ 4,  6,  8, 10],
       [ 8, 10, 12, 14],
       [20, 22, 24, 26],
       [24, 26, 28, 30]])</pre><p>Similarly, it's possible to specify a non-NumPy array to <code class=verbatim>meta</code> :</p><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span class=kn>import</span><span> </span><span class=nn>cupy</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>x</span><span> </span><span class=o>=</span><span> </span><span>cupy</span><span class=o>.</span><span>arange</span><span>(</span><span class=mi>16</span><span>)</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html>reshape</a><span>(</span><span>(</span><span class=mi>4</span><span>,</span><span> </span><span class=mi>4</span><span>)</span><span>)</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>d</span><span> </span><span class=o>=</span><span> </span><span>da</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.core.from_array.html>from_array</a><span>(</span><span>x</span><span>,</span><span> </span><span>chunks</span><span class=o>=</span><span>(</span><span class=mi>2</span><span>,</span><span> </span><span class=mi>2</span><span>)</span><span>)</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>y</span><span> </span><span class=o>=</span><span> </span><span>d</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html>map_overlap</a><span>(</span><span class=k>lambda</span><span> </span><span>x</span><span>:</span><span> </span><span>x</span><span> </span><span class=o>+</span><span> </span><span>x</span><span>[</span><span class=mi>2</span><span>]</span><span>,</span><span> </span><span>depth</span><span class=o>=</span><span class=mi>1</span><span>,</span><span> </span><span>meta</span><span class=o>=</span><span>cupy</span><span class=o>.</span><a class=foo href=/p/dask/2021.10.0/api/dask.array.html>array</a><span>(</span><span>(</span><span>)</span><span>)</span><span>)</span><span>  </span><span class=c1># doctest: +SKIP</span><br><span class=nsl>... </span><span>y</span><span>  </span><span class=c1># doctest: +SKIP</span>
dask.array<_trim, shape=(4, 4), dtype=float64, chunksize=(2, 2), chunktype=cupy.ndarray></pre><span class=note>This example is valid syntax, but we were not able to check execution</span><pre class="highlight compiled"><span class=nsl>>>> </span><span>y</span><span class=o>.</span><span>compute</span><span>(</span><span>)</span><span>  </span><span class=c1># doctest: +SKIP</span>
array([[ 4,  6,  8, 10],
       [ 8, 10, 12, 14],
       [20, 22, 24, 26],
       [24, 26, 28, 30]])</pre> See : <h3 id=section-backrefs>Back References</h3><p>The following pages refer to to this document either explicitly or contain code examples using this.</p><code><a class=exists href=/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html link>dask.array.overlap.map_overlap</a></code><h3>Local connectivity graph</h3><p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p><p>Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows or text (beyond on hover)</p><canvas class=graph height=500 width=800></canvas><p>SVG is more flexible but power hungry; and does not scale well to 50 + nodes.</p><svg class=graph height=500 width=600></svg><p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted (or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library they belong to, and scaled with the number of references pointing them</p><hr> File: /dask/array/overlap.py#472 <br> type: &LTclass 'function'> <br> Commit: <br><script src=https://d3js.org/d3.v4.min.js></script><script src=https://d3js.org/d3-selection-multi.v1.js></script><style>.node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };</style><script>window._data_graph={nodes:[{id:1,val:11,label:"dask.array.fft.fft_wrap.<locals>.func",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func"},{id:2,val:10.449489742783179,label:"dask.array.core.map_blocks",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.core.map_blocks"},{id:3,val:19.618950038622252,label:"dask.array",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array"},{id:4,val:20.727922061357855,label:"dask.array.ufunc.log10",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.ufunc.log10"},{id:5,val:11.60555127546399,label:"dask.array.core.from_array",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.core.from_array"},{id:6,val:10,label:"dask.array.overlap.reflect",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.overlap.reflect"},{id:7,val:14.403124237432849,label:"dask.array.core.Array.reshape",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.core.Array.reshape"},{id:8,val:13,label:"dask.array.creation.ones_like",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.creation.ones_like"},{id:9,val:9.732050807568877,label:"dask.array.routines.roll",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.routines.roll"},{id:10,val:9,label:"dask.array.core.Array.to_delayed",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.core.Array.to_delayed"},{id:11,val:15.416198487095663,label:"dask",mod:"dask",url:"/p/dask/2021.10.0/api/dask"},{id:12,val:9.732050807568877,label:"dask.array.overlap.coerce_boundary",mod:"dask",url:"/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary"},{id:14,val:44,label:"numpy",mod:"numpy",url:"/p/numpy/1.22.3/api/numpy"}],links:[{source:14,target:5,id:1035},{source:8,target:1,id:1326},{source:3,target:2,id:1413},{source:3,target:5,id:1445},{source:1,target:2,id:1481},{source:11,target:5,id:1493},{source:11,target:2,id:1504},{source:7,target:9,id:1538},{source:4,target:1,id:1646},{source:4,target:9,id:1657},{source:4,target:2,id:1676},{source:4,target:5,id:1717}]};</script><script src=/graph_canvas.js></script><script src=/graph_svg.js></script></div></body></html>