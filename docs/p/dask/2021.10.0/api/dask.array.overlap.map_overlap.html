<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=dask>dask</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/IPython/8.3.0.dev/api/IPython.html">IPython</a>
<a href="/p/astropy/5.0/api/astropy.html">astropy</a>
<a href="/p/dask/2021.10.0/api/dask.html">dask</a>
<a href="/p/distributed/2021.10.0/api/distributed.html">distributed</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a>
<a href="/p/networkx/2.7.2rc1.dev0/api/networkx.html">networkx</a>
<a href="/p/numpy/1.22.3/api/numpy.html">numpy</a>
<a href="/p/pandas/1.4.1/api/pandas.html">pandas</a>
<a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
<a href="/p/scipy/1.8.0/api/scipy.html">scipy</a>
<a href="/p/skimage/0.17.2/api/skimage.html">skimage</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/dask/2021.10.0/api/dask.html'>2021.10.0</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/dask/2021.10.0/api/dask.html">2021.10.0</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/dask/2021.10.0/api/dask.html'>API</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/dask/2021.10.0/api/dask.html">API</a>
                        <a href="/p/dask/2021.10.0/gallery">Gallery</a>
                        <a href="/p/dask/2021.10.0/examples">Examples</a>
                        <a href="/p/dask/2021.10.0/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='dask.html'>dask</a>.                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='dask.array.html'>array</a>.                            <div class="dropdown-content">
<a href="/p/dask/2021.10.0/api/dask._version.html">_version</a>
<a href="/p/dask/2021.10.0/api/dask.array.html">array</a>
<a href="/p/dask/2021.10.0/api/dask.base.html">base</a>
<a href="/p/dask/2021.10.0/api/dask.blockwise.html">blockwise</a>
<a href="/p/dask/2021.10.0/api/dask.callbacks.html">callbacks</a>
<a href="/p/dask/2021.10.0/api/dask.compatibility.html">compatibility</a>
<a href="/p/dask/2021.10.0/api/dask.config.html">config</a>
<a href="/p/dask/2021.10.0/api/dask.context.html">context</a>
<a href="/p/dask/2021.10.0/api/dask.core.html">core</a>
<a href="/p/dask/2021.10.0/api/dask.datasets.html">datasets</a>
<a href="/p/?/?/?/dask.delayed.html.html">delayed</a>
<a href="/p/dask/2021.10.0/api/dask.hashing.html">hashing</a>
<a href="/p/dask/2021.10.0/api/dask.highlevelgraph.html">highlevelgraph</a>
<a href="/p/dask/2021.10.0/api/dask.layers.html">layers</a>
<a href="/p/dask/2021.10.0/api/dask.local.html">local</a>
<a href="/p/dask/2021.10.0/api/dask.multiprocessing.html">multiprocessing</a>
<a href="/p/dask/2021.10.0/api/dask.optimization.html">optimization</a>
<a href="/p/dask/2021.10.0/api/dask.order.html">order</a>
<a href="/p/dask/2021.10.0/api/dask.sizeof.html">sizeof</a>
<a href="/p/dask/2021.10.0/api/dask.system.html">system</a>
<a href="/p/dask/2021.10.0/api/dask.threaded.html">threaded</a>
<a href="/p/dask/2021.10.0/api/dask.utils.html">utils</a>
<a href="/p/dask/2021.10.0/api/dask.utils_test.html">utils_test</a>
<a href="/p/dask/2021.10.0/api/dask.widgets.html">widgets</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='dask.array.overlap.html'>overlap</a>.                            <div class="dropdown-content">
<a href="/p/dask/2021.10.0/api/dask.array.backends.html">backends</a>
<a href="/p/?/?/?/dask.array.blockwise.html.html">blockwise</a>
<a href="/p/dask/2021.10.0/api/dask.array.chunk.html">chunk</a>
<a href="/p/dask/2021.10.0/api/dask.array.chunk_types.html">chunk_types</a>
<a href="/p/dask/2021.10.0/api/dask.array.core.html">core</a>
<a href="/p/dask/2021.10.0/api/dask.array.creation.html">creation</a>
<a href="/p/dask/2021.10.0/api/dask.array.dispatch.html">dispatch</a>
<a href="/p/dask/2021.10.0/api/dask.array.einsumfuncs.html">einsumfuncs</a>
<a href="/p/dask/2021.10.0/api/dask.array.fft.html">fft</a>
<a href="/p/?/?/?/dask.array.gufunc.html.html">gufunc</a>
<a href="/p/dask/2021.10.0/api/dask.array.lib.html">lib</a>
<a href="/p/dask/2021.10.0/api/dask.array.linalg.html">linalg</a>
<a href="/p/dask/2021.10.0/api/dask.array.ma.html">ma</a>
<a href="/p/dask/2021.10.0/api/dask.array.numpy_compat.html">numpy_compat</a>
<a href="/p/dask/2021.10.0/api/dask.array.optimization.html">optimization</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.html">overlap</a>
<a href="/p/?/?/?/dask.array.percentile.html.html">percentile</a>
<a href="/p/dask/2021.10.0/api/dask.array.random.html">random</a>
<a href="/p/?/?/?/dask.array.rechunk.html.html">rechunk</a>
<a href="/p/dask/2021.10.0/api/dask.array.reductions.html">reductions</a>
<a href="/p/dask/2021.10.0/api/dask.array.routines.html">routines</a>
<a href="/p/dask/2021.10.0/api/dask.array.slicing.html">slicing</a>
<a href="/p/dask/2021.10.0/api/dask.array.tiledb_io.html">tiledb_io</a>
<a href="/p/dask/2021.10.0/api/dask.array.ufunc.html">ufunc</a>
<a href="/p/dask/2021.10.0/api/dask.array.utils.html">utils</a>
<a href="/p/dask/2021.10.0/api/dask.array.wrap.html">wrap</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='dask.array.overlap.map_overlap.html'>map_overlap</a>                            <div class="dropdown-content">
<a href="/p/dask/2021.10.0/api/dask.array.overlap._overlap_internal_chunks.html">_overlap_internal_chunks</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap._remove_overlap_boundaries.html">_remove_overlap_boundaries</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap._trim.html">_trim</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.add_dummy_padding.html">add_dummy_padding</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.boundaries.html">boundaries</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html">coerce_boundary</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_depth.html">coerce_depth</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_depth_type.html">coerce_depth_type</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.constant.html">constant</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.ensure_minimum_chunksize.html">ensure_minimum_chunksize</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.nearest.html">nearest</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.overlap.html">overlap</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.overlap_internal.html">overlap_internal</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.periodic.html">periodic</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.reflect.html">reflect</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.sliding_window_view.html">sliding_window_view</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.trim_internal.html">trim_internal</a>
<a href="/p/dask/2021.10.0/api/dask.array.overlap.trim_overlap.html">trim_overlap</a>
                            </div>
                    </div><!--end dropdown-->
</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/dask/2021.10.0/img/dask-logo.png"/>
    <a href="#">dask</a>
    <a href="#">2021.10.0</a>
    <hr/>
    <hr/>
<a href="#section-Parameters">Parameters</a><a href="#section-backrefs">BackRef</a>
    </div><!--end sidenav-->







<code class='signature'>map_overlap(func, *args, depth=None, boundary=None, trim=True, align_arrays=True, **kwargs)</code><!-- rendering Extended Summary -->
                       <p>We share neighboring zones between blocks of the array, map a function, and then trim away the neighboring strips. If depth is larger than any chunk along a particular axis, then the array is rechunked.</p>

               <p>Note that this function will attempt to automatically determine the output array type before computing it, please refer to the         <code class='verbatim'>meta</code>
 keyword argument in         <code class='verbatim'>map_blocks</code>
 if you expect that the function will not succeed when operating on 0-d arrays.</p>


<!-- rendering Notes -->
        
<h3 id="section-Parameters">Parameters</h3>
<dl>
<dt><a id="func: function">func: function</a> : </dt>
<dd>
<p>The function to apply to each extended block. If multiple arrays are provided, then the function should expect to receive chunks of each array in the same order.</p>

</dd>
<dt><a id="args">args</a> : dask arrays</dt>
<dd>
</dd>
<dt><a id="depth: int, tuple, dict or list">depth: int, tuple, dict or list</a> : </dt>
<dd>
<p>The number of elements that each block should share with its neighbors If a tuple or dict then this can be different per axis. If a list then each element of that list must be an int, tuple or dict defining depth for the corresponding array in <code><a href="#args" class='local'>args</a></code>. Asymmetric depths may be specified using a dict value of (-/+) tuples. Note that asymmetric depths are currently only supported when         <code class='verbatim'>boundary</code>
 is &#39;none&#39;. The default value is 0.</p>

</dd>
<dt><a id="boundary: str, tuple, dict or list">boundary: str, tuple, dict or list</a> : </dt>
<dd>
<p>How to handle the boundaries. Values include &#39;reflect&#39;, &#39;periodic&#39;, &#39;nearest&#39;, &#39;none&#39;, or any constant value like 0 or np.nan. If a list then each element must be a str, tuple or dict defining the boundary for the corresponding array in <code><a href="#args" class='local'>args</a></code>. The default value is &#39;reflect&#39;.</p>

</dd>
<dt><a id="trim: bool">trim: bool</a> : </dt>
<dd>
<p>Whether or not to trim         <code class='verbatim'>depth</code>
 elements from each block after calling the map function. Set this to False if your mapping function already does this for you</p>

</dd>
<dt><a id="align_arrays: bool">align_arrays: bool</a> : </dt>
<dd>
<p>Whether or not to align chunks along equally sized dimensions when multiple arrays are provided.  This allows for larger chunks in some arrays to be broken into smaller ones that match chunk sizes in other arrays such that they are compatible for block function mapping. If this is false, then an error will be thrown if arrays do not already have the same number of blocks in each dimension.</p>

</dd>
<dt><a id="**kwargs:">**kwargs:</a> : </dt>
<dd>
<p>Other keyword arguments valid in         <code class='verbatim'>map_blocks</code>
</p>

</dd>
</dl>

<!-- rendering Summary -->
                       <p>Map a function over blocks of arrays with some overlap</p>


<h3 id="section-Examples">Examples</h3>
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">numpy</a><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">np</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/dask/2021.10.0/api/dask.html">dask</a><span class="nn">.</span><a class="foo nn" href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">da</span>
</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">[</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">3</span><span class="">,</span><span class=""> </span><span class="mi">3</span><span class="">,</span><span class=""> </span><span class="mi">3</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">]</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.from_array.html">from_array</a><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">5</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="k">def</span><span class=""> </span><span class="nf">derivative</span><span class="">(</span><span class="">x</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">return</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="">np</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.routines.roll.html">roll</a><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">)</span>
</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">x</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><span class="">derivative</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">,</span><span class=""> </span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html">boundary</a><span class="o">=</span><a class="foo mi" href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([ 1,  0,  1,  1,  0,  0, -1, -1,  0])</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">16</span><span class="">)</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html">reshape</a><span class="">(</span><span class="">(</span><span class="mi">4</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">d</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.from_array.html">from_array</a><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">d</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">x</span><span class="o">.</span><span class="">size</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([[16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31]])</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">x</span><span class="o">.</span><span class="">size</span><br><span class='nsl'>...&nbsp;</span><span class="">depth</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">{</span><a class="foo mi" href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">:</span><span class=""> </span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">:</span><span class=""> </span><span class="mi">1</span><span class="">}</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html">boundary</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">{</span><a class="foo mi" href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">:</span><span class=""> </span><span class="s1">&#39;</span><a class="foo s1" href="/p/dask/2021.10.0/api/dask.array.overlap.reflect.html">reflect</a><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">:</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="">}</span><br><span class='nsl'>...&nbsp;</span><span class="">d</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">depth</span><span class="">,</span><span class=""> </span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary.html">boundary</a><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
array([[12,  13,  14,  15],
       [16,  17,  18,  19],
       [20,  21,  22,  23],
       [24,  25,  26,  27]])</pre>
            
                <p>The         <code class='verbatim'>da.map_overlap</code>
 function can also accept multiple arrays.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">y</span><br><span class='nsl'>...&nbsp;</span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">8</span><span class="">)</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html">reshape</a><span class="">(</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="o">.</span><span class="">rechunk</span><span class="">(</span><span class="">(</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">4</span><span class="">)</span><span class="o">.</span><span class="">rechunk</span><span class="">(</span><span class="mi">2</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span><span class=""> </span><span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
array([[ 0,  2,  4,  6],
       [ 4,  6,  8,  10]])</pre>
            
                <p>When multiple arrays are given, they do not need to have the same number of dimensions but they must broadcast together. Arrays are aligned block by block (just as in         <code class='verbatim'>da.map_blocks</code>
) so the blocks must have a common chunk size.  This common chunking is determined automatically as long as         <code class='verbatim'>align_arrays</code>
 is True.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">8</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">4</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">8</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="mi">2</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">r</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="">align_arrays</span><span class="o">=</span><span class="kc">True</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="nb">len</span><span class="">(</span><span class="">r</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.Array.to_delayed.html">to_delayed</a><span class="">(</span><span class="">)</span><span class="">)</span>
4</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="">align_arrays</span><span class="o">=</span><span class="kc">False</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
Traceback (most recent call last):
    ...
ValueError: Shapes do not align {&#39;.0&#39;: {2, 4}}</pre>
            
                <p>Note also that this function is equivalent to         <code class='verbatim'>map_blocks</code>
 by default.  A non-zero         <code class='verbatim'>depth</code>
 must be defined for any overlap to appear in the arrays provided to         <code class='verbatim'>func</code>
.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class="o">.</span><span class="">sum</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.creation.ones_like.html">ones</a><span class="">(</span><a class="foo mi" href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">10</a><span class="">,</span><span class=""> </span><span class="">dtype</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">int</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">block_args</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="nb">dict</span><span class="">(</span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">drop_axis</span><span class="o">=</span><a class="foo mi" href="/p/dask/2021.10.0/api/dask.array.ufunc.log10.html">0</a><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.map_blocks.html">map_blocks</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">block_args</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
10</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">block_args</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
10</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.&lt;locals&gt;.func.html">func</a><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">block_args</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">)</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
12</pre>
            
                <p>For functions that may not handle 0-d arrays, it&#39;s also possible to specify         <code class='verbatim'>meta</code>
 with an empty array matching the type of the expected result. In the example below,         <code class='verbatim'>func</code>
 will result in an         <code class='verbatim'>IndexError</code>
 when computing         <code class='verbatim'>meta</code>
:</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">16</span><span class="">)</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html">reshape</a><span class="">(</span><span class="">(</span><span class="mi">4</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">d</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.from_array.html">from_array</a><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">d</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="mi">2</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="">meta</span><span class="o">=</span><span class="">np</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">(</span><span class="">)</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span>
dask.array&lt;_trim, shape=(4, 4), dtype=float64, chunksize=(2, 2), chunktype=numpy.ndarray&gt;</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span>
array([[ 4,  6,  8, 10],
       [ 8, 10, 12, 14],
       [20, 22, 24, 26],
       [24, 26, 28, 30]])</pre>
            
                <p>Similarly, it&#39;s possible to specify a non-NumPy array to         <code class='verbatim'>meta</code>
:</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">import</span><span class=""> </span><span class="nn">cupy</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">cupy</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="mi">16</span><span class="">)</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.Array.reshape.html">reshape</a><span class="">(</span><span class="">(</span><span class="mi">4</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">d</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">da</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.core.from_array.html">from_array</a><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">chunks</span><span class="o">=</span><span class="">(</span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">)</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">d</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html">map_overlap</a><span class="">(</span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">:</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">x</span><span class="">[</span><span class="mi">2</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">depth</span><span class="o">=</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="">meta</span><span class="o">=</span><span class="">cupy</span><span class="o">.</span><a class="foo " href="/p/dask/2021.10.0/api/dask.array.html">array</a><span class="">(</span><span class="">(</span><span class="">)</span><span class="">)</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span><br><span class='nsl'>...&nbsp;</span><span class="">y</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
dask.array&lt;_trim, shape=(4, 4), dtype=float64, chunksize=(2, 2), chunktype=cupy.ndarray&gt;</pre>
            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y</span><span class="o">.</span><span class="">compute</span><span class="">(</span><span class="">)</span><span class="">  </span><span class="c1"># doctest: +SKIP</span>
array([[ 4,  6,  8, 10],
       [ 8, 10, 12, 14],
       [20, 22, 24, 26],
       [24, 26, 28, 30]])</pre>
            
         See :
    

    <h3 id='section-backrefs'>Back References</h3>
    <p>The following pages refer to to this document either explicitly or contain code examples using this.</p>

        <code><a link href="/p/dask/2021.10.0/api/dask.array.overlap.map_overlap.html" class='exists'>dask.array.overlap.map_overlap</a></code>

<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    File: /dask/array/overlap.py#472
<br/>

type: &lt;class &#39;function&#39;&gt; <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {"nodes": [{"id": 1, "val": 10.449489742783179, "label": "dask.array.fft.fft_wrap.<locals>.func", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.fft.fft_wrap.<locals>.func"}, {"id": 2, "val": 10.0, "label": "dask.array.overlap.reflect", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.overlap.reflect"}, {"id": 3, "val": 9.414213562373096, "label": "dask.array.core.map_blocks", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.map_blocks"}, {"id": 4, "val": 46.01315561749642, "label": "numpy", "mod": "numpy", "url": "/p/numpy/1.22.3/api/numpy"}, {"id": 5, "val": 15.416198487095663, "label": "dask", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask"}, {"id": 6, "val": 13.0, "label": "dask.array.creation.ones_like", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.creation.ones_like"}, {"id": 7, "val": 20.727922061357855, "label": "dask.array.ufunc.log10", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.ufunc.log10"}, {"id": 8, "val": 9.732050807568877, "label": "dask.array.routines.roll", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.routines.roll"}, {"id": 9, "val": 19.575836902790225, "label": "dask.array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array"}, {"id": 10, "val": 9.0, "label": "dask.array.core.Array.to_delayed", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.Array.to_delayed"}, {"id": 11, "val": 11.3166247903554, "label": "dask.array.core.from_array", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.from_array"}, {"id": 12, "val": 9.732050807568877, "label": "dask.array.overlap.coerce_boundary", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.overlap.coerce_boundary"}, {"id": 13, "val": 14.403124237432849, "label": "dask.array.core.Array.reshape", "mod": "dask", "url": "/p/dask/2021.10.0/api/dask.array.core.Array.reshape"}], "links": [{"source": 13, "target": 8, "id": 35}, {"source": 9, "target": 11, "id": 99}, {"source": 9, "target": 3, "id": 137}, {"source": 4, "target": 11, "id": 1558}, {"source": 5, "target": 11, "id": 1657}, {"source": 5, "target": 3, "id": 1670}, {"source": 1, "target": 3, "id": 1682}, {"source": 6, "target": 1, "id": 1707}, {"source": 7, "target": 1, "id": 1788}, {"source": 7, "target": 11, "id": 1806}, {"source": 7, "target": 8, "id": 1818}, {"source": 7, "target": 3, "id": 1847}]};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>