<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=numpy>numpy</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/numpy/1.22.3/api/numpy'>1.22.3</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/numpy/1.22.3/api/numpy">1.22.3</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/numpy/1.22.3/api/numpy'>docs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/numpy/1.22.3/api/numpy">API</a>
                        <a href="/p/numpy/1.22.3/gallery">Gallery</a>
                        <a href="/p/numpy/1.22.3/examples">Examples</a>
                        <a href="/p/numpy/1.22.3/docs">Narrative</a>
                     </div>
                </div>

</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/numpy/1.22.3/img/numpy_logo.png"/>
    <a href="#">numpy</a>
    <a href="#">1.22.3</a>
        <a class='external'  href="https://pypi.org/project/numpy">Pypi</a>
        <a class='external' href="https://github.com/numpy/numpy">GitHub</a>
        <a class='external' href="https://numpy.org/">Homepage</a>
    <hr/>
        <a class='external' href="https://numpy.org/doc/1.22/">Other Docs</a>
    <hr/>
    </div><!--end sidenav-->







               <pre class='not-implemented'>
.. currentmodule:: numpy
    </pre>



<h1>NumPy 1.17.0 Release Notes</h1>
               <p>This NumPy release contains a number of new features that should substantially improve its performance and usefulness, see Highlights below for a summary. The Python versions supported are 3.5-3.7, note that Python 2.7 has been dropped. Python 3.8b2 should work with the released source packages, but there are no future guarantees.</p>

               <p>Downstream developers should use Cython &gt;= 0.29.11 for Python 3.8 support and OpenBLAS &gt;= 3.7 (not currently out) to avoid problems on the Skylake architecture. The NumPy wheels on PyPI are built from the OpenBLAS development branch in order to avoid those problems.</p>


<h1>Highlights</h1>
                          <ul>               <li>               <p>A new extensible <code><a href="/p/random/*/api/random.html" class='exists'>random</a></code>
 module along with four selectable <code class='not-implemented'>:None:None:`random number
  generators &lt;random.BitGenerators&gt;`</code> and improved seeding designed for use in parallel   processes has been added. The currently available bit generators are <code class='not-implemented'>:None:None:`MT19937
  &lt;random.mt19937.MT19937&gt;`</code>, <code class='not-implemented'>:None:None:`PCG64 &lt;random.pcg64.PCG64&gt;`</code>, <code class='not-implemented'>:None:None:`Philox
  &lt;random.philox.Philox&gt;`</code>, and <code class='not-implemented'>:None:None:`SFC64 &lt;random.sfc64.SFC64&gt;`</code>. See below under   New Features.</p>

</li>
               <li>               <p>NumPy&#39;s <code class='not-implemented'>:None:None:`FFT &lt;fft&gt;`</code> implementation was changed from fftpack to pocketfft,   resulting in faster, more accurate transforms and better handling of datasets   of prime length. See below under Improvements.</p>

</li>
               <li>               <p>New radix sort and timsort sorting methods. It is currently not possible to   choose which will be used. They are hardwired to the datatype and used   when either         <code class='verbatim'>stable</code>
 or         <code class='verbatim'>mergesort</code>
 is passed as the method. See below   under Improvements.</p>

</li>
               <li>               <p>Overriding numpy functions is now possible by default,   see         <code class='verbatim'>__array_function__</code>
 below.</p>

</li>
            </ul>


<h1>New functions</h1>
                          <ul>               <li>               <p><code><a href="/p/numpy/*/api/numpy.errstate.html" class='exists'>numpy.errstate</a></code>
 is now also a function decorator</p>

</li>
            </ul>


<h1>Deprecations</h1>

<h1>`numpy.polynomial` functions warn when passed ``float`` in place of ``int``</h1>
               <p>Previously functions in this module would accept         <code class='verbatim'>float</code>
 values provided they were integral (        <code class='verbatim'>1.0</code>
,         <code class='verbatim'>2.0</code>
, etc). For consistency with the rest of numpy, doing so is now deprecated, and in future will raise a         <code class='verbatim'>TypeError</code>
.</p>

               <p>Similarly, passing a float like         <code class='verbatim'>0.5</code>
 in place of an integer will now raise a         <code class='verbatim'>TypeError</code>
 instead of the previous         <code class='verbatim'>ValueError</code>
.</p>


<h1>Deprecate `numpy.distutils.exec_command` and ``temp_file_name``</h1>
               <p>The internal use of these functions has been refactored and there are better alternatives. Replace         <code class='verbatim'>exec_command</code>
 with <code><a href="/p/subprocess/*/api/subprocess.Popen.html" class='exists'>subprocess.Popen</a></code>
 and <code class='not-implemented'>:None:None:`temp_file_name &lt;numpy.distutils.exec_command&gt;`</code> with <code><a href="/p/tempfile/*/api/tempfile.mkstemp.html" class='exists'>tempfile.mkstemp</a></code>
.</p>


<h1>Writeable flag of C-API wrapped arrays</h1>
               <p>When an array is created from the C-API to wrap a pointer to data, the only indication we have of the read-write nature of the data is the         <code class='verbatim'>writeable</code>
 flag set during creation. It is dangerous to force the flag to writeable. In the future it will not be possible to switch the writeable flag to         <code class='verbatim'>True</code>
 from python. This deprecation should not affect many users since arrays created in such a manner are very rare in practice and only available through the NumPy C-API.</p>


<h1>`numpy.nonzero` should no longer be called on 0d arrays</h1>
               <p>The behavior of <code><a href="/p/numpy/*/api/numpy.nonzero.html" class='exists'>numpy.nonzero</a></code>
 on 0d arrays was surprising, making uses of it almost always incorrect. If the old behavior was intended, it can be preserved without a warning by using         <code class='verbatim'>nonzero(atleast_1d(arr))</code>
 instead of         <code class='verbatim'>nonzero(arr)</code>
.  In a future release, it is most likely this will raise a         <code class='verbatim'>ValueError</code>
.</p>


<h1>Writing to the result of `numpy.broadcast_arrays` will warn</h1>
               <p>Commonly <code><a href="/p/numpy/*/api/numpy.broadcast_arrays.html" class='exists'>numpy.broadcast_arrays</a></code>
 returns a writeable array with internal overlap, making it unsafe to write to. A future version will set the         <code class='verbatim'>writeable</code>
 flag to         <code class='verbatim'>False</code>
, and require users to manually set it to         <code class='verbatim'>True</code>
 if they are sure that is what they want to do. Now writing to it will emit a deprecation warning with instructions to set the         <code class='verbatim'>writeable</code>
 flag         <code class='verbatim'>True</code>
.  Note that if one were to inspect the flag before setting it, one would find it would already be         <code class='verbatim'>True</code>
.  Explicitly setting it, though, as one will need to do in future versions, clears an internal flag that is used to produce the deprecation warning. To help alleviate confusion, an additional <code class='not-implemented'>:None:None:`FutureWarning`</code> will be emitted when accessing the         <code class='verbatim'>writeable</code>
 flag state to clarify the contradiction.</p>

               <p>Note that for the C-side buffer protocol such an array will return a readonly buffer immediately unless a writable buffer is requested. If a writeable buffer is requested a warning will be given. When using cython, the         <code class='verbatim'>const</code>
 qualifier should be used with such arrays to avoid the warning (e.g.         <code class='verbatim'>cdef const double[::1] view</code>
).</p>


<h1>Future Changes</h1>

<h1>Shape-1 fields in dtypes won&#39;t be collapsed to scalars in a future version</h1>
               <p>Currently, a field specified as         <code class='verbatim'>[(name, dtype, 1)]</code>
 or         <code class='verbatim'>&#34;1type&#34;</code>
 is interpreted as a scalar field (i.e., the same as         <code class='verbatim'>[(name, dtype)]</code>
 or         <code class='verbatim'>[(name, dtype, ()]</code>
). This now raises a FutureWarning; in a future version, it will be interpreted as a shape-(1,) field, i.e. the same as         <code class='verbatim'>[(name,
dtype, (1,))]</code>
 or         <code class='verbatim'>&#34;(1,)type&#34;</code>
 (consistently with         <code class='verbatim'>[(name, dtype, n)]</code>
 /         <code class='verbatim'>&#34;ntype&#34;</code>
 with         <code class='verbatim'>n&gt;1</code>
, which is already equivalent to         <code class='verbatim'>[(name, dtype,
(n,)]</code>
 /         <code class='verbatim'>&#34;(n,)type&#34;</code>
).</p>


<h1>Compatibility notes</h1>

<h1>``float16`` subnormal rounding</h1>
               <p>Casting from a different floating point precision to         <code class='verbatim'>float16</code>
 used incorrect rounding in some edge cases. This means in rare cases, subnormal results will now be rounded up instead of down, changing the last bit (ULP) of the result.</p>


<h1>Signed zero when using divmod</h1>
               <p>Starting in version <code class='not-implemented'>:None:None:`1.12.0`</code>, numpy incorrectly returned a negatively signed zero when using the         <code class='verbatim'>divmod</code>
 and         <code class='verbatim'>floor_divide</code>
 functions when the result was zero. For example::     </p>

               <pre>&gt;&gt;&gt; np.zeros(10)//1
array([-0., -0., -0., -0., -0., -0., -0., -0., -0., -0.])</pre>
               <p>With this release, the result is correctly returned as a positively signed zero::     </p>

               <pre>&gt;&gt;&gt; np.zeros(10)//1
array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])</pre>

<h1>``MaskedArray.mask`` now returns a view of the mask, not the mask itself</h1>
               <p>Returning the mask itself was unsafe, as it could be reshaped in place which would violate expectations of the masked array code. The behavior of <code class='not-implemented'>:None:None:`mask
&lt;ma.MaskedArray.mask&gt;`</code> is now consistent with <code class='not-implemented'>:None:None:`data &lt;ma.MaskedArray.data&gt;`</code>, which also returns a view.</p>

               <p>The underlying mask can still be accessed with         <code class='verbatim'>._mask</code>
 if it is needed. Tests that contain         <code class='verbatim'>assert x.mask is not y.mask</code>
 or similar will need to be updated.</p>


<h1>Do not lookup ``__buffer__`` attribute in `numpy.frombuffer`</h1>
               <p>Looking up         <code class='verbatim'>__buffer__</code>
 attribute in <code><a href="/p/numpy/*/api/numpy.frombuffer.html" class='exists'>numpy.frombuffer</a></code>
 was undocumented and non-functional. This code was removed. If needed, use         <code class='verbatim'>frombuffer(memoryview(obj), ...)</code>
 instead.</p>


<h1>``out`` is buffered for memory overlaps in `take`, `choose`, `put`</h1>
               <p>If the out argument to these functions is provided and has memory overlap with the other arguments, it is now buffered to avoid order-dependent behavior.</p>


<h1>Unpickling while loading requires explicit opt-in</h1>
               <p>The functions <code class='not-implemented'>:None:None:`load`</code>, and         <code class='verbatim'>lib.format.read_array</code>
 take an         <code class='verbatim'>allow_pickle</code>
 keyword which now defaults to         <code class='verbatim'>False</code>
 in response to <a link href="https://nvd.nist.gov/vuln/detail/CVE-2019-6446" class='external'>CVE-2019-6446</a>.</p>

               <pre class='not-implemented'>
.. currentmodule:: numpy.random
    </pre>



<h1>Potential changes to the random stream in old random module</h1>
               <p>Due to bugs in the application of         <code class='verbatim'>log</code>
 to random floating point numbers, the stream may change when sampling from <code class='not-implemented'>:None:None:`~RandomState.beta`</code>, <code class='not-implemented'>:None:None:`~RandomState.binomial`</code>, <code class='not-implemented'>:None:None:`~RandomState.laplace`</code>, <code class='not-implemented'>:None:None:`~RandomState.logistic`</code>, <code class='not-implemented'>:None:None:`~RandomState.logseries`</code> or <code class='not-implemented'>:None:None:`~RandomState.multinomial`</code> if a         <code class='verbatim'>0</code>
 is generated in the underlying <code class='not-implemented'>:None:None:`MT19937`</code> random stream.  There is a         <code class='verbatim'>1</code>
 in         <span class="tex2jax_process">$10^{53}$</span>
 chance of this occurring, so the probability that the stream changes for any given seed is extremely small. If a         <code class='verbatim'>0</code>
 is encountered in the underlying generator, then the incorrect value produced (either <code class='not-implemented'>:None:None:`numpy.inf`</code> or <code class='not-implemented'>:None:None:`numpy.nan`</code>) is now dropped.</p>

               <pre class='not-implemented'>
.. currentmodule:: numpy
    </pre>



<h1>`i0` now always returns a result with the same shape as the input</h1>
               <p>Previously, the output was squeezed, such that, e.g., input with just a single element would lead to an array scalar being returned, and inputs with shapes such as         <code class='verbatim'>(10, 1)</code>
 would yield results that would not broadcast against the input.</p>

               <p>Note that we generally recommend the SciPy implementation over the numpy one: it is a proper ufunc written in C, and more than an order of magnitude faster.</p>


<h1>`can_cast` no longer assumes all unsafe casting is allowed</h1>
               <p>Previously, <code class='not-implemented'>:None:None:`can_cast`</code> returned <code class='not-implemented'>:None:None:`True`</code> for almost all inputs for         <code class='verbatim'>casting=&#39;unsafe&#39;</code>
, even for cases where casting was not possible, such as from a structured dtype to a regular one.  This has been fixed, making it more consistent with actual casting using, e.g., the <code class='not-implemented'>:None:None:`.astype &lt;ndarray.astype&gt;`</code> method.</p>


<h1>``ndarray.flags.writeable`` can be switched to true slightly more often</h1>
               <p>In rare cases, it was not possible to switch an array from not writeable to writeable, although a base array is writeable. This can happen if an intermediate <code class='not-implemented'>:None:None:`ndarray.base`</code> object is writeable. Previously, only the deepest base object was considered for this decision. However, in rare cases this object does not have the necessary information. In that case switching to writeable was never allowed. This has now been fixed.</p>


<h1>C API changes</h1>

<h1>dimension or stride input arguments are now passed by ``npy_intp const*``</h1>
               <p>Previously these function arguments were declared as the more strict         <code class='verbatim'>npy_intp*</code>
, which prevented the caller passing constant data. This change is backwards compatible, but now allows code like::      </p>

               <pre>npy_intp const fixed_dims[] = {1, 2, 3};
// no longer complains that the const-qualifier is discarded
npy_intp size = PyArray_MultiplyList(fixed_dims, 3);</pre>

<h1>New Features</h1>
               <pre class='not-implemented'>
.. currentmodule:: numpy.random
    </pre>



<h1>New extensible `numpy.random` module with selectable random number generators</h1>
               <p>A new extensible <code><a href="/p/numpy/*/api/numpy.random.html" class='exists'>numpy.random</a></code>
 module along with four selectable random number generators and improved seeding designed for use in parallel processes has been added. The currently available <code class='not-implemented'>:None:None:`Bit Generators`</code> are <code class='not-implemented'>:None:None:`~mt19937.MT19937`</code>, <code class='not-implemented'>:None:None:`~pcg64.PCG64`</code>, <code class='not-implemented'>:None:None:`~philox.Philox`</code>, and <code class='not-implemented'>:None:None:`~sfc64.SFC64`</code>.         <code class='verbatim'>PCG64</code>
 is the new default while         <code class='verbatim'>MT19937</code>
 is retained for backwards compatibility. Note that the legacy random module is unchanged and is now frozen, your current results will not change. More information is available in the         <code class='verbatim'>API change description &lt;new-or-different&gt;</code>
 and in the <code class='not-implemented'>:None:None:`top-level view
&lt;numpy.random&gt;`</code> documentation.</p>

               <pre class='not-implemented'>
.. currentmodule:: numpy
    </pre>



<h1>libFLAME</h1>
               <p>Support for building NumPy with the libFLAME linear algebra package as the LAPACK, implementation, see <a link href="https://www.cs.utexas.edu/~flame/web/libFLAME.html" class='external'>libFLAME</a> for details.</p>


<h1>User-defined BLAS detection order</h1>
               <p><code><a href="/p/distutils/*/api/distutils.html" class='exists'>distutils</a></code>
 now uses an environment variable, comma-separated and case insensitive, to determine the detection order for BLAS libraries. By default         <code class='verbatim'>NPY_BLAS_ORDER=mkl,blis,openblas,atlas,accelerate,blas</code>
. However, to force the use of OpenBLAS simply do::     </p>

               <pre>NPY_BLAS_ORDER=openblas python setup.py build</pre>
               <p>which forces the use of OpenBLAS. This may be helpful for users which have a MKL installation but wishes to try out different implementations.</p>


<h1>User-defined LAPACK detection order</h1>
               <p>        <code class='verbatim'>numpy.distutils</code>
 now uses an environment variable, comma-separated and case insensitive, to determine the detection order for LAPACK libraries. By default         <code class='verbatim'>NPY_LAPACK_ORDER=mkl,openblas,flame,atlas,accelerate,lapack</code>
. However, to force the use of OpenBLAS simply do::     </p>

               <pre>NPY_LAPACK_ORDER=openblas python setup.py build</pre>
               <p>which forces the use of OpenBLAS. This may be helpful for users which have a MKL installation but wishes to try out different implementations.</p>


<h1>`ufunc.reduce` and related functions now accept a ``where`` mask</h1>
               <p><code class='not-implemented'>:None:None:`ufunc.reduce`</code>, <code class='not-implemented'>:None:None:`sum`</code>, <code class='not-implemented'>:None:None:`prod`</code>, <code class='not-implemented'>:None:None:`min`</code>, <code class='not-implemented'>:None:None:`max`</code> all now accept a         <code class='verbatim'>where</code>
 keyword argument, which can be used to tell which elements to include in the reduction.  For reductions that do not have an identity, it is necessary to also pass in an initial value (e.g.,         <code class='verbatim'>initial=np.inf</code>
 for <code class='not-implemented'>:None:None:`min`</code>).  For instance, the equivalent of <code class='not-implemented'>:None:None:`nansum`</code> would be         <code class='verbatim'>np.sum(a, where=~np.isnan(a))</code>
.</p>


<h1>Timsort and radix sort have replaced mergesort for stable sorting</h1>
               <p>Both radix sort and timsort have been implemented and are now used in place of mergesort. Due to the need to maintain backward compatibility, the sorting         <code class='verbatim'>kind</code>
 options         <code class='verbatim'>&#34;stable&#34;</code>
 and         <code class='verbatim'>&#34;mergesort&#34;</code>
 have been made aliases of each other with the actual sort implementation depending on the array type. Radix sort is used for small integer types of 16 bits or less and timsort for the remaining types.  Timsort features improved performance on data containing already or nearly sorted data and performs like mergesort on random data and requires         <span class="tex2jax_process">$O(n/2)$</span>
 working space.  Details of the timsort algorithm can be found at <code class='not-implemented'>:None:None:`CPython listsort.txt
&lt;https://github.com/python/cpython/blob/3.7/Objects/listsort.txt&gt;`</code>.</p>


<h1>`packbits` and `unpackbits` accept an ``order`` keyword</h1>
               <p>The         <code class='verbatim'>order</code>
 keyword defaults to         <code class='verbatim'>big</code>
, and will order the <strong>bits</strong> accordingly. For         <code class='verbatim'>&#39;order=big&#39;</code>
 3 will become         <code class='verbatim'>[0, 0, 0, 0, 0, 0, 1, 1]</code>
, and         <code class='verbatim'>[1, 1, 0, 0, 0, 0, 0, 0]</code>
 for         <code class='verbatim'>order=little</code>
</p>


<h1>`unpackbits` now accepts a ``count`` parameter</h1>
               <p>        <code class='verbatim'>count</code>
 allows subsetting the number of bits that will be unpacked up-front, rather than reshaping and subsetting later, making the <code class='not-implemented'>:None:None:`packbits`</code> operation invertible, and the unpacking less wasteful. Counts larger than the number of available bits add zero padding. Negative counts trim bits off the end instead of counting from the beginning. None counts implement the existing behavior of unpacking everything.</p>


<h1>`linalg.svd` and `linalg.pinv` can be faster on hermitian inputs</h1>
               <p>These functions now accept a         <code class='verbatim'>hermitian</code>
 argument, matching the one added to <code class='not-implemented'>:None:None:`linalg.matrix_rank`</code> in 1.14.0.</p>


<h1>divmod operation is now supported for two ``timedelta64`` operands</h1>
               <p>The divmod operator now handles two         <code class='verbatim'>timedelta64</code>
 operands, with type signature         <code class='verbatim'>mm-&gt;qm</code>
.</p>


<h1>`fromfile` now takes an ``offset`` argument</h1>
               <p>This function now takes an         <code class='verbatim'>offset</code>
 keyword argument for binary files, which specifics the offset (in bytes) from the file&#39;s current position. Defaults to         <code class='verbatim'>0</code>
.</p>


<h1>New mode &#34;empty&#34; for `pad`</h1>
               <p>This mode pads an array to a desired shape without initializing the new entries.</p>


<h1>`empty_like` and related functions now accept a ``shape`` argument</h1>
               <p><code class='not-implemented'>:None:None:`empty_like`</code>, <code class='not-implemented'>:None:None:`full_like`</code>, <code class='not-implemented'>:None:None:`ones_like`</code> and <code class='not-implemented'>:None:None:`zeros_like`</code> now accept a         <code class='verbatim'>shape</code>
 keyword argument, which can be used to create a new array as the prototype, overriding its shape as well. This is particularly useful when combined with the         <code class='verbatim'>__array_function__</code>
 protocol, allowing the creation of new arbitrary-shape arrays from NumPy-like libraries when such an array is used as the prototype.</p>


<h1>Floating point scalars implement ``as_integer_ratio`` to match the builtin float</h1>
               <p>This returns a (numerator, denominator) pair, which can be used to construct a <code><a href="/p/fractions/*/api/fractions.Fraction.html" class='exists'>fractions.Fraction</a></code>
.</p>


<h1>Structured ``dtype`` objects can be indexed with multiple fields names</h1>
               <p>        <code class='verbatim'>arr.dtype[[&#39;a&#39;, &#39;b&#39;]]</code>
 now returns a dtype that is equivalent to         <code class='verbatim'>arr[[&#39;a&#39;, &#39;b&#39;]].dtype</code>
, for consistency with         <code class='verbatim'>arr.dtype[&#39;a&#39;] == arr[&#39;a&#39;].dtype</code>
.</p>

               <p>Like the dtype of structured arrays indexed with a list of fields, this dtype has the same         <code class='verbatim'>itemsize</code>
 as the original, but only keeps a subset of the fields.</p>

               <p>This means that         <code class='verbatim'>arr[[&#39;a&#39;, &#39;b&#39;]]</code>
 and         <code class='verbatim'>arr.view(arr.dtype[[&#39;a&#39;, &#39;b&#39;]])</code>
 are equivalent.</p>


<h1>``.npy`` files support unicode field names</h1>
               <p>A new format version of 3.0 has been introduced, which enables structured types with non-latin1 field names. This is used automatically when needed.</p>


<h1>Improvements</h1>

<h1>Array comparison assertions include maximum differences</h1>
               <p>Error messages from array comparison tests such as <code class='not-implemented'>:None:None:`testing.assert_allclose`</code> now include &#34;max absolute difference&#34; and &#34;max relative difference,&#34; in addition to the previous &#34;mismatch&#34; percentage. This information makes it easier to update absolute and relative error tolerances.</p>


<h1>Replacement of the fftpack based `fft` module by the pocketfft library</h1>
               <p>Both implementations have the same ancestor (Fortran77 FFTPACK by Paul N. Swarztrauber), but pocketfft contains additional modifications which improve both accuracy and performance in some circumstances. For FFT lengths containing large prime factors, pocketfft uses Bluestein&#39;s algorithm, which maintains         <span class="tex2jax_process">$O(N log N)$</span>
 run time complexity instead of deteriorating towards         <span class="tex2jax_process">$O(N*N)$</span>
 for prime lengths. Also, accuracy for real valued FFTs with near prime lengths has improved and is on par with complex valued FFTs.</p>


<h1>Further improvements to ``ctypes`` support in `numpy.ctypeslib`</h1>
               <p>A new <code><a href="/p/numpy/*/api/numpy.ctypeslib.as_ctypes_type.html" class='exists'>numpy.ctypeslib.as_ctypes_type</a></code>
 function has been added, which can be used to converts a <code class='not-implemented'>:None:None:`dtype`</code> into a best-guess <code><a href="/p/ctypes/*/api/ctypes.html" class='exists'>ctypes</a></code>
 type. Thanks to this new function, <code><a href="/p/numpy/*/api/numpy.ctypeslib.as_ctypes.html" class='exists'>numpy.ctypeslib.as_ctypes</a></code>
 now supports a much wider range of array types, including structures, booleans, and integers of non-native endianness.</p>


<h1>`numpy.errstate` is now also a function decorator</h1>
               <p>Currently, if you have a function like::      </p>

               <pre>def foo():
    pass</pre>
               <p>and you want to wrap the whole thing in <code class='not-implemented'>:None:None:`errstate`</code>, you have to rewrite it like so::      </p>

               <pre>def foo():
    with np.errstate(...):
        pass</pre>
               <p>but with this change, you can do::      </p>

               <pre>@np.errstate(...)
def foo():
    pass</pre>
               <p>thereby saving a level of indentation</p>


<h1>`numpy.exp` and `numpy.log` speed up for float32 implementation</h1>
               <p>float32 implementation of <code class='not-implemented'>:None:None:`exp`</code> and <code class='not-implemented'>:None:None:`log`</code> now benefit from AVX2/AVX512 instruction set which are detected during runtime. <code class='not-implemented'>:None:None:`exp`</code> has a max ulp error of 2.52 and <code class='not-implemented'>:None:None:`log`</code> has a max ulp error or 3.83.</p>


<h1>Improve performance of `numpy.pad`</h1>
               <p>The performance of the function has been improved for most cases by filling in a preallocated array with the desired padded shape instead of using concatenation.</p>


<h1>`numpy.interp` handles infinities more robustly</h1>
               <p>In some cases where <code class='not-implemented'>:None:None:`interp`</code> would previously return <code class='not-implemented'>:None:None:`nan`</code>, it now returns an appropriate infinity.</p>


<h1>Pathlib support for `fromfile`, `tofile` and `ndarray.dump`</h1>
               <p><code class='not-implemented'>:None:None:`fromfile`</code>, <code class='not-implemented'>:None:None:`ndarray.ndarray.tofile`</code> and <code class='not-implemented'>:None:None:`ndarray.dump`</code> now support the <code><a href="/p/pathlib/*/api/pathlib.Path.html" class='exists'>pathlib.Path</a></code>
 type for the         <code class='verbatim'>file</code>
/        <code class='verbatim'>fid</code>
 parameter.</p>


<h1>Specialized `isnan`, `isinf`, and `isfinite` ufuncs for bool and int types</h1>
               <p>The boolean and integer types are incapable of storing <code class='not-implemented'>:None:None:`nan`</code> and <code class='not-implemented'>:None:None:`inf`</code> values, which allows us to provide specialized ufuncs that are up to 250x faster than the previous approach.</p>


<h1>`isfinite` supports ``datetime64`` and ``timedelta64`` types</h1>
               <p>Previously, <code class='not-implemented'>:None:None:`isfinite`</code> used to raise a <code class='not-implemented'>:None:None:`TypeError`</code> on being used on these two types.</p>


<h1>New keywords added to `nan_to_num`</h1>
               <p><code class='not-implemented'>:None:None:`nan_to_num`</code> now accepts keywords         <code class='verbatim'>nan</code>
,         <code class='verbatim'>posinf</code>
 and         <code class='verbatim'>neginf</code>
 allowing the user to define the value to replace the         <code class='verbatim'>nan</code>
, positive and negative         <code class='verbatim'>np.inf</code>
 values respectively.</p>


<h1>MemoryErrors caused by allocated overly large arrays are more descriptive</h1>
               <p>Often the cause of a MemoryError is incorrect broadcasting, which results in a very large and incorrect shape. The message of the error now includes this shape to help diagnose the cause of failure.</p>


<h1>`floor`, `ceil`, and `trunc` now respect builtin magic methods</h1>
               <p>These ufuncs now call the         <code class='verbatim'>__floor__</code>
,         <code class='verbatim'>__ceil__</code>
, and         <code class='verbatim'>__trunc__</code>
 methods when called on object arrays, making them compatible with <code><a href="/p/decimal/*/api/decimal.Decimal.html" class='exists'>decimal.Decimal</a></code>
 and <code><a href="/p/fractions/*/api/fractions.Fraction.html" class='exists'>fractions.Fraction</a></code>
 objects.</p>


<h1>`quantile` now works on `fraction.Fraction` and `decimal.Decimal` objects</h1>
               <p>In general, this handles object arrays more gracefully, and avoids floating- point operations if exact arithmetic types are used.</p>


<h1>Support of object arrays in `matmul`</h1>
               <p>It is now possible to use <code class='not-implemented'>:None:None:`matmul`</code> (or the         <code class='verbatim'>@</code>
 operator) with object arrays. For instance, it is now possible to do::      </p>

               <pre>from fractions import Fraction
a = np.array([[Fraction(1, 2), Fraction(1, 3)], [Fraction(1, 3), Fraction(1, 2)]])
b = a @ a</pre>

<h1>Changes</h1>

<h1>`median` and `percentile` family of functions no longer warn about ``nan``</h1>
               <p><code><a href="/p/numpy/*/api/numpy.median.html" class='exists'>numpy.median</a></code>
, <code><a href="/p/numpy/*/api/numpy.percentile.html" class='exists'>numpy.percentile</a></code>
, and <code><a href="/p/numpy/*/api/numpy.quantile.html" class='exists'>numpy.quantile</a></code>
 used to emit a         <code class='verbatim'>RuntimeWarning</code>
 when encountering an <code class='not-implemented'>:None:None:`nan`</code>. Since they return the         <code class='verbatim'>nan</code>
 value, the warning is redundant and has been removed.</p>


<h1>``timedelta64 % 0`` behavior adjusted to return ``NaT``</h1>
               <p>The modulus operation with two         <code class='verbatim'>np.timedelta64</code>
 operands now returns         <code class='verbatim'>NaT</code>
 in the case of division by zero, rather than returning zero</p>


<h1>NumPy functions now always support overrides with ``__array_function__``</h1>
               <p>NumPy now always checks the         <code class='verbatim'>__array_function__</code>
 method to implement overrides of NumPy functions on non-NumPy arrays, as described in <code class='not-implemented'>:None:None:`NEP 18`</code>. The feature was available for testing with NumPy 1.16 if appropriate environment variables are set, but is now always enabled.</p>

               <!-- deflist -->
           <dl>
               <dt><p>        <pre class='not-implemented'>&lt;Unimplemented &#39;inline_target&#39; &#39;_`NEP 18`&#39;&gt;</pre>
</p>
</dt>
               <dd><p>        <pre class='not-implemented'>&lt;Unimplemented &#39;inline_target&#39; &#39;_`NEP 18`&#39;&gt;</pre>
</p>
</dd>
               <dt><p>* Using &#34;unsafe&#34; casting by default when an         <code class='verbatim'>out</code>
 argument is passed. Using</p>
</dt>
               <dd><p>        <code class='verbatim'>casting=&#34;unsafe&#34;</code>
 explicitly will silence this warning.</p>
</dd>
           </dl>

               <p>Additionally, there are some corner cases with behavior changes:</p>

                          <ul>               <li>               <p>Padding         <code class='verbatim'>max &lt; min</code>
 has changed to be more consistent across dtypes, but</p>

</li>
            </ul>

               <p>should not be relied upon. * Scalar         <code class='verbatim'>min</code>
 and         <code class='verbatim'>max</code>
 take part in promotion rules like they do in all   other ufuncs.</p>


<h1>``__array_interface__`` offset now works as documented</h1>
               <p>The interface may use an         <code class='verbatim'>offset</code>
 value that was mistakenly ignored.</p>


<h1>Pickle protocol in `savez` set to 3 for ``force zip64`` flag</h1>
               <p><code class='not-implemented'>:None:None:`savez`</code> was not using the         <code class='verbatim'>force_zip64</code>
 flag, which limited the size of the archive to 2GB. But using the flag requires us to use pickle protocol 3 to write         <code class='verbatim'>object</code>
 arrays. The protocol used was bumped to 3, meaning the archive will be unreadable by Python2.</p>


<h1>Structured arrays indexed with non-existent fields raise ``KeyError`` not ``ValueError``</h1>
               <p>        <code class='verbatim'>arr[&#39;bad_field&#39;]</code>
 on a structured type raises         <code class='verbatim'>KeyError</code>
, for consistency with         <code class='verbatim'>dict[&#39;bad_field&#39;]</code>
.</p>


<h3 id="section-Examples">Examples</h3>
         See :
    


<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    GitHub : <a class='external' href='https://github.com/numpy/numpy/blob/v1.22.3/None#LNone'>None#None</a>
<br/>

type: None <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>