<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=numpy>numpy</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/numpy/1.22.4/api/numpy'>1.22.4</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/numpy/1.22.4/api/numpy">1.22.4</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/numpy/1.22.4/api/numpy'>docs</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/numpy/1.22.4/api/numpy">API</a>
                        <a href="/p/numpy/1.22.4/gallery">Gallery</a>
                        <a href="/p/numpy/1.22.4/examples">Examples</a>
                        <a href="/p/numpy/1.22.4/docs">Narrative</a>
                     </div>
                </div>

</nav>
    </header>
    <div class='container'>

    <div class="sidenav">
        <img src="/p/numpy/1.22.4/img/numpy_logo.png"/>
    <a href="#">numpy</a>
    <a href="#">1.22.4</a>
        <a class='external'  href="https://pypi.org/project/numpy">Pypi</a>
        <a class='external' href="https://github.com/numpy/numpy">GitHub</a>
        <a class='external' href="https://numpy.org/">Homepage</a>
    <hr/>
        <a class='external' href="https://numpy.org/doc/1.22/">Other Docs</a>
    <hr/>
    </div><!--end sidenav-->







<h1>Using F2PY</h1>
               <p>This page contains a reference to all command-line options for the         <code class='verbatim'>f2py</code>
 command, as well as a reference to internal functions of the         <code class='verbatim'>numpy.f2py</code>
 module.</p>


<h2>Using ``f2py`` as a command-line tool</h2>
               <p>When used as a command-line tool,         <code class='verbatim'>f2py</code>
 has three major modes, distinguished by the usage of         <code class='verbatim'>-c</code>
 and         <code class='verbatim'>-h</code>
 switches.</p>

                          <ol>               <li>               <p>Signature file generation</p>

</li>
            </ol>

                        <hr/>


               <p>To scan Fortran sources and generate a signature file, use</p>

               <pre class='not-implemented'>
.. code-block:: sh
    f2py -h &lt;filename.pyf&gt; &lt;options&gt; &lt;fortran files&gt;   \
      [[ only: &lt;fortran functions&gt;  : ]                \
        [ skip: &lt;fortran functions&gt;  : ]]...           \
      [&lt;fortran files&gt; ...]</pre>


                           <div class='admonition'>
    <div>note</div>
        <p>A Fortran source file can contain many routines, and it is often not necessary to allow all routines to be usable from Python. In such cases, either specify which routines should be wrapped (in the         <code class='verbatim'>only: .. :</code>
 part) or which routines F2PY should ignore (in the         <code class='verbatim'>skip: .. :</code>
 part).</p>

</div>


               <p>If         <code class='verbatim'>&lt;filename.pyf&gt;</code>
 is specified as         <code class='verbatim'>stdout</code>
, then signatures are written to standard output instead of a file.</p>

               <p>Among other options (see below), the following can be used in this mode:</p>

                           <blockquote><!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>--overwrite-signature</code>
</p>
</dt>
               <dd><p>Overwrites an existing signature file.</p>
</dd>
           </dl>
</blockquote>

                          <ol>               <li>               <p>Extension module construction</p>

</li>
            </ol>

                        <hr/>


               <p>To construct an extension module, use</p>

               <pre class='not-implemented'>
.. code-block:: sh
    f2py -m &lt;modulename&gt; &lt;options&gt; &lt;fortran files&gt;   \
      [[ only: &lt;fortran functions&gt;  : ]              \
        [ skip: &lt;fortran functions&gt;  : ]]...          \
      [&lt;fortran files&gt; ...]</pre>


               <p>The constructed extension module is saved as         <code class='verbatim'>&lt;modulename&gt;module.c</code>
 to the current directory.</p>

               <p>Here         <code class='verbatim'>&lt;fortran files&gt;</code>
 may also contain signature files. Among other options (see below), the following options can be used in this mode:</p>

                           <blockquote><!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>--debug-capi</code>
</p>
</dt>
               <dd><p>Adds debugging hooks to the extension module. When using this extension     module, various diagnostic information about the wrapper is written to the     standard output, for example, the values of variables, the steps taken, etc.</p>
</dd>
               <dt><p>        <code class='verbatim'>-include&#39;&lt;includefile&gt;&#39;</code>
</p>
</dt>
               <dd><p>Add a CPP         <code class='verbatim'>#include</code>
 statement to the extension module source.             <code class='verbatim'>&lt;includefile&gt;</code>
 should be given in one of the following forms</p>
<pre class='not-implemented'>
.. code-block:: cpp
    &#34;filename.ext&#34;
        &lt;filename.ext&gt;</pre>

<p>The include statement is inserted just before the wrapper functions. This     feature enables using arbitrary C functions (defined in         <code class='verbatim'>&lt;includefile&gt;</code>
)     in F2PY generated wrappers.</p>
            <div class='admonition'>
    <div>note</div>
        <p>C code snippets directly in signature files.</p>

</div>

</dd>
               <dt><p>        <code class='verbatim'>--[no-]wrap-functions</code>
</p>
</dt>
               <dd><p>Create Fortran subroutine wrappers to Fortran functions.             <code class='verbatim'>--wrap-functions</code>
 is default because it ensures maximum portability and     compiler independence.</p>
</dd>
               <dt><p>        <code class='verbatim'>--include-paths &lt;path1&gt;:&lt;path2&gt;:..</code>
</p>
</dt>
               <dd><p>Search include files from given directories.</p>
</dd>
               <dt><p>        <code class='verbatim'>--help-link [&lt;list of resources names&gt;]</code>
</p>
</dt>
               <dd><p>List system resources found by         <code class='verbatim'>numpy_distutils/system_info.py</code>
. For     example, try         <code class='verbatim'>f2py --help-link lapack_opt</code>
.</p>
</dd>
           </dl>
</blockquote>

                          <ol>               <li>               <p>Building a module</p>

</li>
            </ol>

                        <hr/>


               <p>To build an extension module, use</p>

               <pre class='not-implemented'>
.. code-block:: sh
    f2py -c &lt;options&gt; &lt;fortran files&gt;       \
      [[ only: &lt;fortran functions&gt;  : ]     \
        [ skip: &lt;fortran functions&gt;  : ]]... \
      [ &lt;fortran/c source files&gt; ] [ &lt;.o, .a, .so files&gt; ]</pre>


               <p>If         <code class='verbatim'>&lt;fortran files&gt;</code>
 contains a signature file, then the source for an extension module is constructed, all Fortran and C sources are compiled, and finally all object and library files are linked to the extension module         <code class='verbatim'>&lt;modulename&gt;.so</code>
 which is saved into the current directory.</p>

               <p>If         <code class='verbatim'>&lt;fortran files&gt;</code>
 does not contain a signature file, then an extension module is constructed by scanning all Fortran source codes for routine signatures, before proceeding to build the extension module.</p>

               <p>Among other options (see below) and options described for previous modes, the following options can be used in this mode:</p>

                           <blockquote><!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>--help-fcompiler</code>
</p>
</dt>
               <dd><p>List the available Fortran compilers.</p>
</dd>
               <dt><p>        <code class='verbatim'>--help-compiler</code>
 <strong>[depreciated]</strong></p>
</dt>
               <dd><p>List the available Fortran compilers.</p>
</dd>
               <dt><p>        <code class='verbatim'>--fcompiler=&lt;Vendor&gt;</code>
</p>
</dt>
               <dd><p>Specify a Fortran compiler type by vendor.</p>
</dd>
               <dt><p>        <code class='verbatim'>--f77exec=&lt;path&gt;</code>
</p>
</dt>
               <dd><p>Specify the path to a F77 compiler</p>
</dd>
               <dt><p>        <code class='verbatim'>--fcompiler-exec=&lt;path&gt;</code>
 <strong>[depreciated]</strong></p>
</dt>
               <dd><p>Specify the path to a F77 compiler</p>
</dd>
               <dt><p>        <code class='verbatim'>--f90exec=&lt;path&gt;</code>
</p>
</dt>
               <dd><p>Specify the path to a F90 compiler</p>
</dd>
               <dt><p>        <code class='verbatim'>--f90compiler-exec=&lt;path&gt;</code>
 <strong>[depreciated]</strong></p>
</dt>
               <dd><p>Specify the path to a F90 compiler</p>
</dd>
               <dt><p>        <code class='verbatim'>--f77flags=&lt;string&gt;</code>
</p>
</dt>
               <dd><p>Specify F77 compiler flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--f90flags=&lt;string&gt;</code>
</p>
</dt>
               <dd><p>Specify F90 compiler flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--opt=&lt;string&gt;</code>
</p>
</dt>
               <dd><p>Specify optimization flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--arch=&lt;string&gt;</code>
</p>
</dt>
               <dd><p>Specify architecture specific optimization flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--noopt</code>
</p>
</dt>
               <dd><p>Compile without optimization flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--noarch</code>
</p>
</dt>
               <dd><p>Compile without arch-dependent optimization flags</p>
</dd>
               <dt><p>        <code class='verbatim'>--debug</code>
</p>
</dt>
               <dd><p>Compile with debugging information</p>
</dd>
               <dt><p>        <code class='verbatim'>-l&lt;libname&gt;</code>
</p>
</dt>
               <dd><p>Use the library         <code class='verbatim'>&lt;libname&gt;</code>
 when linking.</p>
</dd>
               <dt><p>        <code class='verbatim'>-D&lt;macro&gt;[=&lt;defn=1&gt;]</code>
</p>
</dt>
               <dd><p>Define macro         <code class='verbatim'>&lt;macro&gt;</code>
 as         <code class='verbatim'>&lt;defn&gt;</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>-U&lt;macro&gt;</code>
</p>
</dt>
               <dd><p>Define macro         <code class='verbatim'>&lt;macro&gt;</code>
</p>
</dd>
               <dt><p>        <code class='verbatim'>-I&lt;dir&gt;</code>
</p>
</dt>
               <dd><p>Append directory         <code class='verbatim'>&lt;dir&gt;</code>
 to the list of directories searched for include     files.</p>
</dd>
               <dt><p>        <code class='verbatim'>-L&lt;dir&gt;</code>
</p>
</dt>
               <dd><p>Add directory         <code class='verbatim'>&lt;dir&gt;</code>
 to the list of directories to be searched for             <code class='verbatim'>-l</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>link-&lt;resource&gt;</code>
</p>
</dt>
               <dd><p>Link the extension module with &lt;resource&gt; as defined by             <code class='verbatim'>numpy_distutils/system_info.py</code>
. E.g. to link with optimized LAPACK     libraries (vecLib on MacOSX, ATLAS elsewhere), use         <code class='verbatim'>--link-lapack_opt</code>
.     See also         <code class='verbatim'>--help-link</code>
 switch.</p>
</dd>
           </dl>
</blockquote>

                           <div class='admonition'>
    <div>note</div>
        <p>The         <code class='verbatim'>f2py -c</code>
 option must be applied either to an existing         <code class='verbatim'>.pyf</code>
 file (plus the source/object/library files) or one must specify the         <code class='verbatim'>-m &lt;modulename&gt;</code>
 option (plus the sources/object/library files). Use one of the following options:</p>

        <pre class='not-implemented'>
.. code-block:: sh
    f2py -c -m fib1 fib1.f</pre>


        <p>or</p>

        <pre class='not-implemented'>
.. code-block:: sh
    f2py -m fib1 fib1.f -h fib1.pyf
    f2py -c fib1.pyf fib1.f</pre>


        <p>For more information, see the <code class='not-implemented'>:None:None:`Building C and C++ Extensions`</code> Python documentation for details.</p>

                    <blockquote>           <pre class='not-implemented'>
            &lt;Unimplemented &#39;target&#39; &#39;__ https://docs.python.org/3/extending/building.html&#39;&gt;
           </pre>
</blockquote>

</div>


               <p>When building an extension module, a combination of the following macros may be required for non-gcc Fortran compilers:</p>

               <pre class='not-implemented'>
.. code-block:: sh
    -DPREPEND_FORTRAN
    -DNO_APPEND_FORTRAN
    -DUPPERCASE_FORTRAN</pre>


               <p>To test the performance of F2PY generated interfaces, use         <code class='verbatim'>-DF2PY_REPORT_ATEXIT</code>
. Then a report of various timings is printed out at the exit of Python. This feature may not work on all platforms, and currently only Linux is supported.</p>

               <p>To see whether F2PY generated interface performs copies of array arguments, use         <code class='verbatim'>-DF2PY_REPORT_ON_ARRAY_COPY=&lt;int&gt;</code>
. When the size of an array argument is larger than         <code class='verbatim'>&lt;int&gt;</code>
, a message about the copying is sent to         <code class='verbatim'>stderr</code>
.</p>


<h3>Other options</h3>
                           <blockquote><!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>-m &lt;modulename&gt;</code>
</p>
</dt>
               <dd><p>Name of an extension module. Default is         <code class='verbatim'>untitled</code>
.</p>
</dd>
           </dl>
            <div class='admonition'>
    <div>warning</div>
</div>

<!-- deflist -->
           <dl>
               <dt><p>        <code class='verbatim'>--[no-]lower</code>
</p>
</dt>
               <dd><p>Do [not] lower the cases in         <code class='verbatim'>&lt;fortran files&gt;</code>
. By default,         <code class='verbatim'>--lower</code>
 is     assumed with         <code class='verbatim'>-h</code>
 switch, and         <code class='verbatim'>--no-lower</code>
 without the         <code class='verbatim'>-h</code>
 switch.</p>
</dd>
               <dt><p>        <code class='verbatim'>-include&lt;header&gt;</code>
</p>
</dt>
               <dd><p>Writes additional headers in the C wrapper, can be passed multiple times,     generates #include &lt;header&gt; each time. Note that this is meant to be passed     in single quotes and without spaces, for example         <code class='verbatim'>&#39;-include&lt;stdbool.h&gt;&#39;</code>
</p>
</dd>
               <dt><p>        <code class='verbatim'>--build-dir &lt;dirname&gt;</code>
</p>
</dt>
               <dd><p>All F2PY generated files are created in         <code class='verbatim'>&lt;dirname&gt;</code>
. Default is             <code class='verbatim'>tempfile.mkdtemp()</code>
.</p>
</dd>
               <dt><p>        <code class='verbatim'>--quiet</code>
</p>
</dt>
               <dd><p>Run quietly.</p>
</dd>
               <dt><p>        <code class='verbatim'>--verbose</code>
</p>
</dt>
               <dd><p>Run with extra verbosity.</p>
</dd>
               <dt><p>        <code class='verbatim'>--skip-empty-wrappers</code>
</p>
</dt>
               <dd><p>Do not generate wrapper files unless required by the inputs.     This is a backwards compatibility flag to restore pre 1.22.4 behavior.</p>
</dd>
               <dt><p>        <code class='verbatim'>-v</code>
</p>
</dt>
               <dd><p>Print the F2PY version and exit.</p>
</dd>
           </dl>
</blockquote>

               <p>Execute         <code class='verbatim'>f2py</code>
 without any options to get an up-to-date list of available options.</p>


<h2>Python module ``numpy.f2py``</h2>
               <p>The f2py program is written in Python and can be run from inside your code to compile Fortran code at runtime, as follows:</p>

               <pre class='not-implemented'>
.. code-block:: python
    from numpy import f2py
    with open(&#34;add.f&#34;) as sourcefile:
        sourcecode = sourcefile.read()
    f2py.compile(sourcecode, modulename=&#39;add&#39;)
    import add</pre>


               <p>The source string can be any valid Fortran code. If you want to save the extension-module source code then a suitable file-name can be provided by the         <code class='verbatim'>source_fn</code>
 keyword to the compile function.</p>

               <p>When using         <code class='verbatim'>numpy.f2py</code>
 as a module, the following functions can be invoked.</p>

                           <div class='admonition'>
    <div>warning</div>
        <p>The current Python interface to the         <code class='verbatim'>f2py</code>
 module is not mature and may change in the future.</p>

</div>


               <pre class='not-implemented'>
.. automodule:: numpy.f2py
    [&#39;members&#39;, &#39;&#39;]
    </pre>



<h2>Automatic extension module generation</h2>
               <p>If you want to distribute your f2py extension module, then you only need to include the .pyf file and the Fortran code. The distutils extensions in NumPy allow you to define an extension module entirely in terms of this interface file. A valid         <code class='verbatim'>setup.py</code>
 file allowing distribution of the         <code class='verbatim'>add.f</code>
 module (as part of the package         <code class='verbatim'>f2py_examples</code>
 so that it would be loaded as         <code class='verbatim'>f2py_examples.add</code>
) is:</p>

               <pre class='not-implemented'>
.. code-block:: python
    def configuration(parent_package=&#39;&#39;, top_path=None)
        from numpy.distutils.misc_util import Configuration
        config = Configuration(&#39;f2py_examples&#39;,parent_package, top_path)
        config.add_extension(&#39;add&#39;, sources=[&#39;add.pyf&#39;,&#39;add.f&#39;])
        return config

    if __name__ == &#39;__main__&#39;:
        from numpy.distutils.core import setup
        setup(**configuration(top_path=&#39;&#39;).todict())</pre>


               <p>Installation of the new package is easy using:      </p>

               <pre>pip install .</pre>
               <p>assuming you have the proper permissions to write to the main site- packages directory for the version of Python you are using. For the resulting package to work, you need to create a file named         <code class='verbatim'>__init__.py</code>
 (in the same directory as         <code class='verbatim'>add.pyf</code>
). Notice the extension module is defined entirely in terms of the         <code class='verbatim'>add.pyf</code>
 and         <code class='verbatim'>add.f</code>
 files. The conversion of the .pyf file to a .c file is handled by <code><a href="/p/numpy/*/api/numpy.distutils.html" class='exists'>numpy.distutils</a></code>
.</p>


<h3 id="section-Examples">Examples</h3>
         See :
    


<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    GitHub : <a class='external' href='https://github.com/numpy/numpy/blob/v1.22.3/None#LNone'>None#None</a>
<br/>

type: None <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>