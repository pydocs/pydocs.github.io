<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=skimage>skimage</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/IPython/8.2.0/api/IPython.html">IPython</a>
<a href="/p/astropy/5.0/api/astropy.html">astropy</a>
<a href="/p/dask/2021.10.0/api/dask.html">dask</a>
<a href="/p/distributed/2021.10.0/api/distributed.html">distributed</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a>
<a href="/p/networkx/2.7.2rc1.dev0/api/networkx.html">networkx</a>
<a href="/p/numpy/1.22.3/api/numpy.html">numpy</a>
<a href="/p/pandas/1.4.1/api/pandas.html">pandas</a>
<a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
<a href="/p/scipy/1.8.0/api/scipy.html">scipy</a>
<a href="/p/skimage/0.17.2/api/skimage.html">skimage</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/skimage/0.17.2/api/skimage.html'>0.17.2</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/skimage/0.17.2/api/skimage.html">0.17.2</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/skimage/0.17.2/api/skimage.html'>API</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/skimage/0.17.2/api/skimage.html">API</a>
                        <a href="/p/skimage/0.17.2/gallery">Gallery</a>
                        <a href="/p/skimage/0.17.2/examples">Examples</a>
                        <a href="/p/skimage/0.17.2/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='skimage.html'>skimage</a>.                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='skimage.morphology.html'>morphology</a>.                            <div class="dropdown-content">
<a href="/p/skimage/0.17.2/api/skimage._raise_build_error.html">_raise_build_error</a>
<a href="/p/skimage/0.17.2/api/skimage._shared.html">_shared</a>
<a href="/p/skimage/0.17.2/api/skimage.color.html">color</a>
<a href="/p/skimage/0.17.2/api/skimage.data.html">data</a>
<a href="/p/skimage/0.17.2/api/skimage.draw.html">draw</a>
<a href="/p/skimage/0.17.2/api/skimage.exposure.html">exposure</a>
<a href="/p/skimage/0.17.2/api/skimage.feature.html">feature</a>
<a href="/p/skimage/0.17.2/api/skimage.filters.html">filters</a>
<a href="/p/skimage/0.17.2/api/skimage.graph.html">graph</a>
<a href="/p/skimage/0.17.2/api/skimage.io.html">io</a>
<a href="/p/skimage/0.17.2/api/skimage.measure.html">measure</a>
<a href="/p/skimage/0.17.2/api/skimage.metrics.html">metrics</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.html">morphology</a>
<a href="/p/skimage/0.17.2/api/skimage.restoration.html">restoration</a>
<a href="/p/skimage/0.17.2/api/skimage.segmentation.html">segmentation</a>
<a href="/p/skimage/0.17.2/api/skimage.transform.html">transform</a>
<a href="/p/skimage/0.17.2/api/skimage.util.html">util</a>
<a href="/p/skimage/0.17.2/api/skimage.viewer.html">viewer</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='skimage.morphology.greyreconstruct.html'>greyreconstruct</a>.                            <div class="dropdown-content">
<a href="/p/skimage/0.17.2/api/skimage.morphology._convex_hull.html">_convex_hull</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._deprecated.html">_deprecated</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._extrema_cy.html">_extrema_cy</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._flood_fill.html">_flood_fill</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._flood_fill_cy.html">_flood_fill_cy</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._max_tree.html">_max_tree</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._skeletonize.html">_skeletonize</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._skeletonize_cy.html">_skeletonize_cy</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology._util.html">_util</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.binary.html">binary</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.convex_hull.html">convex_hull</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.extrema.html">extrema</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.grey.html">grey</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.html">greyreconstruct</a>
<a href="/p/?/?/?/skimage.morphology.max_tree.html.html">max_tree</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.misc.html">misc</a>
<a href="/p/skimage/0.17.2/api/skimage.morphology.selem.html">selem</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='skimage.morphology.greyreconstruct.reconstruction.html'>reconstruction</a>                            <div class="dropdown-content">
<a href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.reconstruction.html">reconstruction</a>
                            </div>
                    </div><!--end dropdown-->
</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/skimage/0.17.2/img/skimage-logo.png"/>
    <a href="#">skimage</a>
    <a href="#">0.17.2</a>
    <hr/>
    <hr/>
<a href="#section-Notes">Notes</a><a href="#section-Parameters">Parameters</a><a href="#section-Returns">Returns</a><a href="#section-backrefs">BackRef</a>
    </div><!--end sidenav-->







<code class='signature'>reconstruction(seed, mask, method=&#39;dilation&#39;, selem=None, offset=None)</code><!-- rendering Extended Summary -->
                       <p>Morphological reconstruction by dilation is similar to basic morphological dilation: high-intensity values will replace nearby low-intensity values. The basic dilation operator, however, uses a structuring element to determine how far a value in the input image can spread. In contrast, reconstruction uses two images: a &#34;seed&#34; image, which specifies the values that spread, and a &#34;mask&#34; image, which gives the maximum allowed value at each pixel. The mask image, like the structuring element, limits the spread of high-intensity values. Reconstruction by erosion is simply the inverse: low-intensity values spread from the seed image and are limited by the mask image, which represents the minimum allowed value.</p>

               <p>Alternatively, you can think of reconstruction as a way to isolate the connected regions of an image. For dilation, reconstruction connects regions marked by local maxima in the seed image: neighboring pixels less-than-or-equal-to those seeds are connected to the seeded region. Local maxima with values larger than the seed image will get truncated to the seed value.</p>


<h3 id="section-Notes">Notes</h3>
<!-- rendering Notes -->
                       <p>The algorithm is taken from . Applications for greyscale reconstruction are discussed in  and .</p>


<h3 id="section-Parameters">Parameters</h3>
<dl>
<dt><a id="seed">seed</a> : ndarray</dt>
<dd>
<p>The seed image (a.k.a. marker image), which specifies the values that are dilated or eroded.</p>

</dd>
<dt><a id="mask">mask</a> : ndarray</dt>
<dd>
<p>The maximum (dilation) / minimum (erosion) allowed value at each pixel.</p>

</dd>
<dt><a id="method">method</a> : {&#39;dilation&#39;|&#39;erosion&#39;}, optional</dt>
<dd>
<p>Perform reconstruction by dilation or erosion. In dilation (or erosion), the seed image is dilated (or eroded) until limited by the mask image. For dilation, each seed value must be less than or equal to the corresponding mask value; for erosion, the reverse is true. Default is &#39;dilation&#39;.</p>

</dd>
<dt><a id="selem">selem</a> : ndarray, optional</dt>
<dd>
<p>The neighborhood expressed as an n-D array of 1&#39;s and 0&#39;s. Default is the n-D square of radius equal to 1 (i.e. a 3x3 square for 2D images, a 3x3x3 cube for 3D images, etc.)</p>

</dd>
<dt><a id="offset">offset</a> : ndarray, optional</dt>
<dd>
<p>The coordinates of the center of the structuring element. Default is located on the geometrical center of the selem, in that case selem dimensions must be odd.</p>

</dd>
</dl>

<h3 id="section-Returns">Returns</h3>
<dl>
<dt><a id="reconstructed">reconstructed</a> : ndarray</dt>
<dd>
<p>The result of morphological reconstruction.</p>

</dd>
</dl>

<!-- rendering Summary -->
                       <p>Perform a morphological reconstruction of an image.</p>


<h3 id="section-Examples">Examples</h3>
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">numpy</a><span class=""> </span><span class="k">as</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">np</a><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/skimage/0.17.2/api/skimage.html">skimage</a><span class="nn">.</span><a class="foo nn" href="/p/skimage/0.17.2/api/skimage.morphology.html">morphology</a><span class=""> </span><span class="kn">import</span><span class=""> </span><a class="foo " href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.reconstruction.html">reconstruction</a>
</pre>
            
                <p>First, we create a sinusoidal mask image with peaks at middle and ends.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><span class="">linspace</span><span class="">(</span><a class="foo mi" href="/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000.html">0</a><span class="">,</span><span class=""> </span><span class="mi">4</span><span class=""> </span><span class="o">*</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y_mask</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><a class="foo " href="/p/numpy/1.22.3/api/numpy.ufunc.html">cos</a><span class="">(</span><span class="">x</span><span class="">)</span>
</pre>
            
                <p>Then, we create a seed image initialized to the minimum mask value (for reconstruction by dilation, min-intensity values don&#39;t spread) and add &#34;seeds&#34; to the left and right peak, but at a fraction of peak value (1).</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">y_seed</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">y_mask</span><span class="o">.</span><span class="">min</span><span class="">(</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><span class="">ones_like</span><span class="">(</span><span class="">x</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">y_seed</span><span class="">[</span><a class="foo mi" href="/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000.html">0</a><span class="">]</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">0.5</span><br><span class='nsl'>...&nbsp;</span><span class="">y_seed</span><span class="">[</span><span class="o">-</span><span class="mi">1</span><span class="">]</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo mi" href="/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000.html">0</a><br><span class='nsl'>...&nbsp;</span><span class="">y_rec</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.reconstruction.html">reconstruction</a><span class="">(</span><span class="">y_seed</span><span class="">,</span><span class=""> </span><span class="">y_mask</span><span class="">)</span>
</pre>
            
                <p>The reconstructed image (or curve, in this case) is exactly the same as the mask image, except that the peaks are truncated to 0.5 and 0. The middle peak disappears completely: Since there were no seed values in this peak region, its reconstructed value is truncated to the surrounding value (-1).</p>

            
                <p>As a more practical example, we try to extract the bright features of an image by subtracting a background image created by reconstruction.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.ndarray.html">y</a><span class="">,</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><a class="foo " href="/p/numpy/1.22.3/api/numpy.lib.index_tricks.MGridClass.html">mgrid</a><span class="">[</span><span class="">:</span><a class="foo mi" href="/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000.html">20</a><span class="">:</span><span class="mf">0.5</span><span class="">,</span><span class=""> </span><span class="">:</span><a class="foo mi" href="/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000.html">20</a><span class="">:</span><span class="mf">0.5</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">bumps</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><a class="foo " href="/p/numpy/1.22.3/api/numpy.ufunc.html">sin</a><span class="">(</span><span class="">x</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><a class="foo " href="/p/numpy/1.22.3/api/numpy.html">np</a><span class="o">.</span><a class="foo " href="/p/numpy/1.22.3/api/numpy.ufunc.html">sin</a><span class="">(</span><a class="foo " href="/p/numpy/1.22.3/api/numpy.ndarray.html">y</a><span class="">)</span>
</pre>
            
                <p>To create the background image, set the mask image to the original image, and the seed image to the original image with an intensity offset, <code>:None:None:`h`</code>.</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">h</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">0.3</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/skimage/0.17.2/api/skimage.util._regular_grid.regular_seeds.html">seed</a><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">bumps</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="">h</span><br><span class='nsl'>...&nbsp;</span><span class="">background</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.reconstruction.html">reconstruction</a><span class="">(</span><a class="foo " href="/p/skimage/0.17.2/api/skimage.util._regular_grid.regular_seeds.html">seed</a><span class="">,</span><span class=""> </span><span class="">bumps</span><span class="">)</span>
</pre>
            
                <p>The resulting reconstructed image looks exactly like the original image, but with the peaks of the bumps cut off. Subtracting this reconstructed image from the original image leaves just the peaks of the bumps</p>

            
<span class='note'>This example is valid syntax, but we were not able to check execution</span><pre class='highlight compiled'><span class='nsl'>&gt;&gt;&gt; </span><span class="">hdome</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">bumps</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="">background</span>
</pre>
            
                <p>This operation is known as the h-dome of the image and leaves features of height <code>:None:None:`h`</code> in the subtracted image.</p>

            
         See :
    

    <h3 id='section-backrefs'>Back References</h3>
    <p>The following pages refer to to this document either explicitly or contain code examples using this.</p>

        <code><a link href="/p/skimage/0.17.2/api/skimage.morphology.greyreconstruct.reconstruction.html" class='exists'>skimage.morphology.greyreconstruct.reconstruction</a></code>

<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    File: /skimage/morphology/greyreconstruct.py#17
<br/>

type: &lt;class &#39;function&#39;&gt; <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {"nodes": [{"id": 1, "val": 14.403124237432849, "label": "skimage.morphology", "mod": "skimage", "url": "/p/skimage/0.17.2/api/skimage.morphology"}, {"id": 2, "val": 11.872983346207416, "label": "numpy.lib.index_tricks.MGridClass", "mod": "numpy", "url": "/p/numpy/1.22.3/api/numpy.lib.index_tricks.MGridClass"}, {"id": 3, "val": 18.0, "label": "skimage.color.delta_e.deltaE_ciede2000", "mod": "skimage", "url": "/p/skimage/0.17.2/api/skimage.color.delta_e.deltaE_ciede2000"}, {"id": 5, "val": 31.958297101421877, "label": "numpy.ndarray", "mod": "numpy", "url": "/p/numpy/1.22.3/api/numpy.ndarray"}, {"id": 6, "val": 45.57658845611187, "label": "numpy", "mod": "numpy", "url": "/p/numpy/1.22.3/api/numpy"}, {"id": 7, "val": 10.449489742783179, "label": "skimage.util._regular_grid.regular_seeds", "mod": "skimage", "url": "/p/skimage/0.17.2/api/skimage.util._regular_grid.regular_seeds"}, {"id": 8, "val": 20.688577540449522, "label": "numpy.ufunc", "mod": "numpy", "url": "/p/numpy/1.22.3/api/numpy.ufunc"}, {"id": 9, "val": 20.96148139681572, "label": "skimage", "mod": "skimage", "url": "/p/skimage/0.17.2/api/skimage"}], "links": []};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>