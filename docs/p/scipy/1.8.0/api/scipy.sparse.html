<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=scipy>scipy</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/IPython/8.2.0/api/IPython.html">IPython</a>
<a href="/p/astropy/5.0/api/astropy.html">astropy</a>
<a href="/p/dask/2021.10.0/api/dask.html">dask</a>
<a href="/p/distributed/2021.10.0/api/distributed.html">distributed</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a>
<a href="/p/networkx/2.7.2rc1.dev0/api/networkx.html">networkx</a>
<a href="/p/numpy/1.22.3/api/numpy.html">numpy</a>
<a href="/p/pandas/1.4.1/api/pandas.html">pandas</a>
<a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
<a href="/p/scipy/1.8.0/api/scipy.html">scipy</a>
<a href="/p/skimage/0.17.2/api/skimage.html">skimage</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/scipy/1.8.0/api/scipy.html'>1.8.0</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/scipy/1.8.0/api/scipy.html">1.8.0</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/scipy/1.8.0/api/scipy.html'>API</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/scipy/1.8.0/api/scipy.html">API</a>
                        <a href="/p/scipy/1.8.0/gallery">Gallery</a>
                        <a href="/p/scipy/1.8.0/examples">Examples</a>
                        <a href="/p/scipy/1.8.0/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='scipy.html'>scipy</a>.                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" href='scipy.sparse.html'>sparse</a>.                            <div class="dropdown-content">
<a href="/p/?/?/?/scipy._lib.html.html">_lib</a>
<a href="/p/scipy/1.8.0/api/scipy.fft.html">fft</a>
<a href="/p/scipy/1.8.0/api/scipy.integrate.html">integrate</a>
<a href="/p/scipy/1.8.0/api/scipy.interpolate.html">interpolate</a>
<a href="/p/scipy/1.8.0/api/scipy.linalg.html">linalg</a>
<a href="/p/scipy/1.8.0/api/scipy.misc.html">misc</a>
<a href="/p/?/?/?/scipy.ndimage.html.html">ndimage</a>
<a href="/p/scipy/1.8.0/api/scipy.optimize.html">optimize</a>
<a href="/p/scipy/1.8.0/api/scipy.signal.html">signal</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.html">sparse</a>
<a href="/p/scipy/1.8.0/api/scipy.spatial.html">spatial</a>
<a href="/p/scipy/1.8.0/api/scipy.special.html">special</a>
<a href="/p/?/?/?/scipy.stats.html.html">stats</a>
                            </div>
                    </div><!--end dropdown-->
                    <div class="dropdown">
                            <a class="dropbtn" >+</a>                            <div class="dropdown-content">
<a href="/p/scipy/1.8.0/api/scipy.sparse._arrays.html">_arrays</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._base.html">_base</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._bsr.html">_bsr</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._compressed.html">_compressed</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._construct.html">_construct</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._coo.html">_coo</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._csc.html">_csc</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._csparsetools.html">_csparsetools</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._csr.html">_csr</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._data.html">_data</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._dia.html">_dia</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._dok.html">_dok</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._extract.html">_extract</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._index.html">_index</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._lil.html">_lil</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._matrix_io.html">_matrix_io</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._sparsetools.html">_sparsetools</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse._sputils.html">_sputils</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.base.html">base</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.bsr.html">bsr</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.compressed.html">compressed</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.construct.html">construct</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.coo.html">coo</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.csc.html">csc</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.csgraph.html">csgraph</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.csr.html">csr</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.data.html">data</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.dia.html">dia</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.dok.html">dok</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.extract.html">extract</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.lil.html">lil</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.linalg.html">linalg</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.sparsetools.html">sparsetools</a>
<a href="/p/scipy/1.8.0/api/scipy.sparse.sputils.html">sputils</a>
                            </div>
                    </div><!--end dropdown-->
</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/scipy/1.8.0/img/scipy_logo.png"/>
    <a href="#">scipy</a>
    <a href="#">1.8.0</a>
        <a class='external'  href="https://pypi.org/project/scipy">Pypi</a>
        <a class='external' href="https://github.com/scipy/scipy">GitHub</a>
        <a class='external' href="https://scipy.org/">Homepage</a>
    <hr/>
        <a class='external' href="https://docs.scipy.org/doc/scipy/">Other Docs</a>
    <hr/>
    </div><!--end sidenav-->







<!-- rendering Extended Summary -->
        <!-- rendering Notes -->
        <!-- rendering Summary -->
                       <p>To remove in the future –– scipy.sparse</p>

<h1>Sparse matrices (:mod:`scipy.sparse`)</h1>
               <pre class='not-implemented'>
.. currentmodule:: scipy.sparse
    </pre>


               <p>SciPy 2-D sparse array package for numeric data.</p>

                           <div class='admonition'>
    <div>note</div>
        <p>This package is switching to an array interface, compatible with NumPy arrays, from the older matrix interface.  We recommend that you use the array objects (<code>:None:None:`bsr_array`</code>, <code>:None:None:`coo_array`</code>, etc.) for all new work.</p>

        <p>When using the array interface, please note that:</p>

                   <ul>               <li>               <p>        <code class='verbatim'>x * y</code>
 no longer performs matrix multiplication, but   element-wise multiplication (just like with NumPy arrays).  To   make code work with both arrays and matrices, use         <code class='verbatim'>x @ y</code>
 for   matrix multiplication.</p>

</li>
               <li>               <p>Operations such as <code>:None:None:`sum`</code>, that used to produce dense matrices, now   produce arrays, whose multiplication behavior differs similarly.</p>

</li>
               <li>               <p>Sparse arrays currently must be two-dimensional.  This also means   that all <em>slicing</em> operations on these objects must produce   two-dimensional results, or they will result in an error. This   will be addressed in a future version.</p>

</li>
            </ul>

        <p>The construction utilities (<code>:None:None:`eye`</code>, <code>:None:None:`kron`</code>, <code>:None:None:`random`</code>, <code>:None:None:`diags`</code>, etc.) have not yet been ported, but their results can be wrapped into arrays::    </p>

        <pre>A = csr_array(eye(3))</pre>
</div>



<h1>Contents</h1>

<h1>Sparse array classes</h1>
               <pre>.. autosummary:: 
    :toctree:generated/
    bsr_array - Block Sparse Row array
    coo_array - A sparse array in COOrdinate format
    csc_array - Compressed Sparse Column array
    csr_array - Compressed Sparse Row array
    dia_array - Sparse array with DIAgonal storage
    dok_array - Dictionary Of Keys based sparse array
    lil_array - Row-based list of lists sparse array</pre>

<h1>Sparse matrix classes</h1>
               <pre>.. autosummary:: 
    :toctree:generated/
    bsr_matrix - Block Sparse Row matrix
    coo_matrix - A sparse matrix in COOrdinate format
    csc_matrix - Compressed Sparse Column matrix
    csr_matrix - Compressed Sparse Row matrix
    dia_matrix - Sparse matrix with DIAgonal storage
    dok_matrix - Dictionary Of Keys based sparse matrix
    lil_matrix - Row-based list of lists sparse matrix
    spmatrix - Sparse matrix base class</pre>

<h1>Functions</h1>
               <p>Building sparse matrices:</p>

               <pre>.. autosummary:: 
    :toctree:generated/
    eye - Sparse MxN matrix whose k-th diagonal is all ones
    identity - Identity matrix in sparse format
    kron - kronecker product of two sparse matrices
    kronsum - kronecker sum of sparse matrices
    diags - Return a sparse matrix from diagonals
    spdiags - Return a sparse matrix from diagonals
    block_diag - Build a block diagonal sparse matrix
    tril - Lower triangular portion of a matrix in sparse format
    triu - Upper triangular portion of a matrix in sparse format
    bmat - Build a sparse matrix from sparse sub-blocks
    hstack - Stack sparse matrices horizontally (column wise)
    vstack - Stack sparse matrices vertically (row wise)
    rand - Random values in a given shape
    random - Random values in a given shape</pre>
               <p>Save and load sparse matrices:</p>

               <pre>.. autosummary:: 
    :toctree:generated/
    save_npz - Save a sparse matrix to a file using ``.npz`` format.
    load_npz - Load a sparse matrix from a file using ``.npz`` format.</pre>
               <p>Sparse matrix tools:</p>

               <pre>.. autosummary:: 
    :toctree:generated/
    find</pre>
               <p>Identifying sparse matrices:</p>

               <pre>.. autosummary:: 
    :toctree:generated/
    issparse
    isspmatrix
    isspmatrix_csc
    isspmatrix_csr
    isspmatrix_bsr
    isspmatrix_lil
    isspmatrix_dok
    isspmatrix_coo
    isspmatrix_dia</pre>

<h1>Submodules</h1>
               <pre>.. autosummary:: 
    csgraph - Compressed sparse graph routines
    linalg - sparse linear algebra routines</pre>

<h1>Exceptions</h1>
               <pre>.. autosummary:: 
    :toctree:generated/
    SparseEfficiencyWarning
    SparseWarning</pre>

<h1>Usage information</h1>
               <p>There are seven available sparse matrix types:</p>

                           <pre>1. csc_matrix: Compressed Sparse Column format
2. csr_matrix: Compressed Sparse Row format
3. bsr_matrix: Block Sparse Row format
4. lil_matrix: List of Lists format
5. dok_matrix: Dictionary of Keys format
6. coo_matrix: COOrdinate format (aka IJV, triplet format)
7. dia_matrix: DIAgonal format
</pre>

               <p>To construct a matrix efficiently, use either dok_matrix or lil_matrix. The lil_matrix class supports basic slicing and fancy indexing with a similar syntax to NumPy arrays. As illustrated below, the COO format may also be used to efficiently construct matrices. Despite their similarity to NumPy arrays, it is <strong>strongly discouraged</strong> to use NumPy functions directly on these matrices because NumPy may not properly convert them for computations, leading to unexpected (and incorrect) results. If you do want to apply a NumPy function to these matrices, first check if SciPy has its own implementation for the given sparse matrix class, or <strong>convert the
sparse matrix to a NumPy array</strong> (e.g., using the <code>:None:None:`toarray()`</code> method of the class) first before applying the method.</p>

               <p>To perform manipulations such as multiplication or inversion, first convert the matrix to either CSC or CSR format. The lil_matrix format is row-based, so conversion to CSR is efficient, whereas conversion to CSC is less so.</p>

               <p>All conversions among the CSR, CSC, and COO formats are efficient, linear-time operations.</p>


<h1>Matrix vector product</h1>
               <p>To do a vector product between a sparse matrix and a vector simply use the matrix <code>:None:None:`dot`</code> method, as described in its docstring:</p>

               <pre>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; from scipy.sparse import csr_matrix
&gt;&gt;&gt; A = csr_matrix([[1, 2, 0], [0, 0, 3], [4, 0, 5]])
&gt;&gt;&gt; v = np.array([1, 0, -1])
&gt;&gt;&gt; A.dot(v)
array([ 1, -3, -1], dtype=int64)</pre>
                           <div class='admonition'>
    <div>warning</div>
        <p>therefore using it will result on unexpected results or errors. The corresponding dense array should be obtained first instead:</p>

        <pre>&gt;&gt;&gt; np.dot(A.toarray(), v)
array([ 1, -3, -1], dtype=int64)</pre>
        <p>but then all the performance advantages would be lost.</p>

</div>


               <p>The CSR format is specially suitable for fast matrix vector products.</p>


<h1>Example 1</h1>
               <p>Construct a 1000x1000 lil_matrix and add some values to it:</p>

               <pre>&gt;&gt;&gt; from scipy.sparse import lil_matrix
&gt;&gt;&gt; from scipy.sparse.linalg import spsolve
&gt;&gt;&gt; from numpy.linalg import solve, norm
&gt;&gt;&gt; from numpy.random import rand</pre>
               <pre>&gt;&gt;&gt; A = lil_matrix((1000, 1000))
&gt;&gt;&gt; A[0, :100] = rand(100)
&gt;&gt;&gt; A[1, 100:200] = A[0, :100]
&gt;&gt;&gt; A.setdiag(rand(1000))</pre>
               <p>Now convert it to CSR format and solve A x = b for x:</p>

               <pre>&gt;&gt;&gt; A = A.tocsr()
&gt;&gt;&gt; b = rand(1000)
&gt;&gt;&gt; x = spsolve(A, b)</pre>
               <p>Convert it to a dense matrix and solve, and check that the result is the same:</p>

               <pre>&gt;&gt;&gt; x_ = solve(A.toarray(), b)</pre>
               <p>Now we can compute norm of the error with:</p>

               <pre>&gt;&gt;&gt; err = norm(x-x_)
&gt;&gt;&gt; err &lt; 1e-10
True</pre>
               <p>It should be small :)</p>


<h1>Example 2</h1>
               <p>Construct a matrix in COO format:</p>

               <pre>&gt;&gt;&gt; from scipy import sparse
&gt;&gt;&gt; from numpy import array
&gt;&gt;&gt; I = array([0,3,1,0])
&gt;&gt;&gt; J = array([0,3,1,2])
&gt;&gt;&gt; V = array([4,5,7,9])
&gt;&gt;&gt; A = sparse.coo_matrix((V,(I,J)),shape=(4,4))</pre>
               <p>Notice that the indices do not need to be sorted.</p>

               <p>Duplicate (i,j) entries are summed when converting to CSR or CSC.</p>

               <pre>&gt;&gt;&gt; I = array([0,0,1,3,1,0,0])
&gt;&gt;&gt; J = array([0,2,1,3,1,0,0])
&gt;&gt;&gt; V = array([1,1,1,1,1,1,1])
&gt;&gt;&gt; B = sparse.coo_matrix((V,(I,J)),shape=(4,4)).tocsr()</pre>
               <p>This is useful for constructing finite-element stiffness and mass matrices.</p>


<h1>Further details</h1>
               <p>CSR column indices are not necessarily sorted. Likewise for CSC row indices. Use the .sorted_indices() and .sort_indices() methods when sorted indices are required (e.g., when passing data to other libraries).</p>


<h3 id="section-Examples">Examples</h3>
         See :
    


<h3>Local connectivity graph</h3>
<p>Hover to see nodes names; edges to Self not shown, Caped at 50 nodes.</p>

<p> Using a canvas is more power efficient and can get hundred of nodes ; but does not allow hyperlinks; , arrows
or text (beyond on hover) </p> 
<canvas class='graph' width="800" height="500"></canvas>
<p> SVG is more flexible but power hungry; and does not scale well to 50 + nodes. </p> 

<svg class='graph' width="600" height="500"></svg>

<p>All aboves nodes referred to, (or are referred from) current nodes; Edges from Self to other have been omitted
(or all nodes would be connected to the central node "self" which is not useful). Nodes are colored by the library
they belong to, and scaled with the number of references pointing them</p>

<hr>

    GitHub : <a class='external' href='https://github.com/scipy/scipy/blob/v1.8.0//scipy/sparse/__init__.py#L0'>/scipy/sparse/__init__.py#0</a>
<br/>

type: &lt;class &#39;module&#39;&gt; <br/>
Commit: <br/>

        <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.js"></script>
    <style type="text/css">
        .node {};
        .link { stroke: #999; stroke-opacity: .6; stroke-width: 1px; };
    </style>
<script>
    window._data_graph = {"nodes": [], "links": []};
</script>
<script type="text/javascript" src='/graph_canvas.js'></script>
<script type="text/javascript" src='/graph_svg.js'></script>


</div>
</body>
</html>