<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
      // this should process only math inside  span with tex2jax_process class
      MathJax.Hub.Config({
          extensions: ["tex2jax.js"],
          jax: ["input/TeX", "output/HTML-CSS"],
          tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
          },
          "HTML-CSS": { fonts: ["TeX"] }
      });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=matplotlib>matplotlib</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/numpy/1.22.4/api/numpy.html.html">numpy</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html.html">matplotlib</a>
<a href="/p/distributed/2021.10.0/api/distributed.html.html">distributed</a>
<a href="/p/networkx/2.8.2/api/networkx.html.html">networkx</a>
<a href="/p/papyri/0.0.8/api/papyri.html.html">papyri</a>
<a href="/p/dask/2021.10.0/api/dask.html.html">dask</a>
<a href="/p/pandas/1.4.2/api/pandas.html.html">pandas</a>
<a href="/p/scipy/1.8.0/api/scipy.html.html">scipy</a>
<a href="/p/astropy/5.0/api/astropy.html.html">astropy</a>
<a href="/p/skimage/0.17.2/api/skimage.html.html">skimage</a>
<a href="/p/IPython/8.4.0/api/IPython.html.html">IPython</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>3.5.1</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">3.5.1</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>Examples</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/matplotlib/3.5.1/api/matplotlib.html">API</a>
                        <a href="/p/matplotlib/3.5.1/gallery">Gallery</a>
                        <a href="/p/matplotlib/3.5.1/examples">Examples</a>
                        <a href="/p/matplotlib/3.5.1/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='.html'>matplotlib</a>                    </div><!--end dropdown-->
</nav>
    </header>
    <div class='container'>

    <div class="sidenav">
        <img src="/p/matplotlib/3.5.1/img/matplotlib_logo.png"/>
    <a href="#">matplotlib</a>
    <a href="#">3.5.1</a>
    <hr/>
    <hr/>
    </div><!--end sidenav-->



<pre class='highlight execed'><span class='nsl'>&gt;&gt;&gt; </span><span class="sd">&#34;&#34;&#34;
==============
CanvasAgg demo
==============

This example shows how to use the agg backend directly to create images, which
may be of use to web application developers who want full control over their
code without using the pyplot interface to manage figures, figure closing etc.

.. note::

    It is not necessary to avoid using the pyplot interface in order to
    create figures without a graphical front-end - simply setting
    the backend to &#34;Agg&#34; would be sufficient.

In this example, we show how to save the contents of the agg canvas to a file,
and how to extract them to a numpy array, which can in turn be passed off
to Pillow_.  The latter functionality allows e.g. to use Matplotlib inside a
cgi-script *without* needing to write a figure to disk, and to write images in
any format supported by Pillow.

.. _Pillow: https://pillow.readthedocs.io/
.. redirect-from:: /gallery/misc/agg_buffer
.. redirect-from:: /gallery/misc/agg_buffer_to_array
&#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/*/api/matplotlib.html">matplotlib</a><span class="nn">.</span><a class="foo nn" href="/p/matplotlib/*/api/matplotlib.backends.html">backends</a><span class="nn">.</span><a class="foo nn" href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.html">backend_agg</a><span class=""> </span><span class="kn">import</span><span class=""> </span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.html">FigureCanvasAgg</a><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/*/api/matplotlib.html">matplotlib</a><span class="nn">.</span><a class="foo nn" href="/p/matplotlib/*/api/matplotlib.figure.html">figure</a><span class=""> </span><span class="kn">import</span><span class=""> </span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">Figure</a><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/numpy/*/api/numpy.html">numpy</a><span class=""> </span><span class="k">as</span><span class=""> </span><a class="foo nn" href="/p/numpy/*/api/numpy.html">np</a><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/PIL/*/api/PIL.html">PIL</a><span class=""> </span><span class="kn">import</span><span class=""> </span><a class="foo " href="/p/PIL/*/api/PIL.Image.html">Image</a><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">fig</a><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">Figure</a><span class="">(</span><span class="">figsize</span><span class="o">=</span><span class="">(</span><span class="mi">5</span><span class="">,</span><span class=""> </span><span class="mi">4</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">dpi</span><span class="o">=</span><span class="mi">100</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># A canvas must be manually attached to the figure (pyplot would automatically</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># do it).  This is done by instantiating the canvas with the figure as</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># argument.</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.html">canvas</a><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.html">FigureCanvasAgg</a><span class="">(</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">fig</a><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Do some plotting.</span><br><span class='nsl'>...&nbsp;</span><span class="">ax</span><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">fig</a><span class="o">.</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.FigureBase.add_subplot.html">add_subplot</a><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">ax</span><span class="o">.</span><span class="">plot</span><span class="">(</span><span class="">[</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">2</span><span class="">,</span><span class=""> </span><span class="mi">3</span><span class="">]</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Option 1: Save the figure to a file; can also be a file-like object (BytesIO,</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># etc.).</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.html">fig</a><span class="o">.</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.figure.Figure.savefig.html">savefig</a><span class="">(</span><span class="s2">&#34;</span><span class="s2">test.png</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Option 2: Retrieve a memoryview on the renderer buffer, and convert it to a</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># numpy array.</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.html">canvas</a><span class="o">.</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.draw.html">draw</a><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/numpy/*/api/numpy.ndarray.html">rgba</a><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/numpy/*/api/numpy.html">np</a><span class="o">.</span><a class="foo " href="/p/numpy/*/api/numpy.asarray.html">asarray</a><span class="">(</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.html">canvas</a><span class="o">.</span><a class="foo " href="/p/matplotlib/*/api/matplotlib.backends.backend_agg.FigureCanvasAgg.buffer_rgba.html">buffer_rgba</a><span class="">(</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># ... and pass it to PIL.</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/PIL/*/api/PIL.Image.Image.html">im</a><span class=""> </span><span class="o">=</span><span class=""> </span><a class="foo " href="/p/PIL/*/api/PIL.Image.html">Image</a><span class="o">.</span><a class="foo " href="/p/PIL/*/api/PIL.Image.fromarray.html">fromarray</a><span class="">(</span><a class="foo " href="/p/numpy/*/api/numpy.ndarray.html">rgba</a><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># This image can then be saved to any format supported by Pillow, e.g.:</span><br><span class='nsl'>...&nbsp;</span><a class="foo " href="/p/PIL/*/api/PIL.Image.Image.html">im</a><span class="o">.</span><a class="foo " href="/p/PIL/*/api/PIL.Image.Image.save.html">save</a><span class="">(</span><span class="s2">&#34;</span><span class="s2">test.bmp</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Uncomment this line to display the image using ImageMagick&#39;s `display` tool.</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># im.show()</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#############################################################################</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># .. admonition:: References</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    The use of the following functions, methods, classes and modules is shown</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    in this example:</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    - `matplotlib.backends.backend_agg.FigureCanvasAgg`</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    - `matplotlib.figure.Figure`</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    - `matplotlib.figure.Figure.add_subplot`</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    - `matplotlib.figure.Figure.savefig` / `matplotlib.pyplot.savefig`</span><br><span class='nsl'>...&nbsp;</span><span class="c1">#    - `matplotlib.axes.Axes.plot` / `matplotlib.pyplot.plot`</span><br><span class='nsl'>...&nbsp;</span>
</pre>
       




</div>
</body>
</html>