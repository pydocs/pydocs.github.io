<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
    <link rel="stylesheet" href="/pygments.css">
<style>

    header > brand {
        /*border-right: 1px solid #ccc;
          border-left: 1px solid #ccc;*/
        margin-left: 15px;
        padding: 0px;
        display: inline-block; 
        width: 67px;
    }

    brand > a {
        text-decoration: None;

    }
    brand >a> img {
            display: inline-block;
    margin: 0;
    padding: 0;
    position: relative;
    bottom: -10px;

   }
    .container {
       max-width: 800px;
       padding-left: 210px;
       padding-top: 30px;
    }
</style>
</head><body class="tex2jax_ignore">
    <header>
        <brand><a href='/'><img src='/favicon.ico'/></a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=matplotlib>matplotlib</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/dask/2021.10.0/api/dask.html.html">dask</a>
<a href="/p/IPython/8.3.0.dev/api/IPython.html.html">IPython</a>
<a href="/p/skimage/0.17.2/api/skimage.html.html">skimage</a>
<a href="/p/pandas/1.4.1/api/pandas.html.html">pandas</a>
<a href="/p/papyri/0.0.8/api/papyri.html.html">papyri</a>
<a href="/p/distributed/2021.10.0/api/distributed.html.html">distributed</a>
<a href="/p/astropy/5.0/api/astropy.html.html">astropy</a>
<a href="/p/matplotlib/3.5.1/api/matplotlib.html.html">matplotlib</a>
<a href="/p/networkx/2.7.2rc1.dev0/api/networkx.html.html">networkx</a>
<a href="/p/numpy/1.22.3/api/numpy.html.html">numpy</a>
<a href="/p/scipy/1.8.0/api/scipy.html.html">scipy</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>3.5.1</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">3.5.1</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>Examples</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/matplotlib/3.5.1/api/matplotlib.html">API</a>
                        <a href="/p/matplotlib/3.5.1/gallery">Gallery</a>
                        <a href="/p/matplotlib/3.5.1/examples">Examples</a>
                        <a href="/p/matplotlib/3.5.1/docs">Narrative</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='.html'>matplotlib</a>                    </div><!--end dropdown-->
</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/matplotlib/3.5.1/img/matplotlib_logo.png"/>
    <a href="#">matplotlib</a>
    <a href="#">3.5.1</a>
    <hr/>
    <hr/>
    </div><!--end sidenav-->



<pre class='highlight None'><span class='nsl'>&gt;&gt;&gt; </span><span class="kn">from</span><span class=""> </span><span class="nn">__future__</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">unicode_literals</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">axes</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">Axes</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">patches</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">Circle</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">path</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">Path</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">ticker</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">NullLocator</span><span class="">,</span><span class=""> </span><span class="">Formatter</span><span class="">,</span><span class=""> </span><span class="">FixedLocator</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">transforms</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">Affine2D</span><span class="">,</span><span class=""> </span><span class="">BboxTransformTo</span><span class="">,</span><span class=""> </span><span class="">Transform</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">projections</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">register_projection</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">spines</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">mspines</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">axis</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">maxis</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">numpy</a><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">np</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># This example projection class is rather long, but it is designed to</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># illustrate many features, not all of which will be used every time.</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># It is also common to factor out a lot of these methods into common</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># code used by a number of projections with similar characteristics</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># (see geo.py).</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="k">class</span><span class=""> </span><span class="nc">HammerAxes</span><span class="">(</span><span class="">Axes</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="sd">&#34;&#34;&#34;
    A custom class for the Aitoff-Hammer projection, an equal-area map
    projection.

    http://en.wikipedia.org/wiki/Hammer_projection
    &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># The projection must specify a name.  This will be used be the</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># user to select the projection, i.e. ``subplot(111,</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># projection=&#39;custom_hammer&#39;)``.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">name</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">custom_hammer</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">set_aspect</span><span class="">(</span><span class="mf">0.5</span><span class="">,</span><span class=""> </span><span class="">adjustable</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">box</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="">anchor</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">C</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">cla</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">_init_axis</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">xaxis</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">maxis</span><span class="o">.</span><span class="">XAxis</span><span class="">(</span><span class="bp">self</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">yaxis</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">maxis</span><span class="o">.</span><span class="">YAxis</span><span class="">(</span><span class="bp">self</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Do not register xaxis or yaxis with spines -- as done in</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Axes._init_axis() -- until HammerAxes.xaxis.cla() works.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># self.spines[&#39;hammer&#39;].register_axis(self.yaxis)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_update_transScale</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">cla</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override to set up some reasonable defaults.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Don&#39;t forget to call the base class</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">cla</span><span class="">(</span><span class="bp">self</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Set up a default grid spacing</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">set_longitude_grid</span><span class="">(</span><span class="mi">30</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">set_latitude_grid</span><span class="">(</span><span class="mi">15</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">set_longitude_grid_ends</span><span class="">(</span><span class="mi">75</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Turn off minor ticking altogether</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">xaxis</span><span class="o">.</span><span class="">set_minor_locator</span><span class="">(</span><span class="">NullLocator</span><span class="">(</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">yaxis</span><span class="o">.</span><span class="">set_minor_locator</span><span class="">(</span><span class="">NullLocator</span><span class="">(</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Do not display ticks -- we only want gridlines and text</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">xaxis</span><span class="o">.</span><span class="">set_ticks_position</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">yaxis</span><span class="o">.</span><span class="">set_ticks_position</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">none</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># The limits on this projection are fixed -- they are not to</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># be changed by the user.  This makes the math in the</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># transformation itself easier, and since this is a toy</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># example, the easier, the better.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_xlim</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_ylim</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">_set_lim_and_transforms</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        This is called once when the plot is created to set up all the
        transforms for the data, text and grids.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># There are three important coordinate spaces going on here:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#    1. Data space: The space of the data itself</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#    2. Axes space: The unit rectangle (0, 0) to (1, 1)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#       covering the entire plot area.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#    3. Display space: The coordinates of the resulting image,</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1">#       often in pixels or dpi/inch.</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># This function makes heavy use of the Transform classes in</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># ``lib/matplotlib/transforms.py.`` For more information, see</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># the inline documentation there.</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># The goal of the first two transformations is to get from the</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># data space (in this case longitude and latitude) to axes</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># space.  It is separated into a non-affine and affine part so</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># that the non-affine part does not have to be recomputed when</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># a simple affine change to the figure has been made (such as</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># resizing the window or changing the dpi).</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># 1) The core transformation from data space into</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># rectilinear space defined in the HammerTransform class.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">transProjection</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">HammerTransform</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># 2) The above has an output range that is not in the unit</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># rectangle, so scale and translate it so it fits correctly</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># within the axes.  The peculiar calculations of xscale and</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># yscale are specific to a Aitoff-Hammer projection, so don&#39;t</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># worry about them too much.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">xscale</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">2.0</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sqrt</span><span class="">(</span><span class="mf">2.0</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sin</span><span class="">(</span><span class="mf">0.5</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">yscale</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sqrt</span><span class="">(</span><span class="mf">2.0</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sin</span><span class="">(</span><span class="mf">0.5</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">transAffine</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">0.5</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">xscale</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">yscale</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">0.5</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># 3) This is the transformation from axes space to display</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># space.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">transAxes</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">BboxTransformTo</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">bbox</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Now put these 3 transforms together -- from data all the way</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># to display coordinates.  Using the &#39;+&#39; operator, these</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># transforms will be applied &#34;in order&#34;.  The transforms are</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># automatically simplified, if possible, by the underlying</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># transformation framework.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">transData</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transProjection</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transAffine</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transAxes</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># The main data transformation is set up.  Now deal with</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># gridlines and tick labels.</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Longitude gridlines and ticklabels.  The input to these</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># transforms are in display space in x and axes space in y.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Therefore, the input values will be in range (-xmin, 0),</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># (xmax, 1).  The goal of these transforms is to go from that</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># space to display space.  The tick labels will be offset 4</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># pixels from the equator.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_pretransform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">1.0</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">0.0</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_pretransform</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transData</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_text1_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">1.0</span><span class="">,</span><span class=""> </span><span class="mf">0.0</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transData</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">0.0</span><span class="">,</span><span class=""> </span><span class="mf">4.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_text2_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">1.0</span><span class="">,</span><span class=""> </span><span class="mf">0.0</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transData</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">0.0</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="mf">4.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Now set up the transforms for the latitude ticks.  The input to</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># these transforms are in axes space in x and display space in</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># y.  Therefore, the input values will be in range (0, -ymin),</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># (1, ymax).  The goal of these transforms is to go from that</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># space to display space.  The tick labels will be offset 4</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># pixels from the edge of the axes ellipse.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">yaxis_stretch</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="mf">2.0</span><span class="">,</span><span class=""> </span><span class="mf">1.0</span><span class="">)</span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">,</span><span class=""> </span><span class="mf">0.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">yaxis_space</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">1.0</span><span class="">,</span><span class=""> </span><span class="mf">1.1</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">yaxis_stretch</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transData</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">yaxis_text_base</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">yaxis_stretch</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">transProjection</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">(</span><span class="">yaxis_space</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">             </span><span class="bp">self</span><span class="o">.</span><span class="">transAffine</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">             </span><span class="bp">self</span><span class="o">.</span><span class="">transAxes</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_text1_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">yaxis_text_base</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="o">-</span><span class="mf">8.0</span><span class="">,</span><span class=""> </span><span class="mf">0.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_text2_transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">yaxis_text_base</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="">Affine2D</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">8.0</span><span class="">,</span><span class=""> </span><span class="mf">0.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_xaxis_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class="">which</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">grid</span><span class="s1">&#39;</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        x-axis grid and ticks.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">assert</span><span class=""> </span><span class="">which</span><span class=""> </span><span class="ow">in</span><span class=""> </span><span class="">[</span><span class="s1">&#39;</span><span class="s1">tick1</span><span class="s1">&#39;</span><span class="">,</span><span class="s1">&#39;</span><span class="s1">tick2</span><span class="s1">&#39;</span><span class="">,</span><span class="s1">&#39;</span><span class="s1">grid</span><span class="s1">&#39;</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_transform</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_xaxis_text1_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">pixelPad</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        x-axis tick labels.

        Returns a tuple of the form (transform, valign, halign)
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_text1_transform</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">bottom</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">center</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_xaxis_text2_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">pixelPad</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        secondary x-axis tick labels.

        Returns a tuple of the form (transform, valign, halign)
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_text2_transform</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">top</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">center</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_yaxis_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class="">which</span><span class="o">=</span><span class="s1">&#39;</span><span class="s1">grid</span><span class="s1">&#39;</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        y-axis grid and ticks.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">assert</span><span class=""> </span><span class="">which</span><span class=""> </span><span class="ow">in</span><span class=""> </span><span class="">[</span><span class="s1">&#39;</span><span class="s1">tick1</span><span class="s1">&#39;</span><span class="">,</span><span class="s1">&#39;</span><span class="s1">tick2</span><span class="s1">&#39;</span><span class="">,</span><span class="s1">&#39;</span><span class="s1">grid</span><span class="s1">&#39;</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_transform</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_yaxis_text1_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">pixelPad</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        y-axis tick labels.

        Returns a tuple of the form (transform, valign, halign)
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_text1_transform</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">center</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">right</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_yaxis_text2_transform</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">pixelPad</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to provide a transformation for the
        secondary y-axis tick labels.

        Returns a tuple of the form (transform, valign, halign)
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_yaxis_text2_transform</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">center</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">left</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">_gen_axes_patch</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to define the shape that is used for the
        background of the plot.  It should be a subclass of Patch.

        In this case, it is a Circle (that may be warped by the axes
        transform into an ellipse).  Any data and gridlines will be
        clipped to this shape.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="">Circle</span><span class="">(</span><span class="">(</span><span class="mf">0.5</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">_gen_axes_spines</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="">{</span><span class="s1">&#39;</span><span class="s1">custom_hammer</span><span class="s1">&#39;</span><span class="">:</span><span class="">mspines</span><span class="o">.</span><span class="">Spine</span><span class="o">.</span><span class="">circular_spine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><br><span class='nsl'>...&nbsp;</span><span class="">                                                      </span><span class="">(</span><span class="mf">0.5</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="mf">0.5</span><span class="">)</span><span class="">}</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># Prevent the user from applying scales to one or both of the</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># axes.  In this particular case, scaling the axes wouldn&#39;t make</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># sense, so we don&#39;t allow it.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_xscale</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><span class="">args</span><span class="">[</span><span class="mi">0</span><span class="">]</span><span class=""> </span><span class="o">!=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">linear</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">raise</span><span class=""> </span><span class="ne">NotImplementedError</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_xscale</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_yscale</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><span class="">args</span><span class="">[</span><span class="mi">0</span><span class="">]</span><span class=""> </span><span class="o">!=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">linear</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">raise</span><span class=""> </span><span class="ne">NotImplementedError</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_yscale</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># Prevent the user from changing the axes limits.  In our case, we</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># want to display the whole sphere all the time, so we override</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># set_xlim and set_ylim to ignore any input.  This also applies to</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># interactive panning and zooming in the GUI interfaces.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_xlim</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">args</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_xlim</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">Axes</span><span class="o">.</span><span class="">set_ylim</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">set_ylim</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">set_xlim</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">format_coord</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">lon</span><span class="">,</span><span class=""> </span><span class="">lat</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to change how the values are displayed in
        the status bar.

        In this case, we want them to be displayed in degrees N/S/E/W.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">lon</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">lon</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">(</span><span class="mf">180.0</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">lat</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">lat</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">(</span><span class="mf">180.0</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><span class="">lat</span><span class=""> </span><span class="o">&gt;</span><span class="o">=</span><span class=""> </span><span class="mf">0.0</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">ns</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">N</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">else</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">ns</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">S</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><span class="">lon</span><span class=""> </span><span class="o">&gt;</span><span class="o">=</span><span class=""> </span><span class="mf">0.0</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">ew</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">E</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">else</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">ew</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">W</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># \u00b0 : degree symbol</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="s1">&#39;</span><span class="si">%f</span><span class="se">\u00b0</span><span class="si">%s</span><span class="s1">, </span><span class="si">%f</span><span class="se">\u00b0</span><span class="si">%s</span><span class="s1">&#39;</span><span class=""> </span><span class="o">%</span><span class=""> </span><span class="">(</span><span class="nb">abs</span><span class="">(</span><span class="">lat</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">ns</span><span class="">,</span><span class=""> </span><span class="nb">abs</span><span class="">(</span><span class="">lon</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">ew</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">class</span><span class=""> </span><span class="nc">DegreeFormatter</span><span class="">(</span><span class="">Formatter</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        This is a custom formatter that converts the native unit of
        radians into (truncated) degrees and adds a degree symbol.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">round_to</span><span class="o">=</span><span class="mf">1.0</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">_round_to</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">round_to</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="fm">__call__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">pos</span><span class="o">=</span><span class="kc">None</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">degrees</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">(</span><span class="">x</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="mf">180.0</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">degrees</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="nb">round</span><span class="">(</span><span class="">degrees</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_round_to</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">_round_to</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># \u00b0 : degree symbol</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="s2">&#34;</span><span class="si">%d</span><span class="se">\u00b0</span><span class="s2">&#34;</span><span class=""> </span><span class="o">%</span><span class=""> </span><span class="">degrees</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_longitude_grid</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">degrees</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Set the number of degrees between each longitude grid.

        This is an example method that is specific to this projection
        class -- it provides a more convenient interface to set the
        ticking than set_xticks would.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Set up a FixedLocator at each of the points, evenly spaced</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># by degrees.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">number</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">(</span><span class="mf">360.0</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">degrees</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="mi">1</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">xaxis</span><span class="o">.</span><span class="">set_major_locator</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">plt</span><span class="o">.</span><span class="">FixedLocator</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">                </span><span class="">np</span><span class="o">.</span><span class="">linspace</span><span class="">(</span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class="">,</span><span class=""> </span><span class="">number</span><span class="">,</span><span class=""> </span><span class="kc">True</span><span class="">)</span><span class="">[</span><span class="mi">1</span><span class="">:</span><span class="o">-</span><span class="mi">1</span><span class="">]</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Set the formatter to display the tick labels in degrees,</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># rather than radians.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">xaxis</span><span class="o">.</span><span class="">set_major_formatter</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">DegreeFormatter</span><span class="">(</span><span class="">degrees</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_latitude_grid</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">degrees</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Set the number of degrees between each longitude grid.

        This is an example method that is specific to this projection
        class -- it provides a more convenient interface than
        set_yticks would.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Set up a FixedLocator at each of the points, evenly spaced</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># by degrees.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">number</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">(</span><span class="mf">180.0</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">degrees</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="mi">1</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">yaxis</span><span class="o">.</span><span class="">set_major_locator</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">FixedLocator</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">                </span><span class="">np</span><span class="o">.</span><span class="">linspace</span><span class="">(</span><span class="o">-</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">,</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><span class="">,</span><span class=""> </span><span class="">number</span><span class="">,</span><span class=""> </span><span class="kc">True</span><span class="">)</span><span class="">[</span><span class="mi">1</span><span class="">:</span><span class="o">-</span><span class="mi">1</span><span class="">]</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Set the formatter to display the tick labels in degrees,</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># rather than radians.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">yaxis</span><span class="o">.</span><span class="">set_major_formatter</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">DegreeFormatter</span><span class="">(</span><span class="">degrees</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_longitude_grid_ends</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">degrees</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Set the latitude(s) at which to stop drawing the longitude grids.

        Often, in geographic projections, you wouldn&#39;t want to draw
        longitude gridlines near the poles.  This allows the user to
        specify the degree at which to stop drawing longitude grids.

        This is an example method that is specific to this projection
        class -- it provides an interface to something that has no
        analogy in the base Axes class.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">longitude_cap</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">degrees</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">180.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># Change the xaxis gridlines transform so that it draws from</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># -degrees to degrees, rather than -pi to pi.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">_xaxis_pretransform</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">clear</span><span class="">(</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">scale</span><span class="">(</span><span class="mf">1.0</span><span class="">,</span><span class=""> </span><span class="">longitude_cap</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="mf">2.0</span><span class="">)</span><span class=""> </span><span class="">\
</span><span class="">            </span><span class="o">.</span><span class="">translate</span><span class="">(</span><span class="mf">0.0</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="">longitude_cap</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_data_ratio</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Return the aspect ratio of the data itself.

        This method should be overridden by any Axes that have a
        fixed data ratio.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="mf">1.0</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># Interactive panning and zooming is not supported with this projection,</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># so we override all of the following methods to disable it.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">can_zoom</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Return True if this axes support the zoom box
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="kc">False</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">start_pan</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">,</span><span class=""> </span><span class="">button</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">pass</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">end_pan</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">pass</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">drag_pan</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">button</span><span class="">,</span><span class=""> </span><span class="">key</span><span class="">,</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">pass</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># Now, the transforms themselves.</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">class</span><span class=""> </span><span class="nc">HammerTransform</span><span class="">(</span><span class="">Transform</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        The base Hammer transform.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">input_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">2</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">output_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">2</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">is_separable</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="kc">False</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">transform_non_affine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">ll</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="sd">&#34;&#34;&#34;
            Override the transform_non_affine method to implement the custom 
            transform.

            The input and output are Nx2 numpy arrays.
            &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">longitude</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">ll</span><span class="">[</span><span class="">:</span><span class="">,</span><span class=""> </span><span class="mi">0</span><span class="">:</span><span class="mi">1</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">latitude</span><span class="">  </span><span class="o">=</span><span class=""> </span><span class="">ll</span><span class="">[</span><span class="">:</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">:</span><span class="mi">2</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># Pre-compute some values</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">half_long</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">longitude</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mf">2.0</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">cos_latitude</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">cos</span><span class="">(</span><span class="">latitude</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">sqrt2</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sqrt</span><span class="">(</span><span class="mf">2.0</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">alpha</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">1.0</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="">cos_latitude</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">cos</span><span class="">(</span><span class="">half_long</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">(</span><span class="mf">2.0</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">sqrt2</span><span class="">)</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">(</span><span class="">cos_latitude</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sin</span><span class="">(</span><span class="">half_long</span><span class="">)</span><span class="">)</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">alpha</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">(</span><span class="">sqrt2</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sin</span><span class="">(</span><span class="">latitude</span><span class="">)</span><span class="">)</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">alpha</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">concatenate</span><span class="">(</span><span class="">(</span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">y</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># This is where things get interesting.  With this projection,</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># straight lines in data space become curves in display space.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># This is done by interpolating new values between the input</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># values of the data.  Since ``transform`` must not return a</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># differently-sized array, any transform that requires</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># changing the length of the data array must happen within</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># ``transform_path``.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">transform_path_non_affine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">path</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">ipath</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">path</span><span class="o">.</span><span class="">interpolated</span><span class="">(</span><span class="">path</span><span class="o">.</span><span class="">_interpolation_steps</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">Path</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">transform</span><span class="">(</span><span class="">ipath</span><span class="o">.</span><span class="">vertices</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">ipath</span><span class="o">.</span><span class="">codes</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">transform_path_non_affine</span><span class="o">.</span><span class="vm">__doc__</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">\
</span><span class="">                </span><span class="">Transform</span><span class="o">.</span><span class="">transform_path_non_affine</span><span class="o">.</span><span class="vm">__doc__</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><a class="foo " href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="o">.</span><span class="">__version__</span><span class=""> </span><span class="o">&lt;</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">1.2</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># Note: For compatibility with matplotlib v1.1 and older, you&#39;ll</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># need to explicitly implement a ``transform`` method as well.</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># Otherwise a ``NotImplementedError`` will be raised. This isn&#39;t</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># necessary for v1.2 and newer, however.  </span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">transform_non_affine</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># Similarly, we need to explicitly override ``transform_path`` if</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># compatibility with older matplotlib versions is needed. With v1.2</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># and newer, only overriding the ``transform_path_non_affine``</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># method is sufficient.</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">transform_path</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">transform_path_non_affine</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">transform_path</span><span class="o">.</span><span class="vm">__doc__</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Transform</span><span class="o">.</span><span class="">transform_path</span><span class="o">.</span><span class="vm">__doc__</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">inverted</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">HammerAxes</span><span class="o">.</span><span class="">InvertedHammerTransform</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">inverted</span><span class="o">.</span><span class="vm">__doc__</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Transform</span><span class="o">.</span><span class="">inverted</span><span class="o">.</span><span class="vm">__doc__</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">class</span><span class=""> </span><span class="nc">InvertedHammerTransform</span><span class="">(</span><span class="">Transform</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">input_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">2</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">output_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">2</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">is_separable</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="kc">False</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">transform_non_affine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">xy</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">xy</span><span class="">[</span><span class="">:</span><span class="">,</span><span class=""> </span><span class="mi">0</span><span class="">:</span><span class="mi">1</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">xy</span><span class="">[</span><span class="">:</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">:</span><span class="mi">2</span><span class="">]</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">quarter_x</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">0.25</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">x</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">half_y</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mf">0.5</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">y</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">z</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">sqrt</span><span class="">(</span><span class="mf">1.0</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="">quarter_x</span><span class="o">*</span><span class="">quarter_x</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="">half_y</span><span class="o">*</span><span class="">half_y</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">longitude</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">2</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arctan</span><span class="">(</span><span class="">(</span><span class="">z</span><span class="o">*</span><span class="">x</span><span class="">)</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">(</span><span class="mf">2.0</span><span class=""> </span><span class="o">*</span><span class=""> </span><span class="">(</span><span class="mf">2.0</span><span class="o">*</span><span class="">z</span><span class="o">*</span><span class="">z</span><span class=""> </span><span class="o">-</span><span class=""> </span><span class="mf">1.0</span><span class="">)</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">latitude</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arcsin</span><span class="">(</span><span class="">y</span><span class="o">*</span><span class="">z</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">concatenate</span><span class="">(</span><span class="">(</span><span class="">longitude</span><span class="">,</span><span class=""> </span><span class="">latitude</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">transform_non_affine</span><span class="o">.</span><span class="vm">__doc__</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Transform</span><span class="o">.</span><span class="">transform_non_affine</span><span class="o">.</span><span class="vm">__doc__</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># As before, we need to implement the &#34;transform&#34; method for </span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># compatibility with matplotlib v1.1 and older.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><a class="foo " href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="o">.</span><span class="">__version__</span><span class=""> </span><span class="o">&lt;</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">1.2</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">transform</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">transform_non_affine</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">inverted</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="c1"># The inverse of the inverse is the original transform... ;)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">HammerAxes</span><span class="o">.</span><span class="">HammerTransform</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">inverted</span><span class="o">.</span><span class="vm">__doc__</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">Transform</span><span class="o">.</span><span class="">inverted</span><span class="o">.</span><span class="vm">__doc__</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Now register the projection with matplotlib so the user can select</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># it.</span><br><span class='nsl'>...&nbsp;</span><span class="">register_projection</span><span class="">(</span><span class="">HammerAxes</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="k">if</span><span class=""> </span><span class="vm">__name__</span><span class=""> </span><span class="o">==</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">__main__</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">pyplot</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">plt</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># Now make a simple example using the custom projection.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">subplot</span><span class="">(</span><span class="mi">111</span><span class="">,</span><span class=""> </span><span class="">projection</span><span class="o">=</span><span class="s2">&#34;</span><span class="s2">custom_hammer</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">p</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">plt</span><span class="o">.</span><span class="">plot</span><span class="">(</span><span class="">[</span><span class="o">-</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="">[</span><span class="o">-</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="mi">1</span><span class="">,</span><span class=""> </span><span class="mi">1</span><span class="">]</span><span class="">,</span><span class=""> </span><span class="s2">&#34;</span><span class="s2">o-</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">grid</span><span class="">(</span><span class="kc">True</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">show</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span>
</pre>
       




</div>
</body>
</html>