<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <script type="text/x-mathjax-config">
        // this should process only math inside  span with tex2jax_process class
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": { fonts: ["TeX"] }
    });
    </script>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
    <link rel="stylesheet" href="/papyri.css">
<style>
    header > brand, header>:first-child {
        border-right: 1px solid #ccc;
        border-left: 1px solid #ccc;
        padding: 16px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        display: inline-block; 
        width: 167px;
    }
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head><body class="tex2jax_ignore">
    <header>
            <brand><i class="fab fa-python"></i><a href='/'>Home</a></brand>
        <nav> / <a href='/' >p</a>  &nbsp;/&nbsp; 
                <div class="dropdown">
                <a href=matplotlib>matplotlib</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a>
<a href="/p/numpy/1.22.3/api/numpy.html">numpy</a>
<a href="/p/scipy/1.8.0/api/scipy.html">scipy</a>
<a href="/p/skimage/0.17.2/api/skimage.html">skimage</a>
<a href="/p/papyri/0.0.8/api/papyri.html">papyri</a>
<a href="/p/distributed/2021.10.0/api/distributed.html">distributed</a>
<a href="/p/pandas/1.4.1/api/pandas.html">pandas</a>
<a href="/p/networkx/2.7.2rc1.dev0/api/networkx.html">networkx</a>
<a href="/p/IPython/8.2.0.dev/api/IPython.html">IPython</a>
<a href="/p/astropy/5.0/api/astropy.html">astropy</a>
<a href="/p/dask/2021.10.0/api/dask.html">dask</a>
                     </div>
                </div>
                <div class="dropdown">
                <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>3.5.1</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
<a href="/p/matplotlib/3.5.1/api/matplotlib.html">3.5.1</a>
                    </div>
                </div>

                <div class="dropdown">
                    <a href='/p/matplotlib/3.5.1/api/matplotlib.html'>Examples</a>&nbsp;/&nbsp;
                    <div class="dropdown-content">
                        <a href="/p/matplotlib/3.5.1/api/matplotlib.html">API</a>
                        <a href="/p/matplotlib/3.5.1/gallery">Gallery</a>
                        <a href="/p/matplotlib/3.5.1/examples">Examples</a>
                     </div>
                </div>

                    <div class="dropdown">
                            <a class="dropbtn" href='.html'>matplotlib</a>                    </div><!--end dropdown-->
</nav>
    </header>
<div class='container'>
    <div class="sidenav">
        <img src="/p/matplotlib/3.5.1/img/logo.png"/>
    <a href="#">matplotlib</a>
    <a href="#">3.5.1</a>
    <hr/>
    <hr/>
    </div><!--end sidenav-->



<pre class='highlight None'><span class='nsl'>&gt;&gt;&gt; </span><span class="sd">&#34;&#34;&#34;
============
Custom scale
============

Create a custom scale, by implementing the scaling use for latitude data in a
Mercator Projection.

Unless you are making special use of the `.Transform` class, you probably
don&#39;t need to use this verbose method, and instead can use `~.scale.FuncScale`
and the ``&#39;function&#39;`` option of `~.Axes.set_xscale` and `~.Axes.set_yscale`.
See the last example in :doc:`/gallery/scales/scales`.
&#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">numpy</a><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">np</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/numpy/1.22.3/api/numpy.html">numpy</a><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">ma</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">scale</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="">mscale</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">transforms</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="">mtransforms</span><br><span class='nsl'>...&nbsp;</span><span class="kn">from</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">ticker</span><span class=""> </span><span class="kn">import</span><span class=""> </span><span class="">FixedLocator</span><span class="">,</span><span class=""> </span><span class="">FuncFormatter</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="k">class</span><span class=""> </span><span class="nc">MercatorLatitudeScale</span><span class="">(</span><span class="">mscale</span><span class="o">.</span><span class="">ScaleBase</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="sd">&#34;&#34;&#34;
    Scales data in range -pi/2 to pi/2 (-90 to 90 degrees) using
    the system used to scale latitudes in a Mercator__ projection.

    The scale function:
      ln(tan(y) + sec(y))

    The inverse scale function:
      atan(sinh(y))

    Since the Mercator scale tends to infinity at +/- 90 degrees,
    there is user-defined threshold, above and below which nothing
    will be plotted.  This defaults to +/- 85 degrees.

    __ https://en.wikipedia.org/wiki/Mercator_projection
    &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># The scale class must have a member ``name`` that defines the string used</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># to select the scale.  For example, ``ax.set_yscale(&#34;mercator&#34;)`` would be</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="c1"># used to select this scale.</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">name</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">mercator</span><span class="s1">&#39;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">axis</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="">,</span><span class=""> </span><span class="">thresh</span><span class="o">=</span><span class="">np</span><span class="o">.</span><span class="">deg2rad</span><span class="">(</span><span class="mi">85</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="o">*</span><span class="o">*</span><span class="">kwargs</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Any keyword arguments passed to ``set_xscale`` and ``set_yscale`` will
        be passed along to the scale&#39;s constructor.

        thresh: The degree above which to crop the data.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="nb">super</span><span class="">(</span><span class="">)</span><span class="o">.</span><span class="fm">__init__</span><span class="">(</span><span class="">axis</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">if</span><span class=""> </span><span class="">thresh</span><span class=""> </span><span class="o">&gt;</span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">pi</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="mi">2</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">raise</span><span class=""> </span><span class="ne">ValueError</span><span class="">(</span><span class="s2">&#34;</span><span class="s2">thresh must be less than pi/2</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">thresh</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">get_transform</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override this method to return a new instance that does the
        actual transformation of the data.

        The MercatorLatitudeTransform class is defined below as a
        nested class of this one.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">MercatorLatitudeTransform</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">set_default_locators_and_formatters</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">axis</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override to set up the locators and formatters to use with the
        scale.  This is only required if the scale requires custom
        locators and formatters.  Writing custom locators and
        formatters is rather outside the scope of this example, but
        there are many helpful examples in :mod:`.ticker`.

        In our case, the Mercator example uses a fixed locator from -90 to 90
        degrees and a custom formatter to convert the radians to degrees and
        put a degree symbol after the value.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">fmt</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">FuncFormatter</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">lambda</span><span class=""> </span><span class="">x</span><span class="">,</span><span class=""> </span><span class="">pos</span><span class="o">=</span><span class="kc">None</span><span class="">:</span><span class=""> </span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="">np</span><span class="o">.</span><span class="">degrees</span><span class="">(</span><span class="">x</span><span class="">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="se">\N{DEGREE SIGN}</span><span class="s2">&#34;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">axis</span><span class="o">.</span><span class="">set</span><span class="">(</span><span class="">major_locator</span><span class="o">=</span><span class="">FixedLocator</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">radians</span><span class="">(</span><span class="nb">range</span><span class="">(</span><span class="o">-</span><span class="mi">90</span><span class="">,</span><span class=""> </span><span class="mi">90</span><span class="">,</span><span class=""> </span><span class="mi">10</span><span class="">)</span><span class="">)</span><span class="">)</span><span class="">,</span><br><span class='nsl'>...&nbsp;</span><span class="">                 </span><span class="">major_formatter</span><span class="o">=</span><span class="">fmt</span><span class="">,</span><span class=""> </span><span class="">minor_formatter</span><span class="o">=</span><span class="">fmt</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">def</span><span class=""> </span><span class="nf">limit_range_for_scale</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">vmin</span><span class="">,</span><span class=""> </span><span class="">vmax</span><span class="">,</span><span class=""> </span><span class="">minpos</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="sd">&#34;&#34;&#34;
        Override to limit the bounds of the axis to the domain of the
        transform.  In the case of Mercator, the bounds should be
        limited to the threshold that was passed in.  Unlike the
        autoscaling provided by the tick locators, this range limiting
        will always be adhered to, whether the axis range is set
        manually, determined automatically or changed through panning
        and zooming.
        &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">return</span><span class=""> </span><span class="nb">max</span><span class="">(</span><span class="">vmin</span><span class="">,</span><span class=""> </span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="nb">min</span><span class="">(</span><span class="">vmax</span><span class="">,</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">class</span><span class=""> </span><span class="nc">MercatorLatitudeTransform</span><span class="">(</span><span class="">mtransforms</span><span class="o">.</span><span class="">Transform</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># There are two value members that must be defined.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># ``input_dims`` and ``output_dims`` specify number of input</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># dimensions and output dimensions to the transformation.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># These are used by the transformation framework to do some</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># error checking and prevent incompatible transformations from</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># being connected together.  When defining transforms for a</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># scale, which are, by definition, separable and have only one</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="c1"># dimension, these members should always be set to 1.</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">input_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">output_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">1</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">thresh</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">mtransforms</span><span class="o">.</span><span class="">Transform</span><span class="o">.</span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">thresh</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">transform_non_affine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">a</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="sd">&#34;&#34;&#34;
            This transform takes a numpy array and returns a transformed copy.
            Since the range of the Mercator scale is limited by the
            user-specified threshold, the input array must be masked to
            contain only valid values.  Matplotlib will handle masked arrays
            and remove the out-of-range data from the plot.  However, the
            returned array *must* have the same shape as the input array, since
            these values need to remain synchronized with values in the other
            dimension.
            &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">masked</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">ma</span><span class="o">.</span><span class="">masked_where</span><span class="">(</span><span class="">(</span><span class="">a</span><span class=""> </span><span class="o">&lt;</span><span class=""> </span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><span class=""> </span><span class="o">|</span><span class=""> </span><span class="">(</span><span class="">a</span><span class=""> </span><span class="o">&gt;</span><span class=""> </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><span class="">,</span><span class=""> </span><span class="">a</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">if</span><span class=""> </span><span class="">masked</span><span class="o">.</span><span class="">mask</span><span class="o">.</span><span class="">any</span><span class="">(</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">                </span><span class="k">return</span><span class=""> </span><span class="">ma</span><span class="o">.</span><span class="">log</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">abs</span><span class="">(</span><span class="">ma</span><span class="o">.</span><span class="">tan</span><span class="">(</span><span class="">masked</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="mi">1</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">ma</span><span class="o">.</span><span class="">cos</span><span class="">(</span><span class="">masked</span><span class="">)</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">else</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">                </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">log</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">abs</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">tan</span><span class="">(</span><span class="">a</span><span class="">)</span><span class=""> </span><span class="o">+</span><span class=""> </span><span class="mi">1</span><span class=""> </span><span class="o">/</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">cos</span><span class="">(</span><span class="">a</span><span class="">)</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">inverted</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="sd">&#34;&#34;&#34;
            Override this method so Matplotlib knows how to get the
            inverse transform for this transform.
            &#34;&#34;&#34;</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">MercatorLatitudeScale</span><span class="o">.</span><span class="">InvertedMercatorLatitudeTransform</span><span class="">(</span><br><span class='nsl'>...&nbsp;</span><span class="">                </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="k">class</span><span class=""> </span><span class="nc">InvertedMercatorLatitudeTransform</span><span class="">(</span><span class="">mtransforms</span><span class="o">.</span><span class="">Transform</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="">input_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">output_dims</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">1</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">thresh</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="">mtransforms</span><span class="o">.</span><span class="">Transform</span><span class="o">.</span><span class="fm">__init__</span><span class="">(</span><span class="bp">self</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">thresh</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">transform_non_affine</span><span class="">(</span><span class="bp">self</span><span class="">,</span><span class=""> </span><span class="">a</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arctan</span><span class="">(</span><span class="">np</span><span class="o">.</span><span class="">sinh</span><span class="">(</span><span class="">a</span><span class="">)</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">        </span><span class="k">def</span><span class=""> </span><span class="nf">inverted</span><span class="">(</span><span class="bp">self</span><span class="">)</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">            </span><span class="k">return</span><span class=""> </span><span class="">MercatorLatitudeScale</span><span class="o">.</span><span class="">MercatorLatitudeTransform</span><span class="">(</span><span class="bp">self</span><span class="o">.</span><span class="">thresh</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># Now that the Scale class has been defined, it must be registered so</span><br><span class='nsl'>...&nbsp;</span><span class="c1"># that Matplotlib can find it.</span><br><span class='nsl'>...&nbsp;</span><span class="">mscale</span><span class="o">.</span><span class="">register_scale</span><span class="">(</span><span class="">MercatorLatitudeScale</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="k">if</span><span class=""> </span><span class="vm">__name__</span><span class=""> </span><span class="o">==</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">__main__</span><span class="s1">&#39;</span><span class="">:</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="kn">import</span><span class=""> </span><a class="foo nn" href="/p/matplotlib/3.5.1/api/matplotlib.html">matplotlib</a><span class="nn">.</span><span class="nn">pyplot</span><span class=""> </span><span class="k">as</span><span class=""> </span><span class="nn">plt</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">t</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">arange</span><span class="">(</span><span class="o">-</span><span class="mf">180.0</span><span class="">,</span><span class=""> </span><span class="mf">180.0</span><span class="">,</span><span class=""> </span><span class="mf">0.1</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">s</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="">np</span><span class="o">.</span><span class="">radians</span><span class="">(</span><span class="">t</span><span class="">)</span><span class="o">/</span><span class="mf">2.</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">plot</span><span class="">(</span><span class="">t</span><span class="">,</span><span class=""> </span><span class="">s</span><span class="">,</span><span class=""> </span><span class="s1">&#39;</span><span class="s1">-</span><span class="s1">&#39;</span><span class="">,</span><span class=""> </span><span class="">lw</span><span class="o">=</span><span class="mi">2</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">yscale</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">mercator</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">xlabel</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">Longitude</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">ylabel</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">Latitude</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">title</span><span class="">(</span><span class="s1">&#39;</span><span class="s1">Mercator projection</span><span class="s1">&#39;</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">grid</span><span class="">(</span><span class="kc">True</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span><br><span class='nsl'>...&nbsp;</span><span class="">    </span><span class="">plt</span><span class="o">.</span><span class="">show</span><span class="">(</span><span class="">)</span><br><span class='nsl'>...&nbsp;</span>
</pre>
       




</div>
</body>
</html>